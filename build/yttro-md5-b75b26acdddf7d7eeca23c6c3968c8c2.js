!function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(require,t,exports){var e={};e.formatIsoDateTime=function(t,i){"undefined"==typeof t&&(t=new Date),"undefined"==typeof i&&(i=!1);var n=e.formatIsoDate(t)+" "+e.formatIsoTime(t);if(i){var r=t.getHours()-t.getUTCHours(),s=Math.abs(r),o=t.getUTCMinutes(),a=t.getMinutes();a!=o&&30>o&&0>r&&s--,a!=o&&o>30&&r>0&&s--;var c;c=a!=o?":30":":00";var l;l=10>s?"0"+s+c:""+s+c,l=0>r?"-"+l:"+"+l,n+=l}return n},e.formatIsoDate=function(t){"undefined"==typeof t&&(t=new Date);var i=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return i+"-"+e._zeroPad(n,2)+"-"+e._zeroPad(r,2)},e.formatIsoTime=function(t){"undefined"==typeof t&&(t=new Date);var i=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return e._zeroPad(i,2)+":"+e._zeroPad(n,2)+":"+e._zeroPad(r,2)},e.parseIsoDateTime=function(t){if("string"!=typeof t)throw"Error: The parameter must be a string";var e=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)/);if(null===e&&(e=t.match(/^(\d\d\d\d)(\d\d)(\d\d)[T ](\d\d)(\d\d)(\d\d)/)),null===e&&(e=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)[T ](\d\d)(\d\d)(\d\d)/)),null===e&&(e=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)/)),null===e)throw"Error: Invalid ISO-8601 date/time string";var i=parseInt(e[1],10),n=parseInt(e[2],10),r=parseInt(e[3],10),s=parseInt(e[4],10),o=parseInt(e[5],10),a=parseInt(e[6],10);if(1>n||n>12||1>r||r>31||0>s||s>23||0>o||o>59||0>a||a>59)throw"Error: Invalid ISO-8601 date/time value";var c=new Date(i,n-1,r,s,o,a);if(c.getDate()!=r||c.getMonth()+1!=n)throw"Error: Invalid date";return c},e.parseIsoDate=function(t){if("string"!=typeof t)throw"Error: The parameter must be a string";var e=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)/);if(null===e&&(e=t.match(/^(\d\d\d\d)(\d\d)(\d\d)/)),null===e)throw"Error: Invalid ISO-8601 date string";var i=parseInt(e[1],10),n=parseInt(e[2],10),r=parseInt(e[3],10);if(1>n||n>12||1>r||r>31)throw"Error: Invalid ISO-8601 date value";var s=new Date(i,n-1,r);if(s.getDate()!=r||s.getMonth()+1!=n)throw"Error: Invalid date";return s},e.parseIsoTime=function(t){if("string"!=typeof t)throw"Error: The parameter must be a string";var e=t.match(/^(\d\d):(\d\d):(\d\d)/);if(null===e&&(e=t.match(/^(\d\d)(\d\d)(\d\d)/)),null===e)throw"Error: Invalid ISO-8601 date/time string";var i=parseInt(e[1],10),n=parseInt(e[2],10),r=parseInt(e[3],10);if(0>i||i>23||0>n||n>59||0>r||r>59)throw"Error: Invalid ISO-8601 time value";return new Date(0,0,0,i,n,r)},e._trim=function(t){for(var e=" \n\r	\f            ​\u2028\u2029　",i=0;i<t.length;i++)if(-1===e.indexOf(t.charAt(i))){t=t.substring(i);break}for(i=t.length-1;i>=0;i--)if(-1===e.indexOf(t.charAt(i))){t=t.substring(0,i+1);break}return-1===e.indexOf(t.charAt(0))?t:""},e._isNumber=function(t){if("number"==typeof t)return!0;if("string"!=typeof t)return!1;var e=t+"";return/^-?(\d+|\d*\.\d+)$/.test(e)},e._isInteger=function(t){if("number"!=typeof t&&"string"!=typeof t)return!1;var e=t+"";return/^-?\d+$/.test(e)},e._isFloat=function(t){if("number"!=typeof t&&"string"!=typeof t)return!1;var e=t+"";return/^-?\.\d+?$/.test(e)},e._hasOption=function(t,e){return"string"!=typeof t||"string"!=typeof e?!1:-1!=e.indexOf(t)},e._stringReplaceAll=function(t,e,i){var n;if(1==e.length&&1==i.length){n="";for(var r=0;r<t.length;r++)n+=t.charAt(r)==e.charAt(0)?i.charAt(0):t.charAt(r);return n}n=t;for(var s=n.indexOf(e);-1!=s;)n=n.replace(e,i),s=n.indexOf(e);return n},e._stringStartsWith=function(t,e){if(t.length<e.length)return!1;for(var i=!0,n=0;n<e.length;n++)t.charAt(n)!=e.charAt(n)&&(i=!0);if(i)for(var n=0;n<e.length;n++)if(t.charAt(n).toLowerCase()!=e.charAt(n).toLowerCase())return!1;return!0},e._getPrecision=function(t){if("string"!=typeof t)return-1;var e=t.match(/\.(\d)/);return e?parseInt(e[1],10):-1},e._splitNumber=function(t){"number"==typeof t&&(t+="");var e={};"-"==t.charAt(0)&&(t=t.substring(1));var i=t.split(".");return i[1]||(i[1]=""),e.integer=i[0],e.fraction=i[1],e},e._formatIntegerPart=function(t,e,i){if(""==i||"-1"==e)return t;for(var n,r=e.split(";"),s="",o=t.length;o>0;){if(r.length>0&&(n=parseInt(r.shift(),10)),isNaN(n))throw"Error: Invalid grouping";if(-1==n){s=t.substring(0,o)+s;break}if(o-=n,1>o){s=t.substring(0,o+n)+s;break}s=i+t.substring(o,o+n)+s}return s},e._formatFractionPart=function(t,e){for(var i=0;t.length<e;i++)t+="0";return t},e._zeroPad=function(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i},e._spacePad=function(t,e){for(var i=t+"";i.length<e;)i=" "+i;return i},e.Locale=function(t){if(this._className="jsworld.Locale",this._parseList=function(t,e){var i=[];if(null==t)throw"Names not defined";if("object"==typeof t)i=t;else{if("string"!=typeof t)throw"Names must be an array or a string";i=t.split(";",e);for(var n=0;n<i.length;n++){if('"'!=i[n][0]||'"'!=i[n][i[n].length-1])throw"Missing double quotes";i[n]=i[n].slice(1,-1)}}if(i.length!=e)throw"Expected "+e+" items, got "+i.length;return i},this._validateFormatString=function(t,e){if("string"==typeof t&&t.length>0)return t;if("string"==typeof e&&"undefined"==typeof t)return e;throw"Empty or no string"},null==t||"object"!=typeof t)throw"Error: Invalid/missing locale properties";if("string"!=typeof t.decimal_point)throw"Error: Invalid/missing decimal_point property";if(this.decimal_point=t.decimal_point,"string"!=typeof t.thousands_sep)throw"Error: Invalid/missing thousands_sep property";if(this.thousands_sep=t.thousands_sep,"string"!=typeof t.grouping)throw"Error: Invalid/missing grouping property";if(this.grouping=t.grouping,"string"!=typeof t.int_curr_symbol)throw"Error: Invalid/missing int_curr_symbol property";if(!/[A-Za-z]{3}.?/.test(t.int_curr_symbol))throw"Error: Invalid int_curr_symbol property";if(this.int_curr_symbol=t.int_curr_symbol,"string"!=typeof t.currency_symbol)throw"Error: Invalid/missing currency_symbol property";if(this.currency_symbol=t.currency_symbol,"number"!=typeof t.frac_digits&&t.frac_digits<0)throw"Error: Invalid/missing frac_digits property";if(this.frac_digits=t.frac_digits,null===t.mon_decimal_point||""==t.mon_decimal_point){if(this.frac_digits>0)throw"Error: Undefined mon_decimal_point property";t.mon_decimal_point=""}if("string"!=typeof t.mon_decimal_point)throw"Error: Invalid/missing mon_decimal_point property";if(this.mon_decimal_point=t.mon_decimal_point,"string"!=typeof t.mon_thousands_sep)throw"Error: Invalid/missing mon_thousands_sep property";if(this.mon_thousands_sep=t.mon_thousands_sep,"string"!=typeof t.mon_grouping)throw"Error: Invalid/missing mon_grouping property";if(this.mon_grouping=t.mon_grouping,"string"!=typeof t.positive_sign)throw"Error: Invalid/missing positive_sign property";if(this.positive_sign=t.positive_sign,"string"!=typeof t.negative_sign)throw"Error: Invalid/missing negative_sign property";if(this.negative_sign=t.negative_sign,0!==t.p_cs_precedes&&1!==t.p_cs_precedes)throw"Error: Invalid/missing p_cs_precedes property, must be 0 or 1";if(this.p_cs_precedes=t.p_cs_precedes,0!==t.n_cs_precedes&&1!==t.n_cs_precedes)throw"Error: Invalid/missing n_cs_precedes, must be 0 or 1";if(this.n_cs_precedes=t.n_cs_precedes,0!==t.p_sep_by_space&&1!==t.p_sep_by_space&&2!==t.p_sep_by_space)throw"Error: Invalid/missing p_sep_by_space property, must be 0, 1 or 2";if(this.p_sep_by_space=t.p_sep_by_space,0!==t.n_sep_by_space&&1!==t.n_sep_by_space&&2!==t.n_sep_by_space)throw"Error: Invalid/missing n_sep_by_space property, must be 0, 1, or 2";if(this.n_sep_by_space=t.n_sep_by_space,0!==t.p_sign_posn&&1!==t.p_sign_posn&&2!==t.p_sign_posn&&3!==t.p_sign_posn&&4!==t.p_sign_posn)throw"Error: Invalid/missing p_sign_posn property, must be 0, 1, 2, 3 or 4";if(this.p_sign_posn=t.p_sign_posn,0!==t.n_sign_posn&&1!==t.n_sign_posn&&2!==t.n_sign_posn&&3!==t.n_sign_posn&&4!==t.n_sign_posn)throw"Error: Invalid/missing n_sign_posn property, must be 0, 1, 2, 3 or 4";if(this.n_sign_posn=t.n_sign_posn,"number"!=typeof t.int_frac_digits&&t.int_frac_digits<0)throw"Error: Invalid/missing int_frac_digits property";if(this.int_frac_digits=t.int_frac_digits,0!==t.int_p_cs_precedes&&1!==t.int_p_cs_precedes)throw"Error: Invalid/missing int_p_cs_precedes property, must be 0 or 1";if(this.int_p_cs_precedes=t.int_p_cs_precedes,0!==t.int_n_cs_precedes&&1!==t.int_n_cs_precedes)throw"Error: Invalid/missing int_n_cs_precedes property, must be 0 or 1";if(this.int_n_cs_precedes=t.int_n_cs_precedes,0!==t.int_p_sep_by_space&&1!==t.int_p_sep_by_space&&2!==t.int_p_sep_by_space)throw"Error: Invalid/missing int_p_sep_by_spacev, must be 0, 1 or 2";if(this.int_p_sep_by_space=t.int_p_sep_by_space,0!==t.int_n_sep_by_space&&1!==t.int_n_sep_by_space&&2!==t.int_n_sep_by_space)throw"Error: Invalid/missing int_n_sep_by_space property, must be 0, 1, or 2";if(this.int_n_sep_by_space=t.int_n_sep_by_space,0!==t.int_p_sign_posn&&1!==t.int_p_sign_posn&&2!==t.int_p_sign_posn&&3!==t.int_p_sign_posn&&4!==t.int_p_sign_posn)throw"Error: Invalid/missing int_p_sign_posn property, must be 0, 1, 2, 3 or 4";if(this.int_p_sign_posn=t.int_p_sign_posn,0!==t.int_n_sign_posn&&1!==t.int_n_sign_posn&&2!==t.int_n_sign_posn&&3!==t.int_n_sign_posn&&4!==t.int_n_sign_posn)throw"Error: Invalid/missing int_n_sign_posn property, must be 0, 1, 2, 3 or 4";if(this.int_n_sign_posn=t.int_n_sign_posn,null==t||"object"!=typeof t)throw"Error: Invalid/missing time locale properties";try{this.abday=this._parseList(t.abday,7)}catch(t){throw"Error: Invalid abday property: "+t}try{this.day=this._parseList(t.day,7)}catch(t){throw"Error: Invalid day property: "+t}try{this.abmon=this._parseList(t.abmon,12)}catch(t){throw"Error: Invalid abmon property: "+t}try{this.mon=this._parseList(t.mon,12)}catch(t){throw"Error: Invalid mon property: "+t}try{this.d_fmt=this._validateFormatString(t.d_fmt)}catch(t){throw"Error: Invalid d_fmt property: "+t}try{this.d_fmt_full=this._validateFormatString(t.d_fmt_full,this.d_fmt)}catch(t){throw"Error: Invalid d_fmt_full property: "+t}try{this.d_fmt_long=this._validateFormatString(t.d_fmt_long,this.d_fmt)}catch(t){throw"Error: Invalid d_fmt_long property: "+t}try{this.d_fmt_medium=this._validateFormatString(t.d_fmt_medium,this.d_fmt)}catch(t){throw"Error: Invalid d_fmt_medium property: "+t}try{this.d_fmt_short=this._validateFormatString(t.d_fmt_short,this.d_fmt)}catch(t){throw"Error: Invalid d_fmt_short property: "+t}try{this.t_fmt=this._validateFormatString(t.t_fmt)}catch(t){throw"Error: Invalid t_fmt property: "+t}try{this.t_fmt_full=this._validateFormatString(t.t_fmt_full,this.t_fmt)}catch(t){throw"Error: Invalid t_fmt_full property: "+t}try{this.t_fmt_long=this._validateFormatString(t.t_fmt_long,this.t_fmt)}catch(t){throw"Error: Invalid t_fmt_long property: "+t}try{this.t_fmt_medium=this._validateFormatString(t.t_fmt_medium,this.t_fmt)}catch(t){throw"Error: Invalid t_fmt_medium property: "+t}try{this.t_fmt_short=this._validateFormatString(t.t_fmt_short,this.t_fmt)}catch(t){throw"Error: Invalid t_fmt_short property: "+t}try{this.d_t_fmt=this._validateFormatString(t.d_t_fmt)}catch(t){throw"Error: Invalid d_t_fmt property: "+t}try{this.d_t_fmt_full=this._validateFormatString(t.d_t_fmt_full,this.d_t_fmt)}catch(t){throw"Error: Invalid d_t_fmt property: "+t}try{this.d_t_fmt_long=this._validateFormatString(t.d_t_fmt_long,this.d_t_fmt)}catch(t){throw"Error: Invalid d_t_fmt_long property: "+t}try{this.d_t_fmt_medium=this._validateFormatString(t.d_t_fmt_medium,this.d_t_fmt)}catch(t){throw"Error: Invalid d_t_fmt_medium property: "+t}try{this.d_t_fmt_short=this._validateFormatString(t.d_t_fmt_short,this.d_t_fmt)}catch(t){throw"Error: Invalid d_t_fmt_short property: "+t}try{var i=this._parseList(t.am_pm,2);this.am=i[0],this.pm=i[1]}catch(t){this.am="",this.pm=""}this.getAbbreviatedWeekdayName=function(t){if("undefined"==typeof t||null===t)return this.abday;if(!e._isInteger(t)||0>t||t>6)throw"Error: Invalid weekday argument, must be an integer [0..6]";return this.abday[t]},this.getWeekdayName=function(t){if("undefined"==typeof t||null===t)return this.day;if(!e._isInteger(t)||0>t||t>6)throw"Error: Invalid weekday argument, must be an integer [0..6]";return this.day[t]},this.getAbbreviatedMonthName=function(t){if("undefined"==typeof t||null===t)return this.abmon;if(!e._isInteger(t)||0>t||t>11)throw"Error: Invalid month argument, must be an integer [0..11]";return this.abmon[t]},this.getMonthName=function(t){if("undefined"==typeof t||null===t)return this.mon;if(!e._isInteger(t)||0>t||t>11)throw"Error: Invalid month argument, must be an integer [0..11]";return this.mon[t]},this.getDecimalPoint=function(){return this.decimal_point},this.getCurrencySymbol=function(){return this.currency_symbol},this.getIntCurrencySymbol=function(){return this.int_curr_symbol.substring(0,3)},this.currencySymbolPrecedes=function(){return 1==this.p_cs_precedes},this.intCurrencySymbolPrecedes=function(){return 1==this.int_p_cs_precedes},this.getMonetaryDecimalPoint=function(){return this.mon_decimal_point},this.getFractionalDigits=function(){return this.frac_digits},this.getIntFractionalDigits=function(){return this.int_frac_digits}},e.NumericFormatter=function(t){if("object"!=typeof t||"jsworld.Locale"!=t._className)throw"Constructor error: You must provide a valid jsworld.Locale instance";this.lc=t,this.format=function(t,i){if("string"==typeof t&&(t=e._trim(t)),!e._isNumber(t))throw"Error: The input is not a number";var n=parseFloat(t,10),r=e._getPrecision(i);-1!=r&&(n=Math.round(n*Math.pow(10,r))/Math.pow(10,r));var s,o=e._splitNumber(String(n));s=0===n?"0":e._hasOption("^",i)?o.integer:e._formatIntegerPart(o.integer,this.lc.grouping,this.lc.thousands_sep);var a=-1!=r?e._formatFractionPart(o.fraction,r):o.fraction,c=a.length>0?s+this.lc.decimal_point+a:s;return e._hasOption("~",i)||0===n?c:e._hasOption("+",i)||0>n?n>0?"+"+c:0>n?"-"+c:c:c}},e.DateTimeFormatter=function(t){if("object"!=typeof t||"jsworld.Locale"!=t._className)throw"Constructor error: You must provide a valid jsworld.Locale instance.";this.lc=t,this.formatDate=function(t,i){var n=null;if("string"==typeof t)try{n=e.parseIsoDate(t)}catch(i){n=e.parseIsoDateTime(t)}else{if(null===t||"object"!=typeof t)throw"Error: Invalid date argument, must be a Date object or an ISO-8601 date/time string";n=t}return"undefined"==typeof i?this._applyFormatting(n,this.lc.d_fmt):"full"==i?this._applyFormatting(n,this.lc.d_fmt_full):"long"==i?this._applyFormatting(n,this.lc.d_fmt_long):"medium"==i?this._applyFormatting(n,this.lc.d_fmt_medium):this._applyFormatting(n,this.lc.d_fmt_short)},this.formatTime=function(t,i){var n=null;if("string"==typeof t)try{n=e.parseIsoTime(t)}catch(i){n=e.parseIsoDateTime(t)}else{if(null===t||"object"!=typeof t)throw"Error: Invalid date argument, must be a Date object or an ISO-8601 date/time string";n=t}return"undefined"==typeof i?this._applyFormatting(n,this.lc.t_fmt):"full"==i?this._applyFormatting(n,this.lc.t_fmt_full):"long"==i?this._applyFormatting(n,this.lc.t_fmt_long):"medium"==i?this._applyFormatting(n,this.lc.t_fmt_medium):this._applyFormatting(n,this.lc.t_fmt_short)},this.formatDateTime=function(t,i){var n=null;if("string"==typeof t)n=e.parseIsoDateTime(t);else{if(null===t||"object"!=typeof t)throw"Error: Invalid date argument, must be a Date object or an ISO-8601 date/time string";n=t}return"undefined"==typeof i?this._applyFormatting(n,this.lc.d_t_fmt):"full"==i?this._applyFormatting(n,this.lc.d_t_fmt_full):"long"==i?this._applyFormatting(n,this.lc.d_t_fmt_long):"medium"==i?this._applyFormatting(n,this.lc.d_t_fmt_medium):this._applyFormatting(n,this.lc.d_t_fmt_short)},this._applyFormatting=function(t,i){return i=i.replace(/%%/g,"%"),i=i.replace(/%a/g,this.lc.abday[t.getDay()]),i=i.replace(/%A/g,this.lc.day[t.getDay()]),i=i.replace(/%b/g,this.lc.abmon[t.getMonth()]),i=i.replace(/%B/g,this.lc.mon[t.getMonth()]),i=i.replace(/%d/g,e._zeroPad(t.getDate(),2)),i=i.replace(/%e/g,e._spacePad(t.getDate(),2)),i=i.replace(/%F/g,t.getFullYear()+"-"+e._zeroPad(t.getMonth()+1,2)+"-"+e._zeroPad(t.getDate(),2)),i=i.replace(/%h/g,this.lc.abmon[t.getMonth()]),i=i.replace(/%H/g,e._zeroPad(t.getHours(),2)),i=i.replace(/%I/g,e._zeroPad(this._hours12(t.getHours()),2)),i=i.replace(/%k/g,t.getHours()),i=i.replace(/%l/g,this._hours12(t.getHours())),i=i.replace(/%m/g,e._zeroPad(t.getMonth()+1,2)),i=i.replace(/%n/g,"\n"),i=i.replace(/%M/g,e._zeroPad(t.getMinutes(),2)),i=i.replace(/%p/g,this._getAmPm(t.getHours())),i=i.replace(/%P/g,this._getAmPm(t.getHours()).toLocaleLowerCase()),i=i.replace(/%R/g,e._zeroPad(t.getHours(),2)+":"+e._zeroPad(t.getMinutes(),2)),i=i.replace(/%S/g,e._zeroPad(t.getSeconds(),2)),i=i.replace(/%T/g,e._zeroPad(t.getHours(),2)+":"+e._zeroPad(t.getMinutes(),2)+":"+e._zeroPad(t.getSeconds(),2)),i=i.replace(/%w/g,this.lc.day[t.getDay()]),i=i.replace(/%y/g,new String(t.getFullYear()).substring(2)),i=i.replace(/%Y/g,t.getFullYear()),i=i.replace(/%Z/g,""),i=i.replace(/%[a-zA-Z]/g,"")},this._hours12=function(t){return 0===t?12:t>12?t-12:t},this._getAmPm=function(t){return 12>t?this.lc.am:this.lc.pm}},e.MonetaryFormatter=function(t,i,n){if("object"!=typeof t||"jsworld.Locale"!=t._className)throw"Constructor error: You must provide a valid jsworld.Locale instance";if(this.lc=t,this.currencyFractionDigits={AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:0,ISK:0,JOD:3,JPY:0,KMF:0,KRW:0,KWD:3,LAK:0,LBP:0,LYD:3,MGA:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TND:3,TWD:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0},"string"==typeof i){this.currencyCode=i.toUpperCase();var r=this.currencyFractionDigits[this.currencyCode];"number"!=typeof r&&(r=2),this.lc.frac_digits=r,this.lc.int_frac_digits=r}else this.currencyCode=this.lc.int_curr_symbol.substring(0,3).toUpperCase();this.intSep=this.lc.int_curr_symbol.charAt(3),this.currencyCode==this.lc.int_curr_symbol.substring(0,3)?(this.internationalFormatting=!1,this.curSym=this.lc.currency_symbol):"string"==typeof n?(this.curSym=n,this.internationalFormatting=!1):this.internationalFormatting=!0,this.getCurrencySymbol=function(){return this.curSym},this.currencySymbolPrecedes=function(t){return"string"==typeof t&&"i"==t?1==this.lc.int_p_cs_precedes:this.internationalFormatting?1==this.lc.int_p_cs_precedes:1==this.lc.p_cs_precedes},this.getDecimalPoint=function(){return this.lc.mon_decimal_point},this.getFractionalDigits=function(t){return"string"==typeof t&&"i"==t?this.lc.int_frac_digits:this.internationalFormatting?this.lc.int_frac_digits:this.lc.frac_digits},this.format=function(t,i){var n;if("string"==typeof t){if(t=e._trim(t),n=parseFloat(t),"number"!=typeof n||isNaN(n))throw"Error: Amount string not a number"}else{if("number"!=typeof t)throw"Error: Amount not a number";n=t}var r=e._getPrecision(i);-1==r&&(r=this.internationalFormatting||e._hasOption("i",i)?this.lc.int_frac_digits:this.lc.frac_digits),n=Math.round(n*Math.pow(10,r))/Math.pow(10,r);var s,o=e._splitNumber(String(n));s=0===n?"0":e._hasOption("^",i)?o.integer:e._formatIntegerPart(o.integer,this.lc.mon_grouping,this.lc.mon_thousands_sep);var a;a=-1==r?this.internationalFormatting||e._hasOption("i",i)?e._formatFractionPart(o.fraction,this.lc.int_frac_digits):e._formatFractionPart(o.fraction,this.lc.frac_digits):e._formatFractionPart(o.fraction,r);var c;if(c=a.length>0?s+this.lc.mon_decimal_point+a:s,e._hasOption("~",i))return c;var l=e._hasOption("!",i)?!0:!1,h=0>n?"-":"+";return this.internationalFormatting||e._hasOption("i",i)?l?this._formatAsInternationalCurrencyWithNoSym(h,c):this._formatAsInternationalCurrency(h,c):l?this._formatAsLocalCurrencyWithNoSym(h,c):this._formatAsLocalCurrency(h,c)},this._formatAsLocalCurrency=function(t,e){if("+"==t){if(0===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return"("+e+this.curSym+")";if(0===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return"("+this.curSym+e+")";if(0===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return"("+e+" "+this.curSym+")";if(0===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return"("+this.curSym+" "+e+")";if(1===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return this.lc.positive_sign+e+this.curSym;if(1===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+this.curSym+e;if(1===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return this.lc.positive_sign+e+" "+this.curSym;if(1===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+this.curSym+" "+e;if(1===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+e+this.curSym;if(1===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+this.curSym+e;if(2===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.curSym+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.curSym+e+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.curSym+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.curSym+" "+e+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.curSym+" "+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.curSym+e+" "+this.lc.positive_sign;if(3===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign+this.curSym;if(3===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+this.curSym+e;if(3===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.lc.positive_sign+this.curSym;if(3===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+this.curSym+" "+e;if(3===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign+" "+this.curSym;if(3===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+this.curSym+e;if(4===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.curSym+this.lc.positive_sign;if(4===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.curSym+this.lc.positive_sign+e;if(4===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.curSym+this.lc.positive_sign;if(4===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.curSym+this.lc.positive_sign+" "+e;if(4===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.curSym+" "+this.lc.positive_sign;if(4===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.curSym+" "+this.lc.positive_sign+e}else if("-"==t){if(0===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return"("+e+this.curSym+")";if(0===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return"("+this.curSym+e+")";if(0===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return"("+e+" "+this.curSym+")";if(0===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return"("+this.curSym+" "+e+")";if(1===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return this.lc.negative_sign+e+this.curSym;if(1===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+this.curSym+e;if(1===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return this.lc.negative_sign+e+" "+this.curSym;if(1===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+this.curSym+" "+e;if(1===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e+this.curSym;if(1===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+this.curSym+e;if(2===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.curSym+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.curSym+e+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.curSym+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.curSym+" "+e+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.curSym+" "+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.curSym+e+" "+this.lc.negative_sign;if(3===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.lc.negative_sign+this.curSym;if(3===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+this.curSym+e;if(3===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign+this.curSym;if(3===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+this.curSym+" "+e;if(3===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.lc.negative_sign+" "+this.curSym;if(3===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+this.curSym+e;if(4===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.curSym+this.lc.negative_sign;if(4===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.curSym+this.lc.negative_sign+e;if(4===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.curSym+this.lc.negative_sign;if(4===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.curSym+this.lc.negative_sign+" "+e;if(4===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.curSym+" "+this.lc.negative_sign;if(4===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.curSym+" "+this.lc.negative_sign+e}throw"Error: Invalid POSIX LC MONETARY definition"},this._formatAsInternationalCurrency=function(t,e){if("+"==t){if(0===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return"("+e+this.currencyCode+")";if(0===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return"("+this.currencyCode+e+")";if(0===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return"("+e+this.intSep+this.currencyCode+")";if(0===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return"("+this.currencyCode+this.intSep+e+")";if(1===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e+this.currencyCode;if(1===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.currencyCode+e;if(1===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e+this.intSep+this.currencyCode;if(1===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.currencyCode+this.intSep+e;if(1===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e+this.currencyCode;if(1===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+this.currencyCode+e;if(2===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.currencyCode+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.currencyCode+e+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.currencyCode+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.currencyCode+this.intSep+e+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.currencyCode+this.intSep+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.currencyCode+e+this.intSep+this.lc.positive_sign;if(3===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign+this.currencyCode;if(3===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.currencyCode+e;if(3===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign+this.currencyCode;if(3===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.currencyCode+this.intSep+e;if(3===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign+this.intSep+this.currencyCode;if(3===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+this.currencyCode+e;if(4===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.currencyCode+this.lc.positive_sign;if(4===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.currencyCode+this.lc.positive_sign+e;if(4===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.currencyCode+this.lc.positive_sign;if(4===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.currencyCode+this.lc.positive_sign+this.intSep+e;if(4===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.currencyCode+this.intSep+this.lc.positive_sign;if(4===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.currencyCode+this.intSep+this.lc.positive_sign+e}else if("-"==t){if(0===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return"("+e+this.currencyCode+")";if(0===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return"("+this.currencyCode+e+")";if(0===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return"("+e+this.intSep+this.currencyCode+")";if(0===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return"("+this.currencyCode+this.intSep+e+")";if(1===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e+this.currencyCode;
if(1===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.currencyCode+e;if(1===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e+this.intSep+this.currencyCode;if(1===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.currencyCode+this.intSep+e;if(1===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e+this.currencyCode;if(1===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+this.currencyCode+e;if(2===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.currencyCode+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.currencyCode+e+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.currencyCode+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.currencyCode+this.intSep+e+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.currencyCode+this.intSep+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.currencyCode+e+this.intSep+this.lc.negative_sign;if(3===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign+this.currencyCode;if(3===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.currencyCode+e;if(3===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign+this.currencyCode;if(3===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.currencyCode+this.intSep+e;if(3===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign+this.intSep+this.currencyCode;if(3===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+this.currencyCode+e;if(4===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.currencyCode+this.lc.negative_sign;if(4===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.currencyCode+this.lc.negative_sign+e;if(4===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.currencyCode+this.lc.negative_sign;if(4===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.currencyCode+this.lc.negative_sign+this.intSep+e;if(4===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.currencyCode+this.intSep+this.lc.negative_sign;if(4===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.currencyCode+this.intSep+this.lc.negative_sign+e}throw"Error: Invalid POSIX LC MONETARY definition"},this._formatAsLocalCurrencyWithNoSym=function(t,e){if("+"==t){if(0===this.lc.p_sign_posn)return"("+e+")";if(1===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+e;if(1===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+e;if(2===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return e+" "+this.lc.positive_sign;if(3===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(3===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+e;if(3===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.lc.positive_sign;if(3===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+e;if(3===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(3===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+e;if(4===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+this.lc.positive_sign;if(4===this.lc.p_sign_posn&&0===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+e;if(4===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.lc.positive_sign;if(4===this.lc.p_sign_posn&&1===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+" "+e;if(4===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&0===this.lc.p_cs_precedes)return e+" "+this.lc.positive_sign;if(4===this.lc.p_sign_posn&&2===this.lc.p_sep_by_space&&1===this.lc.p_cs_precedes)return this.lc.positive_sign+e}else if("-"==t){if(0===this.lc.n_sign_posn)return"("+e+")";if(1===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return this.lc.negative_sign+e;if(1===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+e;if(1===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return this.lc.negative_sign+e;if(1===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e;if(1===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e;if(1===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e;if(2===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return e+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return e+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign;if(2===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign;if(3===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.lc.negative_sign;if(3===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+e;if(3===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign;if(3===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e;if(3===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.lc.negative_sign;if(3===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e;if(4===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+this.lc.negative_sign;if(4===this.lc.n_sign_posn&&0===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+e;if(4===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign;if(4===this.lc.n_sign_posn&&1===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+" "+e;if(4===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&0===this.lc.n_cs_precedes)return e+" "+this.lc.negative_sign;if(4===this.lc.n_sign_posn&&2===this.lc.n_sep_by_space&&1===this.lc.n_cs_precedes)return this.lc.negative_sign+e}throw"Error: Invalid POSIX LC MONETARY definition"},this._formatAsInternationalCurrencyWithNoSym=function(t,e){if("+"==t){if(0===this.lc.int_p_sign_posn)return"("+e+")";if(1===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e;if(1===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e;if(1===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e;if(1===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e;if(2===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign;if(2===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign;if(3===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign;if(3===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e;if(3===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign;if(3===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e;if(3===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign;if(3===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e;if(4===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.lc.positive_sign;if(4===this.lc.int_p_sign_posn&&0===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e;if(4===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign;if(4===this.lc.int_p_sign_posn&&1===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+this.intSep+e;if(4===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&0===this.lc.int_p_cs_precedes)return e+this.intSep+this.lc.positive_sign;if(4===this.lc.int_p_sign_posn&&2===this.lc.int_p_sep_by_space&&1===this.lc.int_p_cs_precedes)return this.lc.positive_sign+e}else if("-"==t){if(0===this.lc.int_n_sign_posn)return"("+e+")";if(1===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e;if(1===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e;if(1===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e;if(1===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e;if(1===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e;if(1===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e;if(2===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign;if(2===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign;if(3===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign;if(3===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e;if(3===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign;if(3===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e;if(3===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign;if(3===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e;if(4===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.lc.negative_sign;if(4===this.lc.int_n_sign_posn&&0===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e;if(4===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign;if(4===this.lc.int_n_sign_posn&&1===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+this.intSep+e;if(4===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&0===this.lc.int_n_cs_precedes)return e+this.intSep+this.lc.negative_sign;if(4===this.lc.int_n_sign_posn&&2===this.lc.int_n_sep_by_space&&1===this.lc.int_n_cs_precedes)return this.lc.negative_sign+e}throw"Error: Invalid POSIX LC_MONETARY definition"}},e.NumericParser=function(t){if("object"!=typeof t&&"jsworld.Locale"!=t._className)throw"Constructor error: You must provide a valid jsworld.Locale instance";this.lc=t,this.parse=function(t){if("string"!=typeof t)throw"Parse error: Argument must be a string";var i=e._trim(t);if(i=e._stringReplaceAll(t,this.lc.thousands_sep,""),i=e._stringReplaceAll(i,this.lc.decimal_point,"."),e._isNumber(i))return parseFloat(i,10);throw"Parse error: Invalid number string"}},e.DateTimeParser=function(t){if("object"!=typeof t||"jsworld.Locale"!=t._className)throw"Constructor error: You must provide a valid jsworld.Locale instance.";this.lc=t,this.parseTime=function(t){if("string"!=typeof t)throw"Parse error: Argument must be a string";var i=this._extractTokens(this.lc.t_fmt,t),n=!1;if(null!==i.hour&&null!==i.minute&&null!==i.second?n=!0:null!==i.hourAmPm&&null!==i.am&&null!==i.minute&&null!==i.second&&(i.am?12==i.hourAmPm?i.hour=0:i.hour=parseInt(i.hourAmPm,10):12==i.hourAmPm?i.hour=12:i.hour=parseInt(i.hourAmPm,10)+12,n=!0),n)return e._zeroPad(i.hour,2)+":"+e._zeroPad(i.minute,2)+":"+e._zeroPad(i.second,2);throw"Parse error: Invalid/ambiguous time string"},this.parseDate=function(t){if("string"!=typeof t)throw"Parse error: Argument must be a string";var i=this._extractTokens(this.lc.d_fmt,t);if(null!==i.year&&null!==i.month&&null!==i.day)return e._zeroPad(i.year,4)+"-"+e._zeroPad(i.month,2)+"-"+e._zeroPad(i.day,2);throw"Parse error: Invalid date string"},this.parseDateTime=function(t){if("string"!=typeof t)throw"Parse error: Argument must be a string";var i=this._extractTokens(this.lc.d_t_fmt,t),n=!1,r=!1;if(null!==i.hour&&null!==i.minute&&null!==i.second?n=!0:null!==i.hourAmPm&&null!==i.am&&null!==i.minute&&null!==i.second&&(i.am?12==i.hourAmPm?i.hour=0:i.hour=parseInt(i.hourAmPm,10):12==i.hourAmPm?i.hour=12:i.hour=parseInt(i.hourAmPm,10)+12,n=!0),null!==i.year&&null!==i.month&&null!==i.day&&(r=!0),r&&n)return e._zeroPad(i.year,4)+"-"+e._zeroPad(i.month,2)+"-"+e._zeroPad(i.day,2)+" "+e._zeroPad(i.hour,2)+":"+e._zeroPad(i.minute,2)+":"+e._zeroPad(i.second,2);throw"Parse error: Invalid/ambiguous date/time string"},this._extractTokens=function(t,i){for(var n={year:null,month:null,day:null,hour:null,hourAmPm:null,am:null,minute:null,second:null,weekday:null};t.length>0;)if("%"==t.charAt(0)&&""!=t.charAt(1)){var r=t.substring(0,2);if("%%"==r)i=i.substring(1);else if("%a"==r){for(var s=0;s<this.lc.abday.length;s++)if(e._stringStartsWith(i,this.lc.abday[s])){n.weekday=s,i=i.substring(this.lc.abday[s].length);break}if(null===n.weekday)throw"Parse error: Unrecognised abbreviated weekday name (%a)"}else if("%A"==r){for(var s=0;s<this.lc.day.length;s++)if(e._stringStartsWith(i,this.lc.day[s])){n.weekday=s,i=i.substring(this.lc.day[s].length);break}if(null===n.weekday)throw"Parse error: Unrecognised weekday name (%A)"}else if("%b"==r||"%h"==r){for(var s=0;s<this.lc.abmon.length;s++)if(e._stringStartsWith(i,this.lc.abmon[s])){n.month=s+1,i=i.substring(this.lc.abmon[s].length);break}if(null===n.month)throw"Parse error: Unrecognised abbreviated month name (%b)"}else if("%B"==r){for(var s=0;s<this.lc.mon.length;s++)if(e._stringStartsWith(i,this.lc.mon[s])){n.month=s+1,i=i.substring(this.lc.mon[s].length);break}if(null===n.month)throw"Parse error: Unrecognised month name (%B)"}else if("%d"==r){if(!/^0[1-9]|[1-2][0-9]|3[0-1]/.test(i))throw"Parse error: Unrecognised day of the month (%d)";n.day=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%e"==r){var o=i.match(/^\s?(\d{1,2})/);if(null===o)throw"Parse error: Unrecognised day of the month (%e)";if(n.day=parseInt(o[1],10),isNaN(n.day)||n.day<1||n.day>31)throw"Parse error: Unrecognised day of the month (%e)";i=i.substring(o[0].length)}else if("%F"==r){if(!/^\d\d\d\d/.test(i))throw"Parse error: Unrecognised date (%F)";if(n.year=parseInt(i.substring(0,4),10),i=i.substring(4),!e._stringStartsWith(i,"-"))throw"Parse error: Unrecognised date (%F)";if(i=i.substring(1),!/^0[1-9]|1[0-2]/.test(i))throw"Parse error: Unrecognised date (%F)";if(n.month=parseInt(i.substring(0,2),10),i=i.substring(2),!e._stringStartsWith(i,"-"))throw"Parse error: Unrecognised date (%F)";if(i=i.substring(1),!/^0[1-9]|[1-2][0-9]|3[0-1]/.test(i))throw"Parse error: Unrecognised date (%F)";n.day=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%H"==r){if(!/^[0-1][0-9]|2[0-3]/.test(i))throw"Parse error: Unrecognised hour (%H)";n.hour=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%I"==r){if(!/^0[1-9]|1[0-2]/.test(i))throw"Parse error: Unrecognised hour (%I)";n.hourAmPm=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%k"==r){var a=i.match(/^\d{1,2}/);if(null===a)throw"Parse error: Unrecognised hour (%k)";if(n.hour=parseInt(a[0],10),isNaN(n.hour)||n.hour<0||n.hour>23)throw"Parse error: Unrecognised hour (%k)";i=i.substring(a[0].length)}else if("%l"==r){var a=i.match(/^\d{1,2}/);if(null===a)throw"Parse error: Unrecognised hour (%l)";if(n.hourAmPm=parseInt(a[0],10),isNaN(n.hourAmPm)||n.hourAmPm<1||n.hourAmPm>12)throw"Parse error: Unrecognised hour (%l)";i=i.substring(a[0].length)}else if("%m"==r){if(!/^0[1-9]|1[0-2]/.test(i))throw"Parse error: Unrecognised month (%m)";n.month=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%M"==r){if(!/^[0-5][0-9]/.test(i))throw"Parse error: Unrecognised minute (%M)";n.minute=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%n"==r){if("\n"!=i.charAt(0))throw"Parse error: Unrecognised new line (%n)";i=i.substring(1)}else if("%p"==r)if(e._stringStartsWith(i,this.lc.am))n.am=!0,i=i.substring(this.lc.am.length);else{if(!e._stringStartsWith(i,this.lc.pm))throw"Parse error: Unrecognised AM/PM value (%p)";n.am=!1,i=i.substring(this.lc.pm.length)}else if("%P"==r)if(e._stringStartsWith(i,this.lc.am.toLowerCase()))n.am=!0,i=i.substring(this.lc.am.length);else{if(!e._stringStartsWith(i,this.lc.pm.toLowerCase()))throw"Parse error: Unrecognised AM/PM value (%P)";n.am=!1,i=i.substring(this.lc.pm.length)}else if("%R"==r){if(!/^[0-1][0-9]|2[0-3]/.test(i))throw"Parse error: Unrecognised time (%R)";if(n.hour=parseInt(i.substring(0,2),10),i=i.substring(2),!e._stringStartsWith(i,":"))throw"Parse error: Unrecognised time (%R)";if(i=i.substring(1),!/^[0-5][0-9]/.test(i))throw"Parse error: Unrecognised time (%R)";n.minute=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%S"==r){if(!/^[0-5][0-9]/.test(i))throw"Parse error: Unrecognised second (%S)";n.second=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%T"==r){if(!/^[0-1][0-9]|2[0-3]/.test(i))throw"Parse error: Unrecognised time (%T)";if(n.hour=parseInt(i.substring(0,2),10),i=i.substring(2),!e._stringStartsWith(i,":"))throw"Parse error: Unrecognised time (%T)";if(i=i.substring(1),!/^[0-5][0-9]/.test(i))throw"Parse error: Unrecognised time (%T)";if(n.minute=parseInt(i.substring(0,2),10),i=i.substring(2),!e._stringStartsWith(i,":"))throw"Parse error: Unrecognised time (%T)";if(i=i.substring(1),!/^[0-5][0-9]/.test(i))throw"Parse error: Unrecognised time (%T)";n.second=parseInt(i.substring(0,2),10),i=i.substring(2)}else if("%w"==r){if(!/^\d/.test(i))throw"Parse error: Unrecognised weekday number (%w)";n.weekday=parseInt(i.substring(0,1),10),i=i.substring(1)}else if("%y"==r){if(!/^\d\d/.test(i))throw"Parse error: Unrecognised year (%y)";var c=parseInt(i.substring(0,2),10);c>50?n.year=1900+c:n.year=2e3+c,i=i.substring(2)}else if("%Y"==r){if(!/^\d\d\d\d/.test(i))throw"Parse error: Unrecognised year (%Y)";n.year=parseInt(i.substring(0,4),10),i=i.substring(4)}else if("%Z"==r&&0===t.length)break;t=t.substring(2)}else{if(t.charAt(0)!=i.charAt(0))throw'Parse error: Unexpected symbol "'+i.charAt(0)+'" in date/time string';t=t.substring(1),i=i.substring(1)}return n}},e.MonetaryParser=function(t){if("object"!=typeof t||"jsworld.Locale"!=t._className)throw"Constructor error: You must provide a valid jsworld.Locale instance";this.lc=t,this.parse=function(t){if("string"!=typeof t)throw"Parse error: Argument must be a string";var i,n,r=this._detectCurrencySymbolType(t);if("local"==r)i="local",n=t.replace(this.lc.getCurrencySymbol(),"");else if("int"==r)i="int",n=t.replace(this.lc.getIntCurrencySymbol(),"");else{if("none"!=r)throw"Parse error: Internal assert failure";i="local",n=t}if(n=e._stringReplaceAll(n,this.lc.mon_thousands_sep,""),n=n.replace(this.lc.mon_decimal_point,"."),n=n.replace(/\s*/g,""),n=this._removeLocalNonNegativeSign(n,i),n=this._normaliseNegativeSign(n,i),e._isNumber(n))return parseFloat(n,10);throw"Parse error: Invalid currency amount string"},this._detectCurrencySymbolType=function(t){return this.lc.getCurrencySymbol().length>this.lc.getIntCurrencySymbol().length?-1!=t.indexOf(this.lc.getCurrencySymbol())?"local":-1!=t.indexOf(this.lc.getIntCurrencySymbol())?"int":"none":-1!=t.indexOf(this.lc.getIntCurrencySymbol())?"int":-1!=t.indexOf(this.lc.getCurrencySymbol())?"local":"none"},this._removeLocalNonNegativeSign=function(t,e){return t=t.replace(this.lc.positive_sign,""),("local"==e&&0===this.lc.p_sign_posn||"int"==e&&0===this.lc.int_p_sign_posn)&&/\(\d+\.?\d*\)/.test(t)&&(t=t.replace("(",""),t=t.replace(")","")),t},this._normaliseNegativeSign=function(t,e){return t=t.replace(this.lc.negative_sign,"-"),("local"==e&&0===this.lc.n_sign_posn||"int"==e&&0===this.lc.int_n_sign_posn)&&/^\(\d+\.?\d*\)$/.test(t)?(t=t.replace("(",""),t=t.replace(")",""),"-"+t):("local"==e&&2==this.lc.n_sign_posn||"int"==e&&2==this.lc.int_n_sign_posn)&&/^\d+\.?\d*-$/.test(t)?(t=t.replace("-",""),"-"+t):("local"==e&&0===this.lc.n_cs_precedes&&3==this.lc.n_sign_posn||"local"==e&&0===this.lc.n_cs_precedes&&4==this.lc.n_sign_posn||"int"==e&&0===this.lc.int_n_cs_precedes&&3==this.lc.int_n_sign_posn||"int"==e&&0===this.lc.int_n_cs_precedes&&4==this.lc.int_n_sign_posn)&&/^\d+\.?\d*-$/.test(t)?(t=t.replace("-",""),"-"+t):t}},t.exports=e},{}],2:[function(require,t,exports){t.exports={decimal_point:".",thousands_sep:",",grouping:"3",abday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abmon:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mon:["January","February","March","April","May","June","July","August","September","October","November","December"],d_fmt:"%m/%e/%y",t_fmt:"%I:%M:%S %p",d_t_fmt:"%B %e, %Y %I:%M:%S %p %Z",am_pm:["AM","PM"],int_curr_symbol:"USD ",currency_symbol:"$",mon_decimal_point:".",mon_thousands_sep:",",mon_grouping:"3",positive_sign:"",negative_sign:"-",int_frac_digits:2,frac_digits:2,p_cs_precedes:1,n_cs_precedes:1,p_sep_by_space:0,n_sep_by_space:0,p_sign_posn:1,n_sign_posn:1,int_p_cs_precedes:1,int_n_cs_precedes:1,int_p_sep_by_space:0,int_n_sep_by_space:0,int_p_sign_posn:1,int_n_sign_posn:1,suffixes:[{str:"K",div:1e3,start:1e4},{str:"M",div:1e6},{str:"B",div:1e9},{str:"T",div:1e12}]}},{}],3:[function(require,t,exports){t.exports={round:function(t,e){return e=e||1,e>1?Math.round(t/e)*e:(e=1/e,Math.round(t*e)/e)},clamp:function(t,e,i){return Math.max(Math.min(e,i),t)}}},{}],4:[function(require,t,exports){!function(){"use strict";function e(){for(var t="",i=0;i<arguments.length;i++){var n=arguments[i];if(n){var r=typeof n;if("string"===r||"number"===r)t+=" "+n;else if(Array.isArray(n))t+=" "+e.apply(null,n);else if("object"===r)for(var s in n)n.hasOwnProperty(s)&&n[s]&&(t+=" "+s)}}return t.substr(1)}"undefined"!=typeof t&&t.exports?t.exports=e:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):window.classNames=e}()},{}],5:[function(require,t,exports){!function(){"use strict";function e(){var t,e,i;for(e=0;256>e;e+=1){for(t=e,i=0;8>i;i+=1)1&t?t=o^t>>>1:t>>>=1;s[e]=t>>>0}}function i(t){return Array.prototype.map.call(t,function(t){return t.charCodeAt(0)})}function n(t){var e,i,n,r,s=-1;for(e=0,n=t.length;n>e;e+=1){for(r=255&(s^t[e]),i=0;8>i;i+=1)1===(1&r)?r=r>>>1^o:r>>>=1;s=s>>>8^r}return-1^s}function r(t,e){var i,n,o;if("undefined"!=typeof r.crc&&e&&t||(r.crc=-1,t)){for(i=r.crc,n=0,o=t.length;o>n;n+=1)i=i>>>8^s[255&(i^t[n])];return r.crc=i,-1^i}}var s=[],o=3988292384;e(),t.exports=function(t,e){var t="string"==typeof t?i(t):t,s=e?n(t):r(t);return(s>>>0).toString(16)},t.exports.direct=n,t.exports.table=r}()},{}],6:[function(require,t,exports){"use strict";var e,i=require("es5-ext/object/assign"),n=require("es5-ext/object/normalize-options"),r=require("es5-ext/object/is-callable"),s=require("es5-ext/string/#/contains");e=t.exports=function(t,e){var r,o,a,c,l;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],null==t?(r=a=!0,o=!1):(r=s.call(t,"c"),o=s.call(t,"e"),a=s.call(t,"w")),l={value:e,configurable:r,enumerable:o,writable:a},c?i(n(c),l):l},e.gs=function(t,e,o){var a,c,l,h;return"string"!=typeof t?(l=o,o=e,e=t,t=null):l=arguments[3],null==e?e=void 0:r(e)?null==o?o=void 0:r(o)||(l=o,o=void 0):(l=e,e=o=void 0),null==t?(a=!0,c=!1):(a=s.call(t,"c"),c=s.call(t,"e")),h={get:e,set:o,configurable:a,enumerable:c},l?i(n(l),h):h}},{"es5-ext/object/assign":15,"es5-ext/object/is-callable":18,"es5-ext/object/normalize-options":22,"es5-ext/string/#/contains":25}],7:[function(require,t,exports){var e=require("./lib/encode.js"),i=require("./lib/decode.js");exports.decode=function(t,e){return(!e||0>=e?i.XML:i.HTML)(t)},exports.decodeStrict=function(t,e){return(!e||0>=e?i.XML:i.HTMLStrict)(t)},exports.encode=function(t,i){return(!i||0>=i?e.XML:e.HTML)(t)},exports.encodeXML=e.XML,exports.encodeHTML4=exports.encodeHTML5=exports.encodeHTML=e.HTML,exports.decodeXML=exports.decodeXMLStrict=i.XML,exports.decodeHTML4=exports.decodeHTML5=exports.decodeHTML=i.HTML,exports.decodeHTML4Strict=exports.decodeHTML5Strict=exports.decodeHTMLStrict=i.HTMLStrict,exports.escape=e.escape},{"./lib/decode.js":8,"./lib/encode.js":10}],8:[function(require,t,exports){function e(t){var e=Object.keys(t).join("|"),i=n(t);e+="|#[xX][\\da-fA-F]+|#\\d+";var r=new RegExp("&(?:"+e+");","g");return function(t){return String(t).replace(r,i)}}function i(t,e){return e>t?1:-1}function n(t){return function(e){return"#"===e.charAt(1)?a("X"===e.charAt(2)||"x"===e.charAt(2)?parseInt(e.substr(3),16):parseInt(e.substr(2),10)):t[e.slice(1,-1)]}}var r=require("../maps/entities.json"),s=require("../maps/legacy.json"),o=require("../maps/xml.json"),a=require("./decode_codepoint.js"),c=e(o),l=e(r),h=function(){function t(t){return";"!==t.substr(-1)&&(t+=";"),h(t)}for(var e=Object.keys(s).sort(i),o=Object.keys(r).sort(i),a=0,c=0;a<o.length;a++)e[c]===o[a]?(o[a]+=";?",c++):o[a]+=";";var l=new RegExp("&(?:"+o.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),h=n(r);return function(e){return String(e).replace(l,t)}}();t.exports={XML:c,HTML:h,HTMLStrict:l}},{"../maps/entities.json":12,"../maps/legacy.json":13,"../maps/xml.json":14,"./decode_codepoint.js":9}],9:[function(require,t,exports){function e(t){if(t>=55296&&57343>=t||t>1114111)return"�";t in i&&(t=i[t]);var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)}var i=require("../maps/decode.json");t.exports=e},{"../maps/decode.json":11}],10:[function(require,t,exports){function e(t){return Object.keys(t).sort().reduce(function(e,i){return e[t[i]]="&"+i+";",e},{})}function i(t){var e=[],i=[];return Object.keys(t).forEach(function(t){1===t.length?e.push("\\"+t):i.push(t)}),i.unshift("["+e.join("")+"]"),new RegExp(i.join("|"),"g")}function n(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"}function r(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=1024*(e-55296)+i-56320+65536;return"&#x"+n.toString(16).toUpperCase()+";"}function s(t,e){function i(e){return t[e]}return function(t){return t.replace(e,i).replace(u,r).replace(p,n)}}function o(t){return t.replace(d,n).replace(u,r).replace(p,n)}var a=e(require("../maps/xml.json")),c=i(a);exports.XML=s(a,c);var l=e(require("../maps/entities.json")),h=i(l);exports.HTML=s(l,h);var p=/[^\0-\x7F]/g,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=i(a);exports.escape=o},{"../maps/entities.json":12,"../maps/xml.json":14}],11:[function(require,t,exports){t.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,
158:382,159:376}},{}],12:[function(require,t,exports){t.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},{}],13:[function(require,t,exports){t.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}},{}],14:[function(require,t,exports){t.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},{}],15:[function(require,t,exports){"use strict";t.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(require,t,exports){"use strict";t.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],17:[function(require,t,exports){"use strict";var e=require("../keys"),i=require("../valid-value"),n=Math.max;t.exports=function(t,r){var s,o,a,c=n(arguments.length,2);for(t=Object(i(t)),a=function(e){try{t[e]=r[e]}catch(t){s||(s=t)}},o=1;c>o;++o)r=arguments[o],e(r).forEach(a);if(void 0!==s)throw s;return t}},{"../keys":19,"../valid-value":24}],18:[function(require,t,exports){"use strict";t.exports=function(t){return"function"==typeof t}},{}],19:[function(require,t,exports){"use strict";t.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":20,"./shim":21}],20:[function(require,t,exports){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],21:[function(require,t,exports){"use strict";var e=Object.keys;t.exports=function(t){return e(null==t?t:Object(t))}},{}],22:[function(require,t,exports){"use strict";var e=Array.prototype.forEach,i=Object.create,n=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var r=i(null);return e.call(arguments,function(t){null!=t&&n(Object(t),r)}),r}},{}],23:[function(require,t,exports){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],24:[function(require,t,exports){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},{}],25:[function(require,t,exports){"use strict";t.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":26,"./shim":27}],26:[function(require,t,exports){"use strict";var e="razdwatrzy";t.exports=function(){return"function"!=typeof e.contains?!1:e.contains("dwa")===!0&&e.contains("foo")===!1}},{}],27:[function(require,t,exports){"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},{}],28:[function(require,t,exports){"use strict";var e,i,n,r,s,o,a,c=require("d"),l=require("es5-ext/object/valid-callable"),h=Function.prototype.apply,p=Function.prototype.call,u=Object.create,d=Object.defineProperty,f=Object.defineProperties,_=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};e=function(t,e){var i;return l(e),_.call(this,"__ee__")?i=this.__ee__:(i=m.value=u(null),d(this,"__ee__",m),m.value=null),i[t]?"object"==typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},i=function(t,i){var r,s;return l(i),s=this,e.call(this,t,r=function(){n.call(s,t,r),h.call(i,this,arguments)}),r.__eeOnceListener__=i,this},n=function(t,e){var i,n,r,s;if(l(e),!_.call(this,"__ee__"))return this;if(i=this.__ee__,!i[t])return this;if(n=i[t],"object"==typeof n)for(s=0;r=n[s];++s)(r===e||r.__eeOnceListener__===e)&&(2===n.length?i[t]=n[s?0:1]:n.splice(s,1));else(n===e||n.__eeOnceListener__===e)&&delete i[t];return this},r=function(t){var e,i,n,r,s;if(_.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"==typeof r){for(i=arguments.length,s=new Array(i-1),e=1;i>e;++e)s[e-1]=arguments[e];for(r=r.slice(),e=0;n=r[e];++e)h.call(n,this,s)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),e=1;i>e;++e)s[e-1]=arguments[e];h.call(r,this,s)}},s={on:e,once:i,off:n,emit:r},o={on:c(e),once:c(i),off:c(n),emit:c(r)},a=f({},o),t.exports=exports=function(t){return null==t?u(a):f(Object(t),o)},exports.methods=s},{d:6,"es5-ext/object/valid-callable":23}],29:[function(require,t,exports){!function(e,i,n,r){"use strict";function s(t,e,i){return setTimeout(p(t,i),e)}function o(t,e,i){return Array.isArray(t)?(a(t,i[e],i),!0):!1}function a(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function c(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t}function l(t,e){return c(t,e,!0)}function h(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&c(n,i)}function p(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==pt?t.apply(e?e[0]||r:r,e):t}function d(t,e){return t===r?e:t}function f(t,e,i){a(v(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){a(v(e),function(e){t.removeEventListener(e,i,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function w(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];y(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function x(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),o=0;o<lt.length;){if(i=lt[o],n=i?i+s:e,n in t)return n;o++}return r}function S(){return _t++}function T(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function A(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&i.handler(e)},this.init()}function R(t){var e,i=t.options.inputClass;return new(e=i?i:vt?j:yt?B:gt?H:z)(t,I)}function I(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&At&&n-r===0,o=e&(It|Et)&&n-r===0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),
i.eventType=e,E(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function E(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=M(e)),r>1&&!i.firstMultiple?i.firstMultiple=M(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,c=e.center=L(n);e.timeStamp=ft(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=D(a,c),e.distance=N(a,c),C(i,e),e.offsetDirection=O(e.deltaX,e.deltaY),e.scale=o?q(o.pointers,n):1,e.rotation=o?F(o.pointers,n):0,k(i,e);var l=t.element;m(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function C(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};(e.eventType===At||s.eventType===It)&&(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function k(t,e){var i,n,s,o,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(e.eventType!=Et&&(c>Tt||a.velocity===r)){var l=a.deltaX-e.deltaX,h=a.deltaY-e.deltaY,p=P(c,l,h);n=p.x,s=p.y,i=dt(p.x)>dt(p.y)?p.x:p.y,o=O(l,h),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}function M(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:ut(t.pointers[i].clientX),clientY:ut(t.pointers[i].clientY)},i++;return{timeStamp:ft(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:ut(t[0].clientX),y:ut(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:ut(i/e),y:ut(n/e)}}function P(t,e,i){return{x:e/t||0,y:i/t||0}}function O(t,e){return t===e?Ct:dt(t)>=dt(e)?t>0?kt:Mt:e>0?Lt:Pt}function N(t,e,i){i||(i=Ft);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function D(t,e,i){i||(i=Ft);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function F(t,e){return D(e[1],e[0],qt)-D(t[1],t[0],qt)}function q(t,e){return N(e[0],e[1],qt)/N(t[0],t[1],qt)}function z(){this.evEl=jt,this.evWin=Vt,this.allow=!0,this.pressed=!1,A.apply(this,arguments)}function j(){this.evEl=Bt,this.evWin=Wt,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Yt,this.evWin=Gt,this.started=!1,A.apply(this,arguments)}function U(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(It|Et)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function B(){this.evTarget=Kt,this.targetIds={},A.apply(this,arguments)}function W(t,e){var i=b(t.touches),n=this.targetIds;if(e&(At|Rt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=b(t.changedTouches),a=[],c=this.target;if(s=i.filter(function(t){return m(t.target,c)}),e===At)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(It|Et)&&delete n[o[r].identifier],r++;return a.length?[w(s.concat(a),"identifier",!0),a]:void 0}function H(){A.apply(this,arguments);var t=p(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new z(this.manager,t)}function Y(t,e){this.manager=t,this.set(e)}function G(t){if(g(t,ie))return ie;var e=g(t,ne),i=g(t,re);return e&&i?ne+" "+re:e||i?e?ne:re:g(t,ee)?ee:te}function X(t){this.id=S(),this.manager=null,this.options=l(t||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=se,this.simultaneous={},this.requireFail=[]}function K(t){return t&he?"cancel":t&ce?"end":t&ae?"move":t&oe?"start":""}function Z(t){return t==Pt?"down":t==Lt?"up":t==kt?"left":t==Mt?"right":""}function J(t,e){var i=e.manager;return i?i.get(t):t}function Q(){X.apply(this,arguments)}function tt(){Q.apply(this,arguments),this.pX=null,this.pY=null}function $(){Q.apply(this,arguments)}function et(){X.apply(this,arguments),this._timer=null,this._input=null}function it(){Q.apply(this,arguments)}function nt(){Q.apply(this,arguments)}function rt(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=d(e.recognizers,st.defaults.preset),new ot(t,e)}function ot(t,e){e=e||{},this.options=l(e,st.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=R(this),this.touchAction=new Y(this,this.options.touchAction),at(this,!0),a(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function at(t,e){var i=t.element;a(t.options.cssProps,function(t,n){i.style[x(i.style,n)]=e?t:""})}function ct(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var lt=["","webkit","moz","MS","ms","o"],ht=i.createElement("div"),pt="function",ut=Math.round,dt=Math.abs,ft=Date.now,_t=1,mt=/mobile|tablet|ip(ad|hone|od)|android/i,gt="ontouchstart"in e,vt=x(e,"PointerEvent")!==r,yt=gt&&mt.test(navigator.userAgent),bt="touch",wt="pen",xt="mouse",St="kinect",Tt=25,At=1,Rt=2,It=4,Et=8,Ct=1,kt=2,Mt=4,Lt=8,Pt=16,Ot=kt|Mt,Nt=Lt|Pt,Dt=Ot|Nt,Ft=["x","y"],qt=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(T(this.element),this.evWin,this.domHandler)}};var zt={mousedown:At,mousemove:Rt,mouseup:It},jt="mousedown",Vt="mousemove mouseup";h(z,A,{handler:function(t){var e=zt[t.type];e&At&&0===t.button&&(this.pressed=!0),e&Rt&&1!==t.which&&(e=It),this.pressed&&this.allow&&(e&It&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:xt,srcEvent:t}))}});var Ut={pointerdown:At,pointermove:Rt,pointerup:It,pointercancel:Et,pointerout:Et},$t={2:bt,3:wt,4:xt,5:St},Bt="pointerdown",Wt="pointermove pointerup pointercancel";e.MSPointerEvent&&(Bt="MSPointerDown",Wt="MSPointerMove MSPointerUp MSPointerCancel"),h(j,A,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Ut[n],s=$t[t.pointerType]||t.pointerType,o=s==bt,a=y(e,t.pointerId,"pointerId");r&At&&(0===t.button||o)?0>a&&(e.push(t),a=e.length-1):r&(It|Et)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var Ht={touchstart:At,touchmove:Rt,touchend:It,touchcancel:Et},Yt="touchstart",Gt="touchstart touchmove touchend touchcancel";h(V,A,{handler:function(t){var e=Ht[t.type];if(e===At&&(this.started=!0),this.started){var i=U.call(this,t,e);e&(It|Et)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}});var Xt={touchstart:At,touchmove:Rt,touchend:It,touchcancel:Et},Kt="touchstart touchmove touchend touchcancel";h(B,A,{handler:function(t){var e=Xt[t.type],i=W.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}),h(H,A,{handler:function(t,e,i){var n=i.pointerType==bt,r=i.pointerType==xt;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(It|Et)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zt=x(ht.style,"touchAction"),Jt=Zt!==r,Qt="compute",te="auto",ee="manipulation",ie="none",ne="pan-x",re="pan-y";Y.prototype={set:function(t){t==Qt&&(t=this.compute()),Jt&&(this.manager.element.style[Zt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),G(t.join(" "))},preventDefaults:function(t){if(!Jt){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=g(n,ie),s=g(n,re),o=g(n,ne);return r||s&&i&Ot||o&&i&Nt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var se=1,oe=2,ae=4,ce=8,le=ce,he=16,pe=32;X.prototype={defaults:{},set:function(t){return c(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=J(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?K(n):""),t)}var i=this,n=this.state;ce>n&&e(!0),e(),n>=ce&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=pe)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(pe|se)))return!1;t++}return!0},recognize:function(t){var e=c({},t);return u(this.options.enable,[this,e])?(this.state&(le|he|pe)&&(this.state=se),this.state=this.process(e),void(this.state&(oe|ae|ce|he)&&this.tryEmit(e))):(this.reset(),void(this.state=pe))},process:function(t){},getTouchAction:function(){},reset:function(){}},h(Q,X,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(oe|ae),r=this.attrTest(t);return n&&(i&Et||!r)?e|he:n||r?i&It?e|ce:e&oe?e|ae:oe:pe}}),h(tt,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:Dt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ot&&e.push(re),t&Nt&&e.push(ne),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Ot?(r=0===s?Ct:0>s?kt:Mt,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?Ct:0>o?Lt:Pt,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Q.prototype.attrTest.call(this,t)&&(this.state&oe||!(this.state&oe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Z(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),h($,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ie]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oe)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),h(et,X,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[te]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(It|Et)&&!r)this.reset();else if(t.eventType&At)this.reset(),this._timer=s(function(){this.state=le,this.tryEmit()},e.time,this);else if(t.eventType&It)return le;return pe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===le&&(t&&t.eventType&It?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),h(it,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ie]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oe)}}),h(nt,Q,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ot|Nt,pointers:1},getTouchAction:function(){return tt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Ot|Nt)?e=t.velocity:i&Ot?e=t.velocityX:i&Nt&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&dt(e)>this.options.velocity&&t.eventType&It},emit:function(t){var e=Z(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(rt,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ee]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&At&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=It)return this.failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var c=this.count%e.taps;if(0===c)return this.hasRequireFailures()?(this._timer=s(function(){this.state=le,this.tryEmit()},e.interval,this),oe):le}return pe},failTimeout:function(){return this._timer=s(function(){this.state=pe},this.options.interval,this),pe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.4",st.defaults={domEvents:!1,touchAction:Qt,enable:!0,inputTarget:null,inputClass:null,preset:[[it,{enable:!1}],[$,{enable:!1},["rotate"]],[nt,{direction:Ot}],[tt,{direction:Ot},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[et]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ue=1,de=2;ot.prototype={set:function(t){return c(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?de:ue},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&le)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],e.stopped===de||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(oe|ae|ce)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof X)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return a(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return a(v(t),function(t){e?i[t].splice(y(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ct(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&at(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(st,{INPUT_START:At,INPUT_MOVE:Rt,INPUT_END:It,INPUT_CANCEL:Et,STATE_POSSIBLE:se,STATE_BEGAN:oe,STATE_CHANGED:ae,STATE_ENDED:ce,STATE_RECOGNIZED:le,STATE_CANCELLED:he,STATE_FAILED:pe,DIRECTION_NONE:Ct,DIRECTION_LEFT:kt,DIRECTION_RIGHT:Mt,DIRECTION_UP:Lt,DIRECTION_DOWN:Pt,DIRECTION_HORIZONTAL:Ot,DIRECTION_VERTICAL:Nt,DIRECTION_ALL:Dt,Manager:ot,Input:A,TouchAction:Y,TouchInput:B,MouseInput:z,PointerEventInput:j,TouchMouseInput:H,SingleTouchInput:V,Recognizer:X,AttrRecognizer:Q,Tap:rt,Pan:tt,Swipe:nt,Pinch:$,Rotate:it,Press:et,on:f,off:_,each:a,merge:l,extend:c,inherit:h,bindFn:p,prefixed:x}),typeof define==pt&&define.amd?define(function(){return st}):"undefined"!=typeof t&&t.exports?t.exports=st:e[n]=st}(window,document,"Hammer")},{}],30:[function(require,t,exports){!function(t){"use strict";var e=Array.prototype.slice,i=function(t){return("0"+t.toString()).substr(-2)},n={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},r={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},s={unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."},o={precision:3,separator:".",delimiter:""},a=[null,"kb","mb","gb","tb"],c={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{}};t.reset=function(){this.defaultLocale=c.defaultLocale,this.locale=c.locale,this.defaultSeparator=c.defaultSeparator,this.placeholder=c.placeholder,this.fallbacks=c.fallbacks,this.translations=c.translations},t.initializeOptions=function(){"undefined"==typeof this.defaultLocale&&null!==this.defaultLocale&&(this.defaultLocale=c.defaultLocale),"undefined"==typeof this.locale&&null!==this.locale&&(this.locale=c.locale),"undefined"==typeof this.defaultSeparator&&null!==this.defaultSeparator&&(this.defaultSeparator=c.defaultSeparator),"undefined"==typeof this.placeholder&&null!==this.placeholder&&(this.placeholder=c.placeholder),"undefined"==typeof this.fallbacks&&null!==this.fallbacks&&(this.fallbacks=c.fallbacks),"undefined"==typeof this.translations&&null!==this.translations&&(this.translations=c.translations)},t.initializeOptions(),t.locales={},t.locales.get=function(e){var i=this[e]||this[t.locale]||this.default;return"function"==typeof i&&(i=i(e)),i instanceof Array==0&&(i=[i]),i},t.locales.default=function(e){var i,n=[],r=[];return e&&n.push(e),!e&&t.locale&&n.push(t.locale),t.fallbacks&&t.defaultLocale&&n.push(t.defaultLocale),n.forEach(function(e){i=e.split("-")[0],~r.indexOf(e)||r.push(e),t.fallbacks&&i&&i!==e&&!~r.indexOf(i)&&r.push(i)}),n.length||n.push("en"),r},t.pluralization={},t.pluralization.get=function(e){return this[e]||this[t.locale]||this.default},t.pluralization.default=function(t){switch(t){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},t.currentLocale=function(){return this.locale||this.defaultLocale},t.isSet=function(t){return void 0!==t&&null!==t},t.lookup=function(t,e){e=this.prepareOptions(e);var i,n,r,s=this.locales.get(e.locale);for(s[0],t.constructor===Array&&(t=t.join(this.defaultSeparator)),e.scope&&(t=[e.scope,t].join(this.defaultSeparator));s.length;)if(i=s.shift(),n=t.split(this.defaultSeparator),r=this.translations[i]){for(;n.length&&(r=r[n.shift()],void 0!==r&&null!==r););if(void 0!==r&&null!==r)return r}return this.isSet(e.defaultValue)?e.defaultValue:void 0},t.meridian=function(){var t=this.lookup("time"),e=this.lookup("date");return t&&t.am&&t.pm?[t.am,t.pm]:e&&e.meridian?e.meridian:n.meridian},t.prepareOptions=function(){for(var t,i=e.call(arguments),n={};i.length;)if(t=i.shift(),"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&(this.isSet(n[r])||(n[r]=t[r]));return n},t.createTranslationOptions=function(t,e){var i=[{scope:t}];return this.isSet(e.defaults)&&(i=i.concat(e.defaults)),this.isSet(e.defaultValue)&&(i.push({message:e.defaultValue}),delete e.defaultValue),i},t.translate=function(t,e){e=this.prepareOptions(e);var i,n=this.createTranslationOptions(t,e),r=n.some(function(t){return this.isSet(t.scope)?i=this.lookup(t.scope,e):this.isSet(t.message)&&(i=t.message),void 0!==i&&null!==i?!0:void 0},this);return r?("string"==typeof i?i=this.interpolate(i,e):i instanceof Object&&this.isSet(e.count)&&(i=this.pluralize(e.count,i,e)),i):this.missingTranslation(t)},t.interpolate=function(t,e){e=this.prepareOptions(e);var i,n,r,s,o=t.match(this.placeholder);if(!o)return t;for(var n;o.length;)i=o.shift(),r=i.replace(this.placeholder,"$1"),n=this.isSet(e[r])?e[r].toString().replace(/\$/gm,"_#$#_"):this.missingPlaceholder(i,t),s=new RegExp(i.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),t=t.replace(s,n);return t.replace("_#$#_","$")},t.pluralize=function(t,e,i){i=this.prepareOptions(i);var n,r,s,o,a;if(n=e instanceof Object?e:this.lookup(e,i),!n)return this.missingTranslation(e);for(r=this.pluralization.get(i.locale),s=r(Math.abs(t));s.length;)if(o=s.shift(),this.isSet(n[o])){a=n[o];break}return i.count=String(t),this.interpolate(a,i)},t.missingTranslation=function(t){var i='[missing "';return i+=this.currentLocale()+".",i+=e.call(arguments).join("."),i+='" translation]'},t.missingPlaceholder=function(t,e){return"[missing "+t+" value]"},t.toNumber=function(t,e){e=this.prepareOptions(e,this.lookup("number.format"),r);var i,n,s=0>t,o=Math.abs(t).toFixed(e.precision).toString(),a=o.split("."),c=[];for(t=a[0],i=a[1];t.length>0;)c.unshift(t.substr(Math.max(0,t.length-3),3)),t=t.substr(0,t.length-3);return n=c.join(e.delimiter),e.strip_insignificant_zeros&&i&&(i=i.replace(/0+$/,"")),e.precision>0&&i&&(n+=e.separator+i),s&&(n="-"+n),n},t.toCurrency=function(t,e){return e=this.prepareOptions(e,this.lookup("number.currency.format"),this.lookup("number.format"),s),t=this.toNumber(t,e),t=e.format.replace("%u",e.unit).replace("%n",t)},t.localize=function(t,e){switch(t){case"currency":return this.toCurrency(e);case"number":return t=this.lookup("number.format"),this.toNumber(e,t);case"percentage":return this.toPercentage(e);default:return t.match(/^(date|time)/)?this.toTime(t,e):e.toString()}},t.parseDate=function(t){var e,i,n;if("object"==typeof t)return t;if(e=t.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var r=1;6>=r;r++)e[r]=parseInt(e[r],10)||0;e[2]-=1,n=e[7]?1e3*("0"+e[7]):null,i=e[8]?new Date(Date.UTC(e[1],e[2],e[3],e[4],e[5],e[6],n)):new Date(e[1],e[2],e[3],e[4],e[5],e[6],n)}else"number"==typeof t?(i=new Date,i.setTime(t)):t.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(i=new Date,i.setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")))):t.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(i=new Date,i.setTime(Date.parse(t))):(i=new Date,i.setTime(Date.parse(t)));return i},t.strftime=function(e,r){var s=this.lookup("date"),o=t.meridian();s||(s={}),s=this.prepareOptions(s,n);var a=e.getDay(),c=e.getDate(),l=e.getFullYear(),h=e.getMonth()+1,p=e.getHours(),u=p,d=p>11?1:0,f=e.getSeconds(),_=e.getMinutes(),m=e.getTimezoneOffset(),g=Math.floor(Math.abs(m/60)),v=Math.abs(m)-60*g,y=(m>0?"-":"+")+(g.toString().length<2?"0"+g:g)+(v.toString().length<2?"0"+v:v);return u>12?u-=12:0===u&&(u=12),r=r.replace("%a",s.abbr_day_names[a]),r=r.replace("%A",s.day_names[a]),r=r.replace("%b",s.abbr_month_names[h]),r=r.replace("%B",s.month_names[h]),r=r.replace("%d",i(c)),r=r.replace("%e",c),r=r.replace("%-d",c),r=r.replace("%H",i(p)),r=r.replace("%-H",p),r=r.replace("%I",i(u)),r=r.replace("%-I",u),r=r.replace("%m",i(h)),r=r.replace("%-m",h),r=r.replace("%M",i(_)),r=r.replace("%-M",_),r=r.replace("%p",o[d]),r=r.replace("%S",i(f)),r=r.replace("%-S",f),r=r.replace("%w",a),r=r.replace("%y",i(l)),r=r.replace("%-y",i(l).replace(/^0+/,"")),r=r.replace("%Y",l),r=r.replace("%z",y)},t.toTime=function(t,e){var i=this.parseDate(e),n=this.lookup(t);return i.toString().match(/invalid/i)?i.toString():n?this.strftime(i,n):i.toString()},t.toPercentage=function(t,e){return e=this.prepareOptions(e,this.lookup("number.percentage.format"),this.lookup("number.format"),o),t=this.toNumber(t,e),t+"%"},t.toHumanSize=function(t,e){for(var i,n,r=1024,s=t,o=0;s>=r&&4>o;)s/=r,o+=1;return 0===o?(i=this.t("number.human.storage_units.units.byte",{count:s}),n=0):(i=this.t("number.human.storage_units.units."+a[o]),n=s-Math.floor(s)===0?0:1),e=this.prepareOptions(e,{precision:n,format:"%n%u",delimiter:""}),t=this.toNumber(s,e),t=e.format.replace("%u",i).replace("%n",t)},t.t=t.translate,t.l=t.localize,t.p=t.pluralize}("undefined"==typeof exports?this.I18n||(this.I18n={}):exports)},{}],31:[function(require,t,exports){"use strict";var e=function(t){return t&&t.__esModule?t.default:t},i=e(require("./pluralize")),n=e(require("./utils")),r=e(require("./i18nliner")),s=e(require("speakingurl")),o=e(require("crc32")),a={ALLOWED_PLURALIZATION_KEYS:["zero","one","few","many","other"],REQUIRED_PLURALIZATION_KEYS:["one","other"],UNSUPPORTED_EXPRESSION:[],normalizeKey:function(t){return t},normalizeDefault:function(t,e){return t=a.inferPluralizationHash(t,e)},inferPluralizationHash:function(t,e){return"string"==typeof t&&t.match(/^[\w-]+$/)&&e&&"count"in e?{one:"1 "+t,other:"%{count} "+i(t)}:t},isObject:function(t){return"object"==typeof t&&t!==this.UNSUPPORTED_EXPRESSION},validDefault:function(t){var e=this.defaultValue;return t&&("undefined"==typeof e||null===e)||"string"==typeof e||this.isObject(e)},inferKey:function(t,e){return this.validDefault(t)?(t=this.normalizeDefault(t,e),"object"==typeof t&&(t=""+t.other),this.keyify(t)):void 0},keyifyUnderscored:function(t){var e=s(t,{separator:"_",lang:!1}).replace(/[-_]+/g,"_");return e.substring(0,r.config.underscoredKeyLength)},keyifyUnderscoredCrc32:function(t){var e=o(t.length+":"+t).toString(16);return this.keyifyUnderscored(t)+"_"+e},keyify:function(t){switch(r.config.inferredKeyFormat){case"underscored":return this.keyifyUnderscored(t);case"underscored_crc32":return this.keyifyUnderscoredCrc32(t);default:return t}},keyPattern:/^(\w+\.)+\w+$/,isKeyProvided:function(t,e,i){return"object"==typeof t?!1:"string"==typeof e?!0:i?!0:"string"==typeof t&&t.match(a.keyPattern)?!0:!1},isPluralizationHash:function(t){var e;return this.isObject(t)&&(e=n.keys(t))&&e.length>0&&0===n.difference(e,this.ALLOWED_PLURALIZATION_KEYS).length},inferArguments:function(t,e){if(2===t.length&&"object"==typeof t[1]&&t[1].defaultValue)return t;var i=this.isKeyProvided.apply(this,t);e&&(e.inferredKey=!i),i||t.unshift(null);var n=null,r=t[1];(t[2]||"string"==typeof r||this.isPluralizationHash(r))&&(n=t.splice(1,1)[0]),1===t.length&&t.push({});var s=t[1];return n&&(s.defaultValue=n),i||(t[0]=this.inferKey(n,s)),t},applyWrappers:function(t,e){var i,r,s;if("string"==typeof e&&(e=[e]),e instanceof Array)for(i=e.length;i;i--)t=this.applyWrapper(t,new Array(i+1).join("*"),e[i-1]);else for(s=n.keys(e),s.sort(function(t,e){return e.length-t.length}),i=0,r=s.length;r>i;i++)t=this.applyWrapper(t,s[i],e[s[i]]);return t},applyWrapper:function(t,e,i){var r=n.regexpEscape(e),s=new RegExp(r+"(.*?)"+r,"g");return t.replace(s,i)}};t.exports=a},{"./i18nliner":33,"./pluralize":34,"./utils":35,crc32:5,speakingurl:42}],32:[function(require,t,exports){"use strict";var e=function(t){return t&&t.__esModule?t.default:t},i=e(require("../call_helpers")),n=e(require("../utils")),r=function(t){var e=n.htmlEscape;t.interpolateWithoutHtmlSafety=t.interpolate,t.interpolate=function(t,r){var s,o,a,c=!1,l=t.match(this.PLACEHOLDER)||[],h=l.length,p=[],u=r.wrappers||r.wrapper;for(u&&(c=!0,t=e(t),t=i.applyWrappers(t,u)),a=0;h>a;a++)s=l[a],o=s.replace(this.PLACEHOLDER,"$1"),p.push(o),o in r&&("h"===s[1]&&(r[o]=new n.HtmlSafeString(r[o])),r[o]instanceof n.HtmlSafeString&&(c=!0));if(c)for(u||(t=e(t)),a=0;h>a;a++)o=p[a],o in r&&(r[o]=e(r[o]));return t=this.interpolateWithoutHtmlSafety(t,r),c?new n.HtmlSafeString(t):t},t.PLACEHOLDER=/(?:\{\{|%h?\{)(.*?)(?:\}\}?)/gm,t.CallHelpers=i,t.Utils=n,t.translateWithoutI18nliner=t.translate,t.translate=function(){var t=i.inferArguments([].slice.call(arguments)),e=t[0],n=t[1];e=i.normalizeKey(e,n);var r=n.defaultValue;return r&&(n.defaultValue=i.normalizeDefault(r,n)),this.translateWithoutI18nliner(e,n)},t.t=t.translate};t.exports=r},{"../call_helpers":31,"../utils":35}],33:[function(require,t,exports){"use strict";var e,i={ignore:function(){e=e||require("fs");var t=[];return e.existsSync(".i18nignore")&&(t=e.readFileSync(".i18nignore").toString().trim().split(/\r?\n|\r/)),t},set:function(t,e,i){var n=this.config[t];if(this.config[t]=e,i)try{i()}finally{this.config[t]=n}},loadConfig:function(){if(e=e||require("fs"),e.existsSync(".i18nrc"))try{var t=JSON.parse(e.readFileSync(".i18nrc").toString());for(var i in t)"plugins"===i?this.loadPlugins(t[i]):this.set(i,t[i])}catch(t){}},loadPlugins:function(t){t.forEach(function(t){require(t)({processors:this.Commands.Check.processors,config:this.config})}.bind(this))},config:{inferredKeyFormat:"underscored_crc32",underscoredKeyLength:50,basePath:".",directories:[]}};t.exports=i},{fs:112}],34:[function(require,t,exports){"use strict";var e=["equipment","information","rice","money","species","series","fish","sheep","jeans"],i=[[/person$/i,"people"],[/man$/i,"men"],[/child$/i,"children"],[/sex$/i,"sexes"],[/move$/i,"moves"],[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"]],n=function(t){if(t=t||"",e.indexOf(t)>=0)return t;for(var n=0,r=i.length;r>n;n++){var $=i[n];if(t.match($[0]))return t.replace($[0],$[1])}return t+"s"};n.withCount=function(t,e){return""+t+" "+(1===t?e:n(e))},t.exports=n},{}],35:[function(require,t,exports){"use strict";function e(t){this.string="string"==typeof t?t:""+t}var i={"'":"&#39;","&":"&amp;",'"':"&quot;",">":"&gt;","<":"&lt;"};e.prototype.toString=function(){return this.string};var n={HtmlSafeString:e,difference:function(t,e){for(var i=[],n=0,r=t.length;r>n;n++)-1===e.indexOf(t[n])&&i.push(t[n]);return i},keys:function(t){var e=function(e){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),htmlEscape:function(t){return"undefined"==typeof t||null===t?"":t instanceof n.HtmlSafeString?t.toString():String(t).replace(/[&<>"']/g,function(t){return i[t]})},regexpEscape:function(t){return"undefined"==typeof t||null===t?"":String(t).replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},extend:function(){for(var t=[].slice.call(arguments),e=t.shift(),i=0,n=t.length;n>i;i++){var r=t[i];for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])}}};t.exports=n},{}],36:[function(require,t,exports){(function(e){(function(){function i(t,e){if(t!==e){var i=null===t,n=t===T,r=t===t,s=null===e,o=e===T,a=e===e;if(t>e&&!s||!r||i&&!o&&a||n&&a)return 1;if(e>t&&!i||!a||s&&!n&&r||o&&r)return-1}return 0}function n(t,e,i){for(var n=t.length,r=i?n:-1;i?r--:++r<n;)if(e(t[r],r,t))return r;return-1}function r(t,e,i){if(e!==e)return _(t,i);for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function s(t){return"function"==typeof t||!1}function o(t){return null==t?"":t+""}function a(t,e){for(var i=-1,n=t.length;++i<n&&e.indexOf(t.charAt(i))>-1;);return i}function c(t,e){for(var i=t.length;i--&&e.indexOf(t.charAt(i))>-1;);return i}function l(t,e){return i(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var r=-1,s=t.criteria,o=e.criteria,a=s.length,c=n.length;++r<a;){var l=i(s[r],o[r]);if(l){if(r>=c)return l;var h=n[r];return l*("asc"===h||h===!0?1:-1)}}return t.index-e.index}function p(t){return $t[t]}function u(t){return Bt[t]}function d(t,e,i){return e?t=Yt[t]:i&&(t=Gt[t]),"\\"+t}function f(t){return"\\"+Gt[t]}function _(t,e,i){for(var n=t.length,r=e+(i?0:-1);i?r--:++r<n;){var s=t[r];if(s!==s)return r}return-1}function m(t){return!!t&&"object"==typeof t}function g(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function v(t,e){for(var i=-1,n=t.length,r=-1,s=[];++i<n;)t[i]===e&&(t[i]=U,s[++r]=i);
return s}function y(t,e){for(var i,n=-1,r=t.length,s=-1,o=[];++n<r;){var a=t[n],c=e?e(a,n,t):a;n&&i===c||(i=c,o[++s]=a)}return o}function b(t){for(var e=-1,i=t.length;++e<i&&g(t.charCodeAt(e)););return e}function w(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function x(t){return Wt[t]}function S(t){function e(t){if(m(t)&&!Ca(t)&&!(t instanceof tt)){if(t instanceof K)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return dn(t)}return new K(t)}function g(){}function K(t,e,i){this.__wrapped__=t,this.__actions__=i||[],this.__chain__=!!e}function tt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Eo,this.__views__=[]}function it(){var t=new tt(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function $t(){if(this.__filtered__){var t=new tt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Bt(){var t=this.__wrapped__.value(),e=this.__dir__,i=Ca(t),n=0>e,r=i?t.length:0,s=Wi(0,r,this.__views__),o=s.start,a=s.end,c=a-o,l=n?a:o-1,h=this.__iteratees__,p=h.length,u=0,d=So(c,this.__takeCount__);if(!i||q>r||r==c&&d==c)return ii(n&&i?t.reverse():t,this.__actions__);var f=[];t:for(;c--&&d>u;){l+=e;for(var _=-1,m=t[l];++_<p;){var g=h[_],v=g.iteratee,y=g.type,b=v(m);if(y==j)m=b;else if(!b){if(y==z)continue t;break t}}f[u++]=m}return f}function Wt(){this.__data__={}}function Ht(t){return this.has(t)&&delete this.__data__[t]}function Yt(t){return"__proto__"==t?T:this.__data__[t]}function Gt(t){return"__proto__"!=t&&to.call(this.__data__,t)}function Xt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Kt(t){var e=t?t.length:0;for(this.data={hash:go(null),set:new ho};e--;)this.push(t[e])}function Zt(t,e){var i=t.data,n="string"==typeof e||Or(e)?i.set.has(e):i.hash[e];return n?0:-1}function Jt(t){var e=this.data;"string"==typeof t||Or(t)?e.set.add(t):e.hash[t]=!0}function Qt(t,e){for(var i=-1,n=t.length,r=-1,s=e.length,o=js(n+s);++i<n;)o[i]=t[i];for(;++r<s;)o[i++]=e[r];return o}function te(t,e){var i=-1,n=t.length;for(e||(e=js(n));++i<n;)e[i]=t[i];return e}function ne(t,e){for(var i=-1,n=t.length;++i<n&&e(t[i],i,t)!==!1;);return t}function re(t,e){for(var i=t.length;i--&&e(t[i],i,t)!==!1;);return t}function se(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function oe(t,e,i,n){for(var r=-1,s=t.length,o=n,a=o;++r<s;){var c=t[r],l=+e(c);i(l,o)&&(o=l,a=c)}return a}function ae(t,e){for(var i=-1,n=t.length,r=-1,s=[];++i<n;){var o=t[i];e(o,i,t)&&(s[++r]=o)}return s}function ce(t,e){for(var i=-1,n=t.length,r=js(n);++i<n;)r[i]=e(t[i],i,t);return r}function le(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function he(t,e,i,n){var r=-1,s=t.length;for(n&&s&&(i=t[++r]);++r<s;)i=e(i,t[r],r,t);return i}function pe(t,e,i,n){var r=t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function ue(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function de(t,e){for(var i=t.length,n=0;i--;)n+=+e(t[i])||0;return n}function fe(t,e){return t===T?e:t}function _e(t,e,i,n){return t!==T&&to.call(n,i)?t:e}function me(t,e,i){for(var n=-1,r=ja(e),s=r.length;++n<s;){var o=r[n],a=t[o],c=i(a,e[o],o,t,e);(c===c?c===a:a!==a)&&(a!==T||o in t)||(t[o]=c)}return t}function ge(t,e){return null==e?t:ye(e,ja(e),t)}function ve(t,e){for(var i=-1,n=null==t,r=!n&&Ki(t),s=r?t.length:0,o=e.length,a=js(o);++i<o;){var c=e[i];r?a[i]=Zi(c,s)?t[c]:T:a[i]=n?T:t[c]}return a}function ye(t,e,i){i||(i={});for(var n=-1,r=e.length;++n<r;){var s=e[n];i[s]=t[s]}return i}function be(t,e,i){var n=typeof t;return"function"==n?e===T?t:si(t,e,i):null==t?Is:"object"==n?ze(t):e===T?Ps(t):je(t,e)}function we(t,e,i,n,r,s,o){var a;if(i&&(a=r?i(t,n,r):i(t)),a!==T)return a;if(!Or(t))return t;var c=Ca(t);if(c){if(a=Hi(t),!e)return te(t,a)}else{var l=io.call(t),h=l==X;if(l!=J&&l!=B&&(!h||r))return Ut[l]?Gi(t,l,e):r?t:{};if(a=Yi(h?{}:t),!e)return ge(a,t)}s||(s=[]),o||(o=[]);for(var p=s.length;p--;)if(s[p]==t)return o[p];return s.push(t),o.push(a),(c?ne:Me)(t,function(n,r){a[r]=we(n,e,i,r,t,s,o)}),a}function xe(t,e,i){if("function"!=typeof t)throw new Xs(V);return po(function(){t.apply(T,i)},e)}function Se(t,e){var i=t?t.length:0,n=[];if(!i)return n;var s=-1,o=Ui(),a=o==r,c=a&&e.length>=q?fi(e):null,l=e.length;c&&(o=Zt,a=!1,e=c);t:for(;++s<i;){var h=t[s];if(a&&h===h){for(var p=l;p--;)if(e[p]===h)continue t;n.push(h)}else o(e,h,0)<0&&n.push(h)}return n}function Te(t,e){var i=!0;return Do(t,function(t,n,r){return i=!!e(t,n,r)}),i}function Ae(t,e,i,n){var r=n,s=r;return Do(t,function(t,o,a){var c=+e(t,o,a);(i(c,r)||c===n&&c===s)&&(r=c,s=t)}),s}function Re(t,e,i,n){var r=t.length;for(i=null==i?0:+i||0,0>i&&(i=-i>r?0:r+i),n=n===T||n>r?r:+n||0,0>n&&(n+=r),r=i>n?0:n>>>0,i>>>=0;r>i;)t[i++]=e;return t}function Ie(t,e){var i=[];return Do(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function Ee(t,e,i,n){var r;return i(t,function(t,i,s){return e(t,i,s)?(r=n?i:t,!1):void 0}),r}function Ce(t,e,i,n){n||(n=[]);for(var r=-1,s=t.length;++r<s;){var o=t[r];m(o)&&Ki(o)&&(i||Ca(o)||Ar(o))?e?Ce(o,e,i,n):le(n,o):i||(n[n.length]=o)}return n}function ke(t,e){return qo(t,e,ts)}function Me(t,e){return qo(t,e,ja)}function Le(t,e){return zo(t,e,ja)}function Pe(t,e){for(var i=-1,n=e.length,r=-1,s=[];++i<n;){var o=e[i];Pr(t[o])&&(s[++r]=o)}return s}function Oe(t,e,i){if(null!=t){i!==T&&i in pn(t)&&(e=[i]);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:T}}function Ne(t,e,i,n,r,s){return t===e?!0:null==t||null==e||!Or(t)&&!m(e)?t!==t&&e!==e:De(t,e,Ne,i,n,r,s)}function De(t,e,i,n,r,s,o){var a=Ca(t),c=Ca(e),l=W,h=W;a||(l=io.call(t),l==B?l=J:l!=J&&(a=$r(t))),c||(h=io.call(e),h==B?h=J:h!=J&&(c=$r(e)));var p=l==J,u=h==J,d=l==h;if(d&&!a&&!p)return qi(t,e,l);if(!r){var f=p&&to.call(t,"__wrapped__"),_=u&&to.call(e,"__wrapped__");if(f||_)return i(f?t.value():t,_?e.value():e,n,r,s,o)}if(!d)return!1;s||(s=[]),o||(o=[]);for(var m=s.length;m--;)if(s[m]==t)return o[m]==e;s.push(t),o.push(e);var g=(a?Fi:zi)(t,e,i,n,r,s,o);return s.pop(),o.pop(),g}function Fe(t,e,i){var n=e.length,r=n,s=!i;if(null==t)return!r;for(t=pn(t);n--;){var o=e[n];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<r;){o=e[n];var a=o[0],c=t[a],l=o[1];if(s&&o[2]){if(c===T&&!(a in t))return!1}else{var h=i?i(c,l,a):T;if(!(h===T?Ne(l,c,i,!0):h))return!1}}return!0}function qe(t,e){var i=-1,n=Ki(t)?js(t.length):[];return Do(t,function(t,r,s){n[++i]=e(t,r,s)}),n}function ze(t){var e=$i(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[i]===n&&(n!==T||i in pn(t))}}return function(t){return Fe(t,e)}}function je(t,e){var i=Ca(t),n=Qi(t)&&nn(e),r=t+"";return t=un(t),function(s){if(null==s)return!1;var o=r;if(s=pn(s),(i||!n)&&!(o in s)){if(s=1==t.length?s:Oe(s,Ge(t,0,-1)),null==s)return!1;o=Rn(t),s=pn(s)}return s[o]===e?e!==T||o in s:Ne(e,s[o],T,!0)}}function Ve(t,e,i,n,r){if(!Or(t))return t;var s=Ki(e)&&(Ca(e)||$r(e)),o=s?T:ja(e);return ne(o||e,function(a,c){if(o&&(c=a,a=e[c]),m(a))n||(n=[]),r||(r=[]),Ue(t,e,c,Ve,i,n,r);else{var l=t[c],h=i?i(l,a,c,t,e):T,p=h===T;p&&(h=a),h===T&&(!s||c in t)||!p&&(h===h?h===l:l!==l)||(t[c]=h)}}),t}function Ue(t,e,i,n,r,s,o){for(var a=s.length,c=e[i];a--;)if(s[a]==c)return void(t[i]=o[a]);var l=t[i],h=r?r(l,c,i,t,e):T,p=h===T;p&&(h=c,Ki(c)&&(Ca(c)||$r(c))?h=Ca(l)?l:Ki(l)?te(l):[]:jr(c)||Ar(c)?h=Ar(l)?Gr(l):jr(l)?l:{}:p=!1),s.push(c),o.push(h),p?t[i]=n(h,c,r,s,o):(h===h?h!==l:l===l)&&(t[i]=h)}function $e(t){return function(e){return null==e?T:e[t]}}function Be(t){var e=t+"";return t=un(t),function(i){return Oe(i,t,e)}}function We(t,e){for(var i=t?e.length:0;i--;){var n=e[i];if(n!=r&&Zi(n)){var r=n;uo.call(t,n,1)}}return t}function He(t,e){return t+vo(Ro()*(e-t+1))}function Ye(t,e,i,n,r){return r(t,function(t,r,s){i=n?(n=!1,t):e(i,t,r,s)}),i}function Ge(t,e,i){var n=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),i=i===T||i>r?r:+i||0,0>i&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var s=js(r);++n<r;)s[n]=t[n+e];return s}function Xe(t,e){var i;return Do(t,function(t,n,r){return i=e(t,n,r),!i}),!!i}function Ke(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Ze(t,e,i){var n=ji(),r=-1;e=ce(e,function(t){return n(t)});var s=qe(t,function(t){var i=ce(e,function(e){return e(t)});return{criteria:i,index:++r,value:t}});return Ke(s,function(t,e){return h(t,e,i)})}function Je(t,e){var i=0;return Do(t,function(t,n,r){i+=+e(t,n,r)||0}),i}function Qe(t,e){var i=-1,n=Ui(),s=t.length,o=n==r,a=o&&s>=q,c=a?fi():null,l=[];c?(n=Zt,o=!1):(a=!1,c=e?[]:l);t:for(;++i<s;){var h=t[i],p=e?e(h,i,t):h;if(o&&h===h){for(var u=c.length;u--;)if(c[u]===p)continue t;e&&c.push(p),l.push(h)}else n(c,p,0)<0&&((e||a)&&c.push(p),l.push(h))}return l}function ti(t,e){for(var i=-1,n=e.length,r=js(n);++i<n;)r[i]=t[e[i]];return r}function ei(t,e,i,n){for(var r=t.length,s=n?r:-1;(n?s--:++s<r)&&e(t[s],s,t););return i?Ge(t,n?0:s,n?s+1:r):Ge(t,n?s+1:0,n?r:s)}function ii(t,e){var i=t;i instanceof tt&&(i=i.value());for(var n=-1,r=e.length;++n<r;){var s=e[n];i=s.func.apply(s.thisArg,le([i],s.args))}return i}function ni(t,e,i){var n=0,r=t?t.length:n;if("number"==typeof e&&e===e&&Mo>=r){for(;r>n;){var s=n+r>>>1,o=t[s];(i?e>=o:e>o)&&null!==o?n=s+1:r=s}return r}return ri(t,e,Is,i)}function ri(t,e,i,n){e=i(e);for(var r=0,s=t?t.length:0,o=e!==e,a=null===e,c=e===T;s>r;){var l=vo((r+s)/2),h=i(t[l]),p=h!==T,u=h===h;if(o)var d=u||n;else d=a?u&&p&&(n||null!=h):c?u&&(n||p):null==h?!1:n?e>=h:e>h;d?r=l+1:s=l}return So(s,ko)}function si(t,e,i){if("function"!=typeof t)return Is;if(e===T)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)};case 5:return function(i,n,r,s,o){return t.call(e,i,n,r,s,o)}}return function(){return t.apply(e,arguments)}}function oi(t){var e=new so(t.byteLength),i=new fo(e);return i.set(new fo(t)),e}function ai(t,e,i){for(var n=i.length,r=-1,s=xo(t.length-n,0),o=-1,a=e.length,c=js(a+s);++o<a;)c[o]=e[o];for(;++r<n;)c[i[r]]=t[r];for(;s--;)c[o++]=t[r++];return c}function ci(t,e,i){for(var n=-1,r=i.length,s=-1,o=xo(t.length-r,0),a=-1,c=e.length,l=js(o+c);++s<o;)l[s]=t[s];for(var h=s;++a<c;)l[h+a]=e[a];for(;++n<r;)l[h+i[n]]=t[s++];return l}function li(t,e){return function(i,n,r){var s=e?e():{};if(n=ji(n,r,3),Ca(i))for(var o=-1,a=i.length;++o<a;){var c=i[o];t(s,c,n(c,o,i),i)}else Do(i,function(e,i,r){t(s,e,n(e,i,r),r)});return s}}function hi(t){return gr(function(e,i){var n=-1,r=null==e?0:i.length,s=r>2?i[r-2]:T,o=r>2?i[2]:T,a=r>1?i[r-1]:T;for("function"==typeof s?(s=si(s,a,5),r-=2):(s="function"==typeof a?a:T,r-=s?1:0),o&&Ji(i[0],i[1],o)&&(s=3>r?T:s,r=1);++n<r;){var c=i[n];c&&t(e,c,s)}return e})}function pi(t,e){return function(i,n){var r=i?Uo(i):0;if(!en(r))return t(i,n);for(var s=e?r:-1,o=pn(i);(e?s--:++s<r)&&n(o[s],s,o)!==!1;);return i}}function ui(t){return function(e,i,n){for(var r=pn(e),s=n(e),o=s.length,a=t?o:-1;t?a--:++a<o;){var c=s[a];if(i(r[c],c,r)===!1)break}return e}}function di(t,e){function i(){var r=this&&this!==ee&&this instanceof i?n:t;return r.apply(e,arguments)}var n=mi(t);return i}function fi(t){return go&&ho?new Kt(t):null}function _i(t){return function(e){for(var i=-1,n=Ts(hs(e)),r=n.length,s="";++i<r;)s=t(s,n[i],i);return s}}function mi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=No(t.prototype),n=t.apply(i,e);return Or(n)?n:i}}function gi(t){function e(i,n,r){r&&Ji(i,n,r)&&(n=T);var s=Di(i,t,T,T,T,T,T,n);return s.placeholder=e.placeholder,s}return e}function vi(t,e){return gr(function(i){var n=i[0];return null==n?n:(i.push(e),t.apply(T,i))})}function yi(t,e){return function(i,n,r){if(r&&Ji(i,n,r)&&(n=T),n=ji(n,r,3),1==n.length){i=Ca(i)?i:hn(i);var s=oe(i,n,t,e);if(!i.length||s!==e)return s}return Ae(i,n,t,e)}}function bi(t,e){return function(i,r,s){if(r=ji(r,s,3),Ca(i)){var o=n(i,r,e);return o>-1?i[o]:T}return Ee(i,r,t)}}function wi(t){return function(e,i,r){return e&&e.length?(i=ji(i,r,3),n(e,i,t)):-1}}function xi(t){return function(e,i,n){return i=ji(i,n,3),Ee(e,i,t,!0)}}function Si(t){return function(){for(var e,i=arguments.length,n=t?i:-1,r=0,s=js(i);t?n--:++n<i;){var o=s[r++]=arguments[n];if("function"!=typeof o)throw new Xs(V);!e&&K.prototype.thru&&"wrapper"==Vi(o)&&(e=new K([],!0))}for(n=e?-1:i;++n<i;){o=s[n];var a=Vi(o),c="wrapper"==a?Vo(o):T;e=c&&tn(c[0])&&c[1]==(P|C|M|$)&&!c[4].length&&1==c[9]?e[Vi(c[0])].apply(e,c[3]):1==o.length&&tn(o)?e[a]():e.thru(o)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&Ca(n)&&n.length>=q)return e.plant(n).value();for(var r=0,o=i?s[r].apply(this,t):n;++r<i;)o=s[r].call(this,o);return o}}}function Ti(t,e){return function(i,n,r){return"function"==typeof n&&r===T&&Ca(i)?t(i,n):e(i,si(n,r,3))}}function Ai(t){return function(e,i,n){return("function"!=typeof i||n!==T)&&(i=si(i,n,3)),t(e,i,ts)}}function Ri(t){return function(e,i,n){return("function"!=typeof i||n!==T)&&(i=si(i,n,3)),t(e,i)}}function Ii(t){return function(e,i,n){var r={};return i=ji(i,n,3),Me(e,function(e,n,s){var o=i(e,n,s);n=t?o:n,e=t?e:o,r[n]=e}),r}}function Ei(t){return function(e,i,n){return e=o(e),(t?e:"")+Li(e,i,n)+(t?"":e)}}function Ci(t){var e=gr(function(i,n){var r=v(n,e.placeholder);return Di(i,t,T,n,r)});return e}function ki(t,e){return function(i,n,r,s){var o=arguments.length<3;return"function"==typeof n&&s===T&&Ca(i)?t(i,n,r,o):Ye(i,ji(n,s,4),r,o,e)}}function Mi(t,e,i,n,r,s,o,a,c,l){function h(){for(var y=arguments.length,b=y,w=js(y);b--;)w[b]=arguments[b];if(n&&(w=ai(w,n,r)),s&&(w=ci(w,s,o)),f||m){var x=h.placeholder,S=v(w,x);if(y-=S.length,l>y){var A=a?te(a):T,E=xo(l-y,0),C=f?S:T,$=f?T:S,k=f?w:T,P=f?T:w;e|=f?M:L,e&=~(f?L:M),_||(e&=~(R|I));var O=[t,e,i,k,C,P,$,A,c,E],N=Mi.apply(T,O);return tn(t)&&$o(N,O),N.placeholder=x,N}}var D=u?i:this,F=d?D[t]:t;return a&&(w=cn(w,a)),p&&c<w.length&&(w.length=c),this&&this!==ee&&this instanceof h&&(F=g||mi(t)),F.apply(D,w)}var p=e&P,u=e&R,d=e&I,f=e&C,_=e&E,m=e&k,g=d?T:mi(t);return h}function Li(t,e,i){var n=t.length;if(e=+e,n>=e||!bo(e))return"";var r=e-n;return i=null==i?" ":i+"",ms(i,mo(r/i.length)).slice(0,r)}function Pi(t,e,i,n){function r(){for(var e=-1,a=arguments.length,c=-1,l=n.length,h=js(l+a);++c<l;)h[c]=n[c];for(;a--;)h[c++]=arguments[++e];var p=this&&this!==ee&&this instanceof r?o:t;return p.apply(s?i:this,h)}var s=e&R,o=mi(t);return r}function Oi(t){var e=Bs[t];return function(t,i){return i=i===T?0:+i||0,i?(i=co(10,i),e(t*i)/i):e(t)}}function Ni(t){return function(e,i,n,r){var s=ji(n);return null==n&&s===be?ni(e,i,t):ri(e,i,s(n,r,1),t)}}function Di(t,e,i,n,r,s,o,a){var c=e&I;if(!c&&"function"!=typeof t)throw new Xs(V);var l=n?n.length:0;if(l||(e&=~(M|L),n=r=T),l-=r?r.length:0,e&L){var h=n,p=r;n=r=T}var u=c?T:Vo(t),d=[t,e,i,n,r,h,p,s,o,a];if(u&&(rn(d,u),e=d[1],a=d[9]),d[9]=null==a?c?0:t.length:xo(a-l,0)||0,e==R)var f=di(d[0],d[2]);else f=e!=M&&e!=(R|M)||d[4].length?Mi.apply(T,d):Pi.apply(T,d);var _=u?jo:$o;return _(f,d)}function Fi(t,e,i,n,r,s,o){var a=-1,c=t.length,l=e.length;if(c!=l&&!(r&&l>c))return!1;for(;++a<c;){var h=t[a],p=e[a],u=n?n(r?p:h,r?h:p,a):T;if(u!==T){if(u)continue;return!1}if(r){if(!ue(e,function(t){return h===t||i(h,t,n,r,s,o)}))return!1}else if(h!==p&&!i(h,p,n,r,s,o))return!1}return!0}function qi(t,e,i){switch(i){case H:case Y:return+t==+e;case G:return t.name==e.name&&t.message==e.message;case Z:return t!=+t?e!=+e:t==+e;case Q:case et:return t==e+""}return!1}function zi(t,e,i,n,r,s,o){var a=ja(t),c=a.length,l=ja(e),h=l.length;if(c!=h&&!r)return!1;for(var p=c;p--;){var u=a[p];if(!(r?u in e:to.call(e,u)))return!1}for(var d=r;++p<c;){u=a[p];var f=t[u],_=e[u],m=n?n(r?_:f,r?f:_,u):T;if(!(m===T?i(f,_,n,r,s,o):m))return!1;d||(d="constructor"==u)}if(!d){var g=t.constructor,v=e.constructor;if(g!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v))return!1}return!0}function ji(t,i,n){var r=e.callback||As;return r=r===As?be:r,n?r(t,i,n):r}function Vi(t){for(var e=t.name,i=Oo[e],n=i?i.length:0;n--;){var r=i[n],s=r.func;if(null==s||s==t)return r.name}return e}function Ui(t,i,n){var s=e.indexOf||Tn;return s=s===Tn?r:s,t?s(t,i,n):s}function $i(t){for(var e=es(t),i=e.length;i--;)e[i][2]=nn(e[i][1]);return e}function Bi(t,e){var i=null==t?T:t[e];return Fr(i)?i:T}function Wi(t,e,i){for(var n=-1,r=i.length;++n<r;){var s=i[n],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=So(e,t+o);break;case"takeRight":t=xo(t,e-o)}}return{start:t,end:e}}function Hi(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function Yi(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Hs),new e}function Gi(t,e,i){var n=t.constructor;switch(e){case nt:return oi(t);case H:case Y:return new n(+t);case rt:case st:case ot:case at:case ct:case lt:case ht:case pt:case ut:var r=t.buffer;return new n(i?oi(r):r,t.byteOffset,t.length);case Z:case et:return new n(t);case Q:var s=new n(t.source,Mt.exec(t));s.lastIndex=t.lastIndex}return s}function Xi(t,e,i){null==t||Qi(e,t)||(e=un(e),t=1==e.length?t:Oe(t,Ge(e,0,-1)),e=Rn(e));var n=null==t?t:t[e];return null==n?T:n.apply(t,i)}function Ki(t){return null!=t&&en(Uo(t))}function Zi(t,e){return t="number"==typeof t||Ot.test(t)?+t:-1,e=null==e?Lo:e,t>-1&&t%1==0&&e>t}function Ji(t,e,i){if(!Or(i))return!1;var n=typeof e;if("number"==n?Ki(i)&&Zi(e,i.length):"string"==n&&e in i){var r=i[e];return t===t?t===r:r!==r}return!1}function Qi(t,e){var i=typeof t;if("string"==i&&Tt.test(t)||"number"==i)return!0;if(Ca(t))return!1;var n=!St.test(t);return n||null!=e&&t in pn(e)}function tn(t){var i=Vi(t);if(!(i in tt.prototype))return!1;var n=e[i];if(t===n)return!0;var r=Vo(n);return!!r&&t===r[0]}function en(t){return"number"==typeof t&&t>-1&&t%1==0&&Lo>=t}function nn(t){return t===t&&!Or(t)}function rn(t,e){var i=t[1],n=e[1],r=i|n,s=P>r,o=n==P&&i==C||n==P&&i==$&&t[7].length<=e[8]||n==(P|$)&&i==C;if(!s&&!o)return t;n&R&&(t[2]=e[2],r|=i&R?0:E);var a=e[3];if(a){var c=t[3];t[3]=c?ai(c,a,e[4]):te(a),t[4]=c?v(t[3],U):te(e[4])}return a=e[5],a&&(c=t[5],t[5]=c?ci(c,a,e[6]):te(a),t[6]=c?v(t[5],U):te(e[6])),a=e[7],a&&(t[7]=te(a)),n&P&&(t[8]=null==t[8]?e[8]:So(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function sn(t,e){return t===T?e:ka(t,e,sn)}function on(t,e){t=pn(t);for(var i=-1,n=e.length,r={};++i<n;){var s=e[i];s in t&&(r[s]=t[s])}return r}function an(t,e){var i={};return ke(t,function(t,n,r){e(t,n,r)&&(i[n]=t)}),i}function cn(t,e){for(var i=t.length,n=So(e.length,i),r=te(t);n--;){var s=e[n];t[n]=Zi(s,i)?r[s]:T}return t}function ln(t){for(var e=ts(t),i=e.length,n=i&&t.length,r=!!n&&en(n)&&(Ca(t)||Ar(t)),s=-1,o=[];++s<i;){var a=e[s];(r&&Zi(a,n)||to.call(t,a))&&o.push(a)}return o}function hn(t){return null==t?[]:Ki(t)?Or(t)?t:Hs(t):ss(t)}function pn(t){return Or(t)?t:Hs(t)}function un(t){if(Ca(t))return t;var e=[];return o(t).replace(At,function(t,i,n,r){e.push(n?r.replace(Ct,"$1"):i||t)}),e}function dn(t){return t instanceof tt?t.clone():new K(t.__wrapped__,t.__chain__,te(t.__actions__))}function fn(t,e,i){e=(i?Ji(t,e,i):null==e)?1:xo(vo(e)||1,1);for(var n=0,r=t?t.length:0,s=-1,o=js(mo(r/e));r>n;)o[++s]=Ge(t,n,n+=e);return o}function _n(t){for(var e=-1,i=t?t.length:0,n=-1,r=[];++e<i;){var s=t[e];s&&(r[++n]=s)}return r}function mn(t,e,i){var n=t?t.length:0;return n?((i?Ji(t,e,i):null==e)&&(e=1),Ge(t,0>e?0:e)):[]}function gn(t,e,i){var n=t?t.length:0;return n?((i?Ji(t,e,i):null==e)&&(e=1),e=n-(+e||0),Ge(t,0,0>e?0:e)):[]}function vn(t,e,i){return t&&t.length?ei(t,ji(e,i,3),!0,!0):[]}function yn(t,e,i){return t&&t.length?ei(t,ji(e,i,3),!0):[]}function bn(t,e,i,n){var r=t?t.length:0;return r?(i&&"number"!=typeof i&&Ji(t,e,i)&&(i=0,n=r),Re(t,e,i,n)):[]}function wn(t){return t?t[0]:T}function xn(t,e,i){var n=t?t.length:0;return i&&Ji(t,e,i)&&(e=!1),n?Ce(t,e):[]}function Sn(t){var e=t?t.length:0;return e?Ce(t,!0):[]}function Tn(t,e,i){var n=t?t.length:0;if(!n)return-1;if("number"==typeof i)i=0>i?xo(n+i,0):i;else if(i){var s=ni(t,e);return n>s&&(e===e?e===t[s]:t[s]!==t[s])?s:-1}return r(t,e,i||0)}function An(t){return gn(t,1)}function Rn(t){var e=t?t.length:0;return e?t[e-1]:T}function In(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n;if("number"==typeof i)r=(0>i?xo(n+i,0):So(i||0,n-1))+1;else if(i){r=ni(t,e,!0)-1;var s=t[r];return(e===e?e===s:s!==s)?r:-1}if(e!==e)return _(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function En(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var i=0,n=Ui(),r=t.length;++i<r;)for(var s=0,o=t[i];(s=n(e,o,s))>-1;)uo.call(e,s,1);return e}function Cn(t,e,i){var n=[];if(!t||!t.length)return n;var r=-1,s=[],o=t.length;for(e=ji(e,i,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),s.push(r))}return We(t,s),n}function kn(t){return mn(t,1)}function Mn(t,e,i){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&Ji(t,e,i)&&(e=0,i=n),Ge(t,e,i)):[]}function Ln(t,e,i){var n=t?t.length:0;return n?((i?Ji(t,e,i):null==e)&&(e=1),Ge(t,0,0>e?0:e)):[]}function Pn(t,e,i){var n=t?t.length:0;return n?((i?Ji(t,e,i):null==e)&&(e=1),e=n-(+e||0),Ge(t,0>e?0:e)):[]}function On(t,e,i){return t&&t.length?ei(t,ji(e,i,3),!1,!0):[]}function Nn(t,e,i){return t&&t.length?ei(t,ji(e,i,3)):[]}function Dn(t,e,i,n){var s=t?t.length:0;if(!s)return[];null!=e&&"boolean"!=typeof e&&(n=i,i=Ji(t,e,n)?T:e,e=!1);var o=ji();return(null!=i||o!==be)&&(i=o(i,n,3)),e&&Ui()==r?y(t,i):Qe(t,i)}function Fn(t){if(!t||!t.length)return[];var e=-1,i=0;t=ae(t,function(t){return Ki(t)?(i=xo(t.length,i),!0):void 0});for(var n=js(i);++e<i;)n[e]=ce(t,$e(e));return n}function qn(t,e,i){var n=t?t.length:0;if(!n)return[];var r=Fn(t);return null==e?r:(e=si(e,i,4),ce(r,function(t){return he(t,e,T,!0)}))}function zn(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(Ki(i))var n=n?le(Se(n,i),Se(i,n)):i}return n?Qe(n):[]}function jn(t,e){var i=-1,n=t?t.length:0,r={};for(!n||e||Ca(t[0])||(e=[]);++i<n;){var s=t[i];e?r[s]=e[i]:s&&(r[s[0]]=s[1])}return r}function Vn(t){var i=e(t);return i.__chain__=!0,i}function Un(t,e,i){return e.call(i,t),t}function $n(t,e,i){return e.call(i,t)}function Bn(){return Vn(this)}function Wn(){return new K(this.value(),this.__chain__)}function Hn(t){for(var e,i=this;i instanceof g;){var n=dn(i);e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e}function Yn(){var t=this.__wrapped__,e=function(t){return i&&i.__dir__<0?t:t.reverse()};if(t instanceof tt){var i=t;return this.__actions__.length&&(i=new tt(this)),i=i.reverse(),i.__actions__.push({func:$n,args:[e],thisArg:T}),new K(i,this.__chain__)}return this.thru(e)}function Gn(){return this.value()+""}function Xn(){return ii(this.__wrapped__,this.__actions__)}function Kn(t,e,i){var n=Ca(t)?se:Te;return i&&Ji(t,e,i)&&(e=T),("function"!=typeof e||i!==T)&&(e=ji(e,i,3)),n(t,e)}function Zn(t,e,i){var n=Ca(t)?ae:Ie;return e=ji(e,i,3),n(t,e)}function Jn(t,e){return ra(t,ze(e))}function Qn(t,e,i,n){var r=t?Uo(t):0;return en(r)||(t=ss(t),r=t.length),i="number"!=typeof i||n&&Ji(e,i,n)?0:0>i?xo(r+i,0):i||0,"string"==typeof t||!Ca(t)&&Ur(t)?r>=i&&t.indexOf(e,i)>-1:!!r&&Ui(t,e,i)>-1}function tr(t,e,i){var n=Ca(t)?ce:qe;return e=ji(e,i,3),n(t,e)}function er(t,e){return tr(t,Ps(e))}function ir(t,e,i){var n=Ca(t)?ae:Ie;return e=ji(e,i,3),n(t,function(t,i,n){return!e(t,i,n)})}function nr(t,e,i){if(i?Ji(t,e,i):null==e){t=hn(t);var n=t.length;return n>0?t[He(0,n-1)]:T}var r=-1,s=Yr(t),n=s.length,o=n-1;for(e=So(0>e?0:+e||0,n);++r<e;){var a=He(r,o),c=s[a];s[a]=s[r],s[r]=c}return s.length=e,s}function rr(t){return nr(t,Eo)}function sr(t){var e=t?Uo(t):0;return en(e)?e:ja(t).length}function or(t,e,i){var n=Ca(t)?ue:Xe;return i&&Ji(t,e,i)&&(e=T),("function"!=typeof e||i!==T)&&(e=ji(e,i,3)),n(t,e)}function ar(t,e,i){if(null==t)return[];i&&Ji(t,e,i)&&(e=T);var n=-1;e=ji(e,i,3);var r=qe(t,function(t,i,r){return{criteria:e(t,i,r),index:++n,value:t}});return Ke(r,l)}function cr(t,e,i,n){return null==t?[]:(n&&Ji(e,i,n)&&(i=T),Ca(e)||(e=null==e?[]:[e]),Ca(i)||(i=null==i?[]:[i]),Ze(t,e,i))}function lr(t,e){return Zn(t,ze(e))}function hr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Xs(V);var i=t;t=e,e=i}return t=bo(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function pr(t,e,i){return i&&Ji(t,e,i)&&(e=T),e=t&&null==e?t.length:xo(+e||0,0),Di(t,P,T,T,T,T,e)}function ur(t,e){var i;if("function"!=typeof e){if("function"!=typeof t)throw new Xs(V);var n=t;t=e,e=n}return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=T),i}}function dr(t,e,i){function n(){d&&oo(d),l&&oo(l),_=0,l=d=f=T}function r(e,i){i&&oo(i),l=d=f=T,e&&(_=_a(),h=t.apply(u,c),d||l||(c=u=T))}function s(){var t=e-(_a()-p);0>=t||t>e?r(f,l):d=po(s,t)}function o(){r(g,d)}function a(){if(c=arguments,p=_a(),u=this,f=g&&(d||!v),m===!1)var i=v&&!d;else{l||v||(_=p);var n=m-(p-_),r=0>=n||n>m;r?(l&&(l=oo(l)),_=p,h=t.apply(u,c)):l||(l=po(o,n))}return r&&d?d=oo(d):d||e===m||(d=po(s,e)),i&&(r=!0,h=t.apply(u,c)),!r||d||l||(c=u=T),h}var c,l,h,p,u,d,f,_=0,m=!1,g=!0;if("function"!=typeof t)throw new Xs(V);if(e=0>e?0:+e||0,i===!0){var v=!0;g=!1}else Or(i)&&(v=!!i.leading,m="maxWait"in i&&xo(+i.maxWait||0,e),g="trailing"in i?!!i.trailing:g);return a.cancel=n,a}function fr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Xs(V);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var o=t.apply(this,n);return i.cache=s.set(r,o),o};return i.cache=new fr.Cache,i}function _r(t){if("function"!=typeof t)throw new Xs(V);return function(){return!t.apply(this,arguments)}}function mr(t){return ur(2,t)}function gr(t,e){if("function"!=typeof t)throw new Xs(V);return e=xo(e===T?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,r=xo(i.length-e,0),s=js(r);++n<r;)s[n]=i[e+n];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,i[0],s);case 2:return t.call(this,i[0],i[1],s)}var o=js(e+1);for(n=-1;++n<e;)o[n]=i[n];return o[e]=s,t.apply(this,o)}}function vr(t){if("function"!=typeof t)throw new Xs(V);return function(e){return t.apply(this,e)}}function yr(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Xs(V);return i===!1?n=!1:Or(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),dr(t,e,{leading:n,maxWait:+e,trailing:r})}function br(t,e){return e=null==e?Is:e,Di(e,M,T,[t],[])}function wr(t,e,i,n){return e&&"boolean"!=typeof e&&Ji(t,e,i)?e=!1:"function"==typeof e&&(n=i,i=e,e=!1),"function"==typeof i?we(t,e,si(i,n,1)):we(t,e)}function xr(t,e,i){return"function"==typeof e?we(t,!0,si(e,i,1)):we(t,!0)}function Sr(t,e){return t>e}function Tr(t,e){return t>=e}function Ar(t){return m(t)&&Ki(t)&&to.call(t,"callee")&&!lo.call(t,"callee")}function Rr(t){return t===!0||t===!1||m(t)&&io.call(t)==H}function Ir(t){return m(t)&&io.call(t)==Y}function Er(t){return!!t&&1===t.nodeType&&m(t)&&!jr(t)}function Cr(t){return null==t?!0:Ki(t)&&(Ca(t)||Ur(t)||Ar(t)||m(t)&&Pr(t.splice))?!t.length:!ja(t).length}function kr(t,e,i,n){i="function"==typeof i?si(i,n,3):T;var r=i?i(t,e):T;return r===T?Ne(t,e,i):!!r}function Mr(t){return m(t)&&"string"==typeof t.message&&io.call(t)==G}function Lr(t){return"number"==typeof t&&bo(t)}function Pr(t){return Or(t)&&io.call(t)==X}function Or(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Nr(t,e,i,n){return i="function"==typeof i?si(i,n,3):T,Fe(t,$i(e),i)}function Dr(t){return zr(t)&&t!=+t}function Fr(t){return null==t?!1:Pr(t)?ro.test(Qs.call(t)):m(t)&&Pt.test(t)}function qr(t){return null===t}function zr(t){return"number"==typeof t||m(t)&&io.call(t)==Z}function jr(t){var e;if(!m(t)||io.call(t)!=J||Ar(t)||!to.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var i;return ke(t,function(t,e){i=e}),i===T||to.call(t,i)}function Vr(t){return Or(t)&&io.call(t)==Q}function Ur(t){return"string"==typeof t||m(t)&&io.call(t)==et}function $r(t){return m(t)&&en(t.length)&&!!Vt[io.call(t)]}function Br(t){return t===T}function Wr(t,e){return e>t}function Hr(t,e){return e>=t}function Yr(t){var e=t?Uo(t):0;return en(e)?e?te(t):[]:ss(t)}function Gr(t){return ye(t,ts(t))}function Xr(t,e,i){var n=No(t);return i&&Ji(t,e,i)&&(e=T),e?ge(n,e):n}function Kr(t){return Pe(t,ts(t))}function Zr(t,e,i){var n=null==t?T:Oe(t,un(e),e+"");return n===T?i:n}function Jr(t,e){if(null==t)return!1;var i=to.call(t,e);if(!i&&!Qi(e)){if(e=un(e),t=1==e.length?t:Oe(t,Ge(e,0,-1)),null==t)return!1;e=Rn(e),i=to.call(t,e)}return i||en(t.length)&&Zi(e,t.length)&&(Ca(t)||Ar(t))}function Qr(t,e,i){i&&Ji(t,e,i)&&(e=T);for(var n=-1,r=ja(t),s=r.length,o={};++n<s;){var a=r[n],c=t[a];e?to.call(o,c)?o[c].push(a):o[c]=[a]:o[c]=a}return o}function ts(t){if(null==t)return[];Or(t)||(t=Hs(t));var e=t.length;e=e&&en(e)&&(Ca(t)||Ar(t))&&e||0;for(var i=t.constructor,n=-1,r="function"==typeof i&&i.prototype===t,s=js(e),o=e>0;++n<e;)s[n]=n+"";for(var a in t)o&&Zi(a,e)||"constructor"==a&&(r||!to.call(t,a))||s.push(a);return s}function es(t){t=pn(t);for(var e=-1,i=ja(t),n=i.length,r=js(n);++e<n;){var s=i[e];r[e]=[s,t[s]]}return r}function is(t,e,i){var n=null==t?T:t[e];return n===T&&(null==t||Qi(e,t)||(e=un(e),t=1==e.length?t:Oe(t,Ge(e,0,-1)),n=null==t?T:t[Rn(e)]),n=n===T?i:n),Pr(n)?n.call(t):n}function ns(t,e,i){if(null==t)return t;var n=e+"";e=null!=t[n]||Qi(e,t)?[n]:un(e);for(var r=-1,s=e.length,o=s-1,a=t;null!=a&&++r<s;){var c=e[r];Or(a)&&(r==o?a[c]=i:null==a[c]&&(a[c]=Zi(e[r+1])?[]:{})),a=a[c]}return t}function rs(t,e,i,n){var r=Ca(t)||$r(t);if(e=ji(e,n,4),null==i)if(r||Or(t)){var s=t.constructor;i=r?Ca(t)?new s:[]:No(Pr(s)?s.prototype:T)}else i={};return(r?ne:Me)(t,function(t,n,r){return e(i,t,n,r)}),i}function ss(t){return ti(t,ja(t))}function os(t){return ti(t,ts(t))}function as(t,e,i){return e=+e||0,i===T?(i=e,e=0):i=+i||0,t>=So(e,i)&&t<xo(e,i)}function cs(t,e,i){i&&Ji(t,e,i)&&(e=i=T);var n=null==t,r=null==e;if(null==i&&(r&&"boolean"==typeof t?(i=t,t=1):"boolean"==typeof e&&(i=e,r=!0)),n&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,i||t%1||e%1){var s=Ro();return So(t+s*(e-t+ao("1e-"+((s+"").length-1))),e)}return He(t,e)}function ls(t){return t=o(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function hs(t){return t=o(t),t&&t.replace(Nt,p).replace(Et,"")}function ps(t,e,i){t=o(t),e+="";var n=t.length;return i=i===T?n:So(0>i?0:+i||0,n),i-=e.length,i>=0&&t.indexOf(e,i)==i}function us(t){return t=o(t),t&&yt.test(t)?t.replace(gt,u):t}function ds(t){return t=o(t),t&&It.test(t)?t.replace(Rt,d):t||"(?:)"}function fs(t,e,i){t=o(t),e=+e;var n=t.length;if(n>=e||!bo(e))return t;var r=(e-n)/2,s=vo(r),a=mo(r);return i=Li("",a,i),i.slice(0,s)+t+i}function _s(t,e,i){return(i?Ji(t,e,i):null==e)?e=0:e&&(e=+e),t=ys(t),Ao(t,e||(Lt.test(t)?16:10))}function ms(t,e){var i="";if(t=o(t),e=+e,1>e||!t||!bo(e))return i;do e%2&&(i+=t),e=vo(e/2),t+=t;while(e);return i}function gs(t,e,i){return t=o(t),i=null==i?0:So(0>i?0:+i||0,t.length),t.lastIndexOf(e,i)==i}function vs(t,i,n){var r=e.templateSettings;n&&Ji(t,i,n)&&(i=n=T),t=o(t),i=me(ge({},n||i),r,_e);var s,a,c=me(ge({},i.imports),r.imports,_e),l=ja(c),h=ti(c,l),p=0,u=i.interpolate||Dt,d="__p += '",_=Ys((i.escape||Dt).source+"|"+u.source+"|"+(u===xt?kt:Dt).source+"|"+(i.evaluate||Dt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in i?i.sourceURL:"lodash.templateSources["+ ++jt+"]")+"\n";t.replace(_,function(e,i,n,r,o,c){return n||(n=r),d+=t.slice(p,c).replace(Ft,f),i&&(s=!0,d+="' +\n__e("+i+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),p=c+e.length,e}),d+="';\n";var g=i.variable;g||(d="with (obj) {\n"+d+"\n}\n"),
d=(a?d.replace(dt,""):d).replace(ft,"$1").replace(_t,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Za(function(){return $s(l,m+"return "+d).apply(T,h)});if(v.source=d,Mr(v))throw v;return v}function ys(t,e,i){var n=t;return(t=o(t))?(i?Ji(n,e,i):null==e)?t.slice(b(t),w(t)+1):(e+="",t.slice(a(t,e),c(t,e)+1)):t}function bs(t,e,i){var n=t;return t=o(t),t?(i?Ji(n,e,i):null==e)?t.slice(b(t)):t.slice(a(t,e+"")):t}function ws(t,e,i){var n=t;return t=o(t),t?(i?Ji(n,e,i):null==e)?t.slice(0,w(t)+1):t.slice(0,c(t,e+"")+1):t}function xs(t,e,i){i&&Ji(t,e,i)&&(e=T);var n=O,r=N;if(null!=e)if(Or(e)){var s="separator"in e?e.separator:s;n="length"in e?+e.length||0:n,r="omission"in e?o(e.omission):r}else n=+e||0;if(t=o(t),n>=t.length)return t;var a=n-r.length;if(1>a)return r;var c=t.slice(0,a);if(null==s)return c+r;if(Vr(s)){if(t.slice(a).search(s)){var l,h,p=t.slice(0,a);for(s.global||(s=Ys(s.source,(Mt.exec(s)||"")+"g")),s.lastIndex=0;l=s.exec(p);)h=l.index;c=c.slice(0,null==h?a:h)}}else if(t.indexOf(s,a)!=a){var u=c.lastIndexOf(s);u>-1&&(c=c.slice(0,u))}return c+r}function Ss(t){return t=o(t),t&&vt.test(t)?t.replace(mt,x):t}function Ts(t,e,i){return i&&Ji(t,e,i)&&(e=T),t=o(t),t.match(e||qt)||[]}function As(t,e,i){return i&&Ji(t,e,i)&&(e=T),m(t)?Es(t):be(t,e)}function Rs(t){return function(){return t}}function Is(t){return t}function Es(t){return ze(we(t,!0))}function Cs(t,e){return je(t,we(e,!0))}function ks(t,e,i){if(null==i){var n=Or(e),r=n?ja(e):T,s=r&&r.length?Pe(e,r):T;(s?s.length:n)||(s=!1,i=e,e=t,t=this)}s||(s=Pe(e,ja(e)));var o=!0,a=-1,c=Pr(t),l=s.length;i===!1?o=!1:Or(i)&&"chain"in i&&(o=i.chain);for(;++a<l;){var h=s[a],p=e[h];t[h]=p,c&&(t.prototype[h]=function(e){return function(){var i=this.__chain__;if(o||i){var n=t(this.__wrapped__),r=n.__actions__=te(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),n.__chain__=i,n}return e.apply(t,le([this.value()],arguments))}}(p))}return t}function Ms(){return ee._=no,this}function Ls(){}function Ps(t){return Qi(t)?$e(t):Be(t)}function Os(t){return function(e){return Oe(t,un(e),e+"")}}function Ns(t,e,i){i&&Ji(t,e,i)&&(e=i=T),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,r=xo(mo((e-t)/(i||1)),0),s=js(r);++n<r;)s[n]=t,t+=i;return s}function Ds(t,e,i){if(t=vo(t),1>t||!bo(t))return[];var n=-1,r=js(So(t,Co));for(e=si(e,i,1);++n<t;)Co>n?r[n]=e(n):e(n);return r}function Fs(t){var e=++eo;return o(t)+e}function qs(t,e){return(+t||0)+(+e||0)}function zs(t,e,i){return i&&Ji(t,e,i)&&(e=T),e=ji(e,i,3),1==e.length?de(Ca(t)?t:hn(t),e):Je(t,e)}t=t?ie.defaults(ee.Object(),t,ie.pick(ee,zt)):ee;var js=t.Array,Vs=t.Date,Us=t.Error,$s=t.Function,Bs=t.Math,Ws=t.Number,Hs=t.Object,Ys=t.RegExp,Gs=t.String,Xs=t.TypeError,Ks=js.prototype,Zs=Hs.prototype,Js=Gs.prototype,Qs=$s.prototype.toString,to=Zs.hasOwnProperty,eo=0,io=Zs.toString,no=ee._,ro=Ys("^"+Qs.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),so=t.ArrayBuffer,oo=t.clearTimeout,ao=t.parseFloat,co=Bs.pow,lo=Zs.propertyIsEnumerable,ho=Bi(t,"Set"),po=t.setTimeout,uo=Ks.splice,fo=t.Uint8Array,_o=Bi(t,"WeakMap"),mo=Bs.ceil,go=Bi(Hs,"create"),vo=Bs.floor,yo=Bi(js,"isArray"),bo=t.isFinite,wo=Bi(Hs,"keys"),xo=Bs.max,So=Bs.min,To=Bi(Vs,"now"),Ao=t.parseInt,Ro=Bs.random,Io=Ws.NEGATIVE_INFINITY,Eo=Ws.POSITIVE_INFINITY,Co=4294967295,ko=Co-1,Mo=Co>>>1,Lo=9007199254740991,Po=_o&&new _o,Oo={};e.support={},e.templateSettings={escape:bt,evaluate:wt,interpolate:xt,variable:"",imports:{_:e}};var No=function(){function t(){}return function(e){if(Or(e)){t.prototype=e;var i=new t;t.prototype=T}return i||{}}}(),Do=pi(Me),Fo=pi(Le,!0),qo=ui(),zo=ui(!0),jo=Po?function(t,e){return Po.set(t,e),t}:Is,Vo=Po?function(t){return Po.get(t)}:Ls,Uo=$e("length"),$o=function(){var t=0,e=0;return function(i,n){var r=_a(),s=F-(r-e);if(e=r,s>0){if(++t>=D)return i}else t=0;return jo(i,n)}}(),Bo=gr(function(t,e){return m(t)&&Ki(t)?Se(t,Ce(e,!1,!0)):[]}),Wo=wi(),Ho=wi(!0),Yo=gr(function(t){for(var e=t.length,i=e,n=js(p),s=Ui(),o=s==r,a=[];i--;){var c=t[i]=Ki(c=t[i])?c:[];n[i]=o&&c.length>=120?fi(i&&c):null}var l=t[0],h=-1,p=l?l.length:0,u=n[0];t:for(;++h<p;)if(c=l[h],(u?Zt(u,c):s(a,c,0))<0){for(var i=e;--i;){var d=n[i];if((d?Zt(d,c):s(t[i],c,0))<0)continue t}u&&u.push(c),a.push(c)}return a}),Go=gr(function(t,e){e=Ce(e);var n=ve(t,e);return We(t,e.sort(i)),n}),Xo=Ni(),Ko=Ni(!0),Zo=gr(function(t){return Qe(Ce(t,!1,!0))}),Jo=gr(function(t,e){return Ki(t)?Se(t,e):[]}),Qo=gr(Fn),ta=gr(function(t){var e=t.length,i=e>2?t[e-2]:T,n=e>1?t[e-1]:T;return e>2&&"function"==typeof i?e-=2:(i=e>1&&"function"==typeof n?(--e,n):T,n=T),t.length=e,qn(t,i,n)}),ea=gr(function(t){return t=Ce(t),this.thru(function(e){return Qt(Ca(e)?e:[pn(e)],t)})}),ia=gr(function(t,e){return ve(t,Ce(e))}),na=li(function(t,e,i){to.call(t,i)?++t[i]:t[i]=1}),ra=bi(Do),sa=bi(Fo,!0),oa=Ti(ne,Do),aa=Ti(re,Fo),ca=li(function(t,e,i){to.call(t,i)?t[i].push(e):t[i]=[e]}),la=li(function(t,e,i){t[i]=e}),ha=gr(function(t,e,i){var n=-1,r="function"==typeof e,s=Qi(e),o=Ki(t)?js(t.length):[];return Do(t,function(t){var a=r?e:s&&null!=t?t[e]:T;o[++n]=a?a.apply(t,i):Xi(t,e,i)}),o}),pa=li(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),ua=ki(he,Do),da=ki(pe,Fo),fa=gr(function(t,e){if(null==t)return[];var i=e[2];return i&&Ji(e[0],e[1],i)&&(e.length=1),Ze(t,Ce(e),[])}),_a=To||function(){return(new Vs).getTime()},ma=gr(function(t,e,i){var n=R;if(i.length){var r=v(i,ma.placeholder);n|=M}return Di(t,n,e,i,r)}),ga=gr(function(t,e){e=e.length?Ce(e):Kr(t);for(var i=-1,n=e.length;++i<n;){var r=e[i];t[r]=Di(t[r],R,t)}return t}),va=gr(function(t,e,i){var n=R|I;if(i.length){var r=v(i,va.placeholder);n|=M}return Di(e,n,t,i,r)}),ya=gi(C),ba=gi(k),wa=gr(function(t,e){return xe(t,1,e)}),xa=gr(function(t,e,i){return xe(t,e,i)}),Sa=Si(),Ta=Si(!0),Aa=gr(function(t,e){if(e=Ce(e),"function"!=typeof t||!se(e,s))throw new Xs(V);var i=e.length;return gr(function(n){for(var r=So(n.length,i);r--;)n[r]=e[r](n[r]);return t.apply(this,n)})}),Ra=Ci(M),Ia=Ci(L),Ea=gr(function(t,e){return Di(t,$,T,T,T,Ce(e))}),Ca=yo||function(t){return m(t)&&en(t.length)&&io.call(t)==W},ka=hi(Ve),Ma=hi(function(t,e,i){return i?me(t,e,i):ge(t,e)}),La=vi(Ma,fe),Pa=vi(ka,sn),Oa=xi(Me),Na=xi(Le),Da=Ai(qo),Fa=Ai(zo),qa=Ri(Me),za=Ri(Le),ja=wo?function(t){var e=null==t?T:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Ki(t)?ln(t):Or(t)?wo(t):[]}:ln,Va=Ii(!0),Ua=Ii(),$a=gr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ce(Ce(e),Gs);return on(t,Se(ts(t),e))}var i=si(e[0],e[1],3);return an(t,function(t,e,n){return!i(t,e,n)})}),Ba=gr(function(t,e){return null==t?{}:"function"==typeof e[0]?an(t,si(e[0],e[1],3)):on(t,Ce(e))}),Wa=_i(function(t,e,i){return e=e.toLowerCase(),t+(i?e.charAt(0).toUpperCase()+e.slice(1):e)}),Ha=_i(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),Ya=Ei(),Ga=Ei(!0),Xa=_i(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),Ka=_i(function(t,e,i){return t+(i?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Za=gr(function(t,e){try{return t.apply(T,e)}catch(t){return Mr(t)?t:new Us(t)}}),Ja=gr(function(t,e){return function(i){return Xi(i,t,e)}}),Qa=gr(function(t,e){return function(i){return Xi(t,i,e)}}),tc=Oi("ceil"),ec=Oi("floor"),ic=yi(Sr,Io),nc=yi(Wr,Eo),rc=Oi("round");return e.prototype=g.prototype,K.prototype=No(g.prototype),K.prototype.constructor=K,tt.prototype=No(g.prototype),tt.prototype.constructor=tt,Wt.prototype.delete=Ht,Wt.prototype.get=Yt,Wt.prototype.has=Gt,Wt.prototype.set=Xt,Kt.prototype.push=Jt,fr.Cache=Wt,e.after=hr,e.ary=pr,e.assign=Ma,e.at=ia,e.before=ur,e.bind=ma,e.bindAll=ga,e.bindKey=va,e.callback=As,e.chain=Vn,e.chunk=fn,e.compact=_n,e.constant=Rs,e.countBy=na,e.create=Xr,e.curry=ya,e.curryRight=ba,e.debounce=dr,e.defaults=La,e.defaultsDeep=Pa,e.defer=wa,e.delay=xa,e.difference=Bo,e.drop=mn,e.dropRight=gn,e.dropRightWhile=vn,e.dropWhile=yn,e.fill=bn,e.filter=Zn,e.flatten=xn,e.flattenDeep=Sn,e.flow=Sa,e.flowRight=Ta,e.forEach=oa,e.forEachRight=aa,e.forIn=Da,e.forInRight=Fa,e.forOwn=qa,e.forOwnRight=za,e.functions=Kr,e.groupBy=ca,e.indexBy=la,e.initial=An,e.intersection=Yo,e.invert=Qr,e.invoke=ha,e.keys=ja,e.keysIn=ts,e.map=tr,e.mapKeys=Va,e.mapValues=Ua,e.matches=Es,e.matchesProperty=Cs,e.memoize=fr,e.merge=ka,e.method=Ja,e.methodOf=Qa,e.mixin=ks,e.modArgs=Aa,e.negate=_r,e.omit=$a,e.once=mr,e.pairs=es,e.partial=Ra,e.partialRight=Ia,e.partition=pa,e.pick=Ba,e.pluck=er,e.property=Ps,e.propertyOf=Os,e.pull=En,e.pullAt=Go,e.range=Ns,e.rearg=Ea,e.reject=ir,e.remove=Cn,e.rest=kn,e.restParam=gr,e.set=ns,e.shuffle=rr,e.slice=Mn,e.sortBy=ar,e.sortByAll=fa,e.sortByOrder=cr,e.spread=vr,e.take=Ln,e.takeRight=Pn,e.takeRightWhile=On,e.takeWhile=Nn,e.tap=Un,e.throttle=yr,e.thru=$n,e.times=Ds,e.toArray=Yr,e.toPlainObject=Gr,e.transform=rs,e.union=Zo,e.uniq=Dn,e.unzip=Fn,e.unzipWith=qn,e.values=ss,e.valuesIn=os,e.where=lr,e.without=Jo,e.wrap=br,e.xor=zn,e.zip=Qo,e.zipObject=jn,e.zipWith=ta,e.backflow=Ta,e.collect=tr,e.compose=Ta,e.each=oa,e.eachRight=aa,e.extend=Ma,e.iteratee=As,e.methods=Kr,e.object=jn,e.select=Zn,e.tail=kn,e.unique=Dn,ks(e,e),e.add=qs,e.attempt=Za,e.camelCase=Wa,e.capitalize=ls,e.ceil=tc,e.clone=wr,e.cloneDeep=xr,e.deburr=hs,e.endsWith=ps,e.escape=us,e.escapeRegExp=ds,e.every=Kn,e.find=ra,e.findIndex=Wo,e.findKey=Oa,e.findLast=sa,e.findLastIndex=Ho,e.findLastKey=Na,e.findWhere=Jn,e.first=wn,e.floor=ec,e.get=Zr,e.gt=Sr,e.gte=Tr,e.has=Jr,e.identity=Is,e.includes=Qn,e.indexOf=Tn,e.inRange=as,e.isArguments=Ar,e.isArray=Ca,e.isBoolean=Rr,e.isDate=Ir,e.isElement=Er,e.isEmpty=Cr,e.isEqual=kr,e.isError=Mr,e.isFinite=Lr,e.isFunction=Pr,e.isMatch=Nr,e.isNaN=Dr,e.isNative=Fr,e.isNull=qr,e.isNumber=zr,e.isObject=Or,e.isPlainObject=jr,e.isRegExp=Vr,e.isString=Ur,e.isTypedArray=$r,e.isUndefined=Br,e.kebabCase=Ha,e.last=Rn,e.lastIndexOf=In,e.lt=Wr,e.lte=Hr,e.max=ic,e.min=nc,e.noConflict=Ms,e.noop=Ls,e.now=_a,e.pad=fs,e.padLeft=Ya,e.padRight=Ga,e.parseInt=_s,e.random=cs,e.reduce=ua,e.reduceRight=da,e.repeat=ms,e.result=is,e.round=rc,e.runInContext=S,e.size=sr,e.snakeCase=Xa,e.some=or,e.sortedIndex=Xo,e.sortedLastIndex=Ko,e.startCase=Ka,e.startsWith=gs,e.sum=zs,e.template=vs,e.trim=ys,e.trimLeft=bs,e.trimRight=ws,e.trunc=xs,e.unescape=Ss,e.uniqueId=Fs,e.words=Ts,e.all=Kn,e.any=or,e.contains=Qn,e.eq=kr,e.detect=ra,e.foldl=ua,e.foldr=da,e.head=wn,e.include=Qn,e.inject=ua,ks(e,function(){var t={};return Me(e,function(i,n){e.prototype[n]||(t[n]=i)}),t}(),!1),e.sample=nr,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return nr(e,t)}):nr(this.value())},e.VERSION=A,ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ne(["drop","take"],function(t,e){tt.prototype[t]=function(i){var n=this.__filtered__;if(n&&!e)return new tt(this);i=null==i?1:xo(vo(i)||0,0);var r=this.clone();return n?r.__takeCount__=So(r.__takeCount__,i):r.__views__.push({size:i,type:t+(r.__dir__<0?"Right":"")}),r},tt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ne(["filter","map","takeWhile"],function(t,e){var i=e+1,n=i!=j;tt.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:ji(t,e,1),type:i}),r.__filtered__=r.__filtered__||n,r}}),ne(["first","last"],function(t,e){var i="take"+(e?"Right":"");tt.prototype[t]=function(){return this[i](1).value()[0]}}),ne(["initial","rest"],function(t,e){var i="drop"+(e?"":"Right");tt.prototype[t]=function(){return this.__filtered__?new tt(this):this[i](1)}}),ne(["pluck","where"],function(t,e){var i=e?"filter":"map",n=e?ze:Ps;tt.prototype[t]=function(t){return this[i](n(t))}}),tt.prototype.compact=function(){return this.filter(Is)},tt.prototype.reject=function(t,e){return t=ji(t,e,1),this.filter(function(e){return!t(e)})},tt.prototype.slice=function(t,e){t=null==t?0:+t||0;var i=this;return i.__filtered__&&(t>0||0>e)?new tt(i):(0>t?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==T&&(e=+e||0,i=0>e?i.dropRight(-e):i.take(e-t)),i)},tt.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},tt.prototype.toArray=function(){return this.take(Eo)},Me(tt.prototype,function(t,i){var n=/^(?:filter|map|reject)|While$/.test(i),r=/^(?:first|last)$/.test(i),s=e[r?"take"+("last"==i?"Right":""):i];s&&(e.prototype[i]=function(){var e=r?[1]:arguments,i=this.__chain__,o=this.__wrapped__,a=!!this.__actions__.length,c=o instanceof tt,l=e[0],h=c||Ca(o);h&&n&&"function"==typeof l&&1!=l.length&&(c=h=!1);var p=function(t){return r&&i?s(t,1)[0]:s.apply(T,le([t],e))},u={func:$n,args:[p],thisArg:T},d=c&&!a;if(r&&!i)return d?(o=o.clone(),o.__actions__.push(u),t.call(o)):s.call(T,this.value())[0];if(!r&&h){o=d?o:new tt(this);var f=t.apply(o,e);return f.__actions__.push(u),new K(f,i)}return this.thru(p)})}),ne(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var i=(/^(?:replace|split)$/.test(t)?Js:Ks)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?i.apply(this.value(),t):this[n](function(e){return i.apply(e,t)})}}),Me(tt.prototype,function(t,i){var n=e[i];if(n){var r=n.name,s=Oo[r]||(Oo[r]=[]);s.push({name:i,func:n})}}),Oo[Mi(T,I).name]=[{name:"wrapper",func:T}],tt.prototype.clone=it,tt.prototype.reverse=$t,tt.prototype.value=Bt,e.prototype.chain=Bn,e.prototype.commit=Wn,e.prototype.concat=ea,e.prototype.plant=Hn,e.prototype.reverse=Yn,e.prototype.toString=Gn,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Xn,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var T,A="3.10.1",R=1,I=2,E=4,C=8,k=16,M=32,L=64,P=128,$=256,O=30,N="...",D=150,F=16,q=200,z=1,j=2,V="Expected a function",U="__lodash_placeholder__",B="[object Arguments]",W="[object Array]",H="[object Boolean]",Y="[object Date]",G="[object Error]",X="[object Function]",K="[object Map]",Z="[object Number]",J="[object Object]",Q="[object RegExp]",tt="[object Set]",et="[object String]",it="[object WeakMap]",nt="[object ArrayBuffer]",rt="[object Float32Array]",st="[object Float64Array]",ot="[object Int8Array]",at="[object Int16Array]",ct="[object Int32Array]",lt="[object Uint8Array]",ht="[object Uint8ClampedArray]",pt="[object Uint16Array]",ut="[object Uint32Array]",dt=/\b__p \+= '';/g,ft=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,gt=/[&<>"'`]/g,vt=RegExp(mt.source),yt=RegExp(gt.source),bt=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Tt=/^\w*$/,At=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Rt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,It=RegExp(Rt.source),Et=/[\u0300-\u036f\ufe20-\ufe23]/g,Ct=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mt=/\w*$/,Lt=/^0[xX]/,Pt=/^\[object .+?Constructor\]$/,Ot=/^\d+$/,Nt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Dt=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,qt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],jt=-1,Vt={};Vt[rt]=Vt[st]=Vt[ot]=Vt[at]=Vt[ct]=Vt[lt]=Vt[ht]=Vt[pt]=Vt[ut]=!0,Vt[B]=Vt[W]=Vt[nt]=Vt[H]=Vt[Y]=Vt[G]=Vt[X]=Vt[K]=Vt[Z]=Vt[J]=Vt[Q]=Vt[tt]=Vt[et]=Vt[it]=!1;var Ut={};Ut[B]=Ut[W]=Ut[nt]=Ut[H]=Ut[Y]=Ut[rt]=Ut[st]=Ut[ot]=Ut[at]=Ut[ct]=Ut[Z]=Ut[J]=Ut[Q]=Ut[et]=Ut[lt]=Ut[ht]=Ut[pt]=Ut[ut]=!0,Ut[G]=Ut[X]=Ut[K]=Ut[tt]=Ut[it]=!1;var $t={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Wt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ht={function:!0,object:!0},Yt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xt=Ht[typeof exports]&&exports&&!exports.nodeType&&exports,Kt=Ht[typeof t]&&t&&!t.nodeType&&t,Zt=Xt&&Kt&&"object"==typeof e&&e&&e.Object&&e,Jt=Ht[typeof self]&&self&&self.Object&&self,Qt=Ht[typeof window]&&window&&window.Object&&window,te=Kt&&Kt.exports===Xt&&Xt,ee=Zt||Qt!==(this&&this.window)&&Qt||Jt||this,ie=S();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ee._=ie,define(function(){return ie})):Xt&&Kt?te?(Kt.exports=ie)._=ie:Xt._=ie:ee._=ie}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(require,t,exports){(function(e){(function(){"use strict";function i(t){return t=String(t),t.charAt(0).toUpperCase()+t.slice(1)}function n(t,e,i){var n={6.4:"10",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&i&&/^Win/i.test(t)&&(n=n[/[\d.]+$/.exec(t)])&&(t="Windows "+n),t=String(t),e&&i&&(t=t.replace(RegExp(e,"i"),i)),t=s(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").split(" on ")[0])}function r(t,e){var i=-1,n=t?t.length:0;if("number"==typeof n&&n>-1&&y>=n)for(;++i<n;)e(t[i],i,t);else o(t,e)}function s(t){return t=p(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:i(t)}function o(t,e){for(var i in t)S.call(t,i)&&e(t[i],i,t)}function a(t){return null==t?i(t):T.call(t).slice(8,-1)}function c(t,e){var i=null!=t?typeof t[e]:"number";return!/^(?:boolean|number|string|undefined)$/.test(i)&&("object"==i?!!t[e]:!0)}function l(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function h(t,e){var i=null;return r(t,function(n,r){i=e(i,n,r,t)}),i}function p(t){return String(t).replace(/^ +| +$/g,"")}function u(t){function e(e){return h(e,function(e,i){return e||RegExp("\\b"+(i.pattern||l(i))+"\\b","i").exec(t)&&(i.label||i)})}function i(e){return h(e,function(e,i,n){return e||(i[X]||i[/^[a-z]+(?: +[a-z]+\b)*/i.exec(X)]||RegExp("\\b"+l(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n})}function r(e){return h(e,function(e,i){return e||RegExp("\\b"+(i.pattern||l(i))+"\\b","i").exec(t)&&(i.label||i)})}function d(e){return h(e,function(e,i){var r=i.pattern||l(i);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=n(e,r,i.label||i)),e})}function m(e){return h(e,function(e,i){var n=i.pattern||l(i);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(i.label&&!RegExp(n,"i").test(i.label)?i.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),i=i.label||i,e=s(e[0].replace(RegExp(n,"i"),i).replace(RegExp("; *(?:"+i+"[_-])?","i")," ").replace(RegExp("("+i+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function g(e){return h(e,function(e,i){return e||(RegExp(i+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}function v(){return this.description||""}var y=f,x=t&&"object"==typeof t&&"String"!=a(t);x&&(y=t,t=null);var S=y.navigator||{},A=S.userAgent||"";t||(t=A);var R,I,E=x||w==_,C=x?!!S.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(T.toString()),k="Object",M=x?k:"ScriptBridgingProxyObject",L=x?k:"Environment",P=x&&y.java?"JavaPackage":a(y.java),O=x?k:"RuntimeObject",$=/\bJava/.test(P)&&y.java,N=$&&a(y.environment)==L,D=$?"a":"α",F=$?"b":"β",q=y.document||{},z=y.operamini||y.opera,j=b.test(j=x&&z?z["[[Class]]"]:a(z))?j:z=null,V=t,U=[],B=null,W=t==A,H=W&&z&&"function"==typeof z.version&&z.version(),Y=e(["Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),G=r(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),X=m([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=i({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Z=d(["Windows Phone ","Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(Y&&(Y=[Y]),K&&!X&&(X=m([K])),(R=/\bGoogle TV\b/.exec(X))&&(X=R[0]),/\bSimulator\b/i.test(t)&&(X=(X?X+" ":"")+"Simulator"),"Opera Mini"==G&&/\bOPiOS\b/.test(t)&&U.push("running in Turbo/Uncompressed mode"),/^iP/.test(X)?(G||(G="Safari"),Z="iOS"+((R=/ OS ([\d_]+)/i.exec(t))?" "+R[1].replace(/_/g,"."):"")):"Konqueror"!=G||/buntu/i.test(Z)?K&&"Google"!=K&&(/Chrome/.test(G)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(X))?(G="Android Browser",Z=/\bAndroid\b/.test(Z)?Z:"Android"):(!G||(R=!/\bMinefield\b|\(Android;/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(G)))&&(G&&!X&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(R+"/")+8))&&(G=null),(R=X||K||Z)&&(X||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Z))&&(G=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Z)?Z:R)+" Browser")):Z="Kubuntu",(R=/\((Mobile|Tablet).*?Firefox\b/i.exec(t))&&R[1]&&(Z="Firefox OS",X||(X=R[1])),H||(H=g(["(?:Cloud9|CriOS|CrMo|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",l(G),"(?:Firefox|Minefield|NetFront)"])),"iCab"==Y&&parseFloat(H)>3?Y=["WebKit"]:"Trident"!=Y&&(R=/\bOpera\b/.test(G)&&(/\bOPR\b/.test(t)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&"WebKit"||!Y&&/\bMSIE\b/i.test(t)&&("Mac OS"==Z?"Tasman":"Trident"))?Y=[R]:/\bPlayStation\b(?! Vita\b)/i.test(G)&&"WebKit"==Y&&(Y=["NetFront"]),"IE"==G&&(R=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(G+=" Mobile",Z="Windows Phone "+(/\+$/.test(R)?R:R+".x"),U.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(G="IE Mobile",Z="Windows Phone 8+",U.unshift("desktop mode"),H||(H=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=G&&"Trident"==Y&&(R=/\brv:([\d.]+)/.exec(t))?(/\bWPDesktop\b/i.test(t)||(G&&U.push("identifying as "+G+(H?" "+H:"")),G="IE"),H=R[1]):"Chrome"!=G&&"IE"==G||!(R=/\bEdge\/([\d.]+)/.exec(t))||(G="IE",H=R[1],Y=["Trident"],U.unshift("platform preview")),W){if(c(y,"global"))if($&&(R=$.lang.System,V=R.getProperty("os.arch"),Z=Z||R.getProperty("os.name")+" "+R.getProperty("os.version")),E&&c(y,"system")&&(R=[y.system])[0]){Z||(Z=R[0].os||null);try{R[1]=y.require("ringo/engine").version,H=R[1].join("."),G="RingoJS"}catch(t){R[0].global.system==y.system&&(G="Narwhal")}}else"object"==typeof y.process&&(R=y.process)?(G="Node.js",V=R.arch,Z=R.platform,H=/[\d.]+/.exec(R.version)[0]):N&&(G="Rhino");else a(R=y.runtime)==M?(G="Adobe AIR",Z=R.flash.system.Capabilities.os):a(R=y.phantom)==O?(G="PhantomJS",H=(R=R.version||null)&&R.major+"."+R.minor+"."+R.patch):"number"==typeof q.documentMode&&(R=/\bTrident\/(\d+)/i.exec(t))&&(H=[H,q.documentMode],(R=+R[1]+4)!=H[1]&&(U.push("IE "+H[1]+" mode"),Y&&(Y[1]=""),H[1]=R),H="IE"==G?String(H[1].toFixed(1)):H[0]);Z=Z&&s(Z)}H&&(R=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(H)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(W&&S.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(B=/b/i.test(R)?"beta":"alpha",H=H.replace(RegExp(R+"\\+?$"),"")+("beta"==B?F:D)+(/\d+\+?/.exec(R)||"")),"Fennec"==G||"Firefox"==G&&/\b(?:Android|Firefox OS)\b/.test(Z)?G="Firefox Mobile":"Maxthon"==G&&H?H=H.replace(/\.[\d.]+/,".x"):"Silk"==G?(/\bMobi/i.test(t)||(Z="Android",U.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&U.unshift("accelerated")):/\bXbox\b/i.test(X)?(Z=null,"Xbox 360"==X&&/\bIEMobile\b/.test(t)&&U.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(G)&&(!G||X||/Browser|Mobi/.test(G))||"Windows CE"!=Z&&!/Mobi/i.test(t)?"IE"==G&&W&&null===y.external?U.unshift("platform preview"):(/\bBlackBerry\b/.test(X)||/\bBB10\b/.test(t))&&(R=(RegExp(X.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||H)?(R=[R,/BB10/.test(t)],Z=(R[1]?(X=null,K="BlackBerry"):"Device Software")+" "+R[0],H=null):this!=o&&"Wii"!=X&&(W&&z||/Opera/.test(G)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==G&&/\bOS X (?:\d+\.){2,}/.test(Z)||"IE"==G&&(Z&&!/^Win/.test(Z)&&H>5.5||/\bWindows XP\b/.test(Z)&&H>8||8==H&&!/\bTrident\b/.test(t)))&&!b.test(R=u.call(o,t.replace(b,"")+";"))&&R.name&&(R="ing as "+R.name+((R=R.version)?" "+R:""),b.test(G)?(/\bIE\b/.test(R)&&"Mac OS"==Z&&(Z=null),R="identify"+R):(R="mask"+R,G=j?s(j.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(R)&&(Z=null),W||(H=null)),Y=["Presto"],U.push(R)):G+=" Mobile",(R=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(R=[parseFloat(R.replace(/\.(\d)$/,".0$1")),R],"Safari"==G&&"+"==R[1].slice(-1)?(G="WebKit Nightly",B="alpha",H=R[1].slice(0,-1)):(H==R[1]||H==(R[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1]))&&(H=null),R[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==R[0]&&537.36==R[2]&&parseFloat(R[1])>=28&&"IE"!=G&&(Y=["Blink"]),W&&(C||R[1])?(Y&&(Y[1]="like Chrome"),R=R[1]||(R=R[0],530>R?1:532>R?2:532.05>R?3:533>R?4:534.03>R?5:534.07>R?6:534.1>R?7:534.13>R?8:534.16>R?9:534.24>R?10:534.3>R?11:535.01>R?12:535.02>R?"13+":535.07>R?15:535.11>R?16:535.19>R?17:536.05>R?18:536.1>R?19:537.01>R?20:537.11>R?"21+":537.13>R?23:537.18>R?24:537.24>R?25:537.36>R?26:"Blink"!=Y?"27":"28")):(Y&&(Y[1]="like Safari"),R=R[0],R=400>R?1:500>R?2:526>R?3:533>R?4:534>R?"4+":535>R?5:537>R?6:538>R?7:601>R?8:"8"),Y&&(Y[1]+=" "+(R+="number"==typeof R?".x":/[.+]/.test(R)?"":"+")),"Safari"==G&&(!H||parseInt(H)>45)&&(H=R)),"Opera"==G&&(R=/\bzbov|zvav$/.exec(Z))?(G+=" ",U.unshift("desktop mode"),"zvav"==R?(G+="Mini",H=null):G+="Mobile",Z=Z.replace(RegExp(" *"+R+"$"),"")):"Safari"==G&&/\bChrome\b/.exec(Y&&Y[1])&&(U.unshift("desktop mode"),G="Chrome Mobile",H=null,/\bOS X\b/.test(Z)?(K="Apple",Z="iOS 4.3+"):Z=null),H&&0==H.indexOf(R=/[\d.]+$/.exec(Z))&&t.indexOf("/"+R+"-")>-1&&(Z=p(Z.replace(R,""))),Y&&!/\b(?:Avant|Nook)\b/.test(G)&&(/Browser|Lunascape|Maxthon/.test(G)||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(G)&&Y[1])&&(R=Y[Y.length-1])&&U.push(R),U.length&&(U=["("+U.join("; ")+")"]),K&&X&&X.indexOf(K)<0&&U.push("on "+K),X&&U.push((/^on /.test(U[U.length-1])?"":"on ")+X),Z&&(R=/ ([\d.+]+)$/.exec(Z),I=R&&"/"==Z.charAt(Z.length-R[0].length-1),Z={architecture:32,family:R&&!I?Z.replace(R[0],""):Z,version:R?R[1]:null,toString:function(){var t=this.version;return this.family+(t&&!I?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(R=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(V))&&!/\bi686\b/i.test(V)&&(Z&&(Z.architecture=64,Z.family=Z.family.replace(RegExp(" *"+R),"")),G&&(/\bWOW64\b/i.test(t)||W&&/\w(?:86|32)$/.test(S.cpuClass||S.platform)&&!/\bWin64; x64\b/i.test(t))&&U.unshift("32-bit")),t||(t=null);var J={};return J.description=t,J.layout=Y&&Y[0],J.manufacturer=K,J.name=G,J.prerelease=B,J.product=X,J.ua=t,J.version=G&&H,J.os=Z||{architecture:null,family:null,version:null,toString:function(){return"null"}},J.parse=u,J.toString=v,J.version&&U.unshift(H),J.name&&U.unshift(G),Z&&G&&(Z!=String(Z).split(" ")[0]||Z!=G.split(" ")[0]&&!X)&&U.push(X?"("+Z+")":"on "+Z),U.length&&(J.description=U.join(" ")),J}var d={function:!0,object:!0},f=d[typeof window]&&window||this,_=f,m=d[typeof exports]&&exports,g=d[typeof t]&&t&&!t.nodeType&&t,v=m&&g&&"object"==typeof e&&e;!v||v.global!==v&&v.window!==v&&v.self!==v||(f=v);var y=Math.pow(2,53)-1,b=/\bOpera/,w=this,x=Object.prototype,S=x.hasOwnProperty,T=x.toString;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return u()}):m&&g?o(u(),function(t,e){m[e]=t}):f.platform=u()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(require,t,exports){var e=window.React,i=require("react/lib/invariant"),n=e.PropTypes,r=n.string,s=n.object,o=/(\*+)/,a=/(%\{.*?\})/,c=function(t){return t instanceof Array?t.slice():t?[t]:[]},l=function(t,n,r,s){n.injectedCount=n.injectedCount||0,r=r||{};for(var o=c(t.props.children),a=0;a<o.length;a++){var p=o[a];o[a]=p.type?l(p,n):p}var u=h(o);return u>=0&&(o.splice.apply(o,[u,1].concat(n)),n.injectedCount++),r.children=o,s&&i(1===n.injectedCount,'wrappers must have a single "$1" text descendant'),e.cloneElement(t,r)},h=function(t,e){for(var n,r=-1,s=0;s<t.length;s++)n=t[s],"string"==typeof n&&(i("$1"===n,e+' may not have any non-"$1" text children"'),i(-1===r,e+' may not have multiple "$1" text children"'),r=s);return r},p=e.createClass({displayName:"ComponentInterpolator",propTypes:{string:r.isRequired,wrappers:s},inferChildren:function(){var t=(this.props.string||"").split(o);this.keyCounter=0;var e=this.interpolateAllComponents(t),n=c(this.props.children),r=h(n,"<ComponentInterpolator>");return i(r>=0,'<ComponentInterpolator> must have a "$1" text child"'),n.splice.apply(n,[r,1].concat(e)),n},interpolateAllComponents:function(t,e){for(var n,r,s=[],a=this.props.wrappers||{};t.length&&(n=t.shift(),n!==e);)n.match(o)?(i(r=a[n],"<ComponentInterpolator> expected '"+n+"' wrapper, none found"),r=l(r,this.interpolateAllComponents(t,n),{key:this.keyCounter++},!0),s.push(r)):s.push.apply(s,this.interpolatePlaceholders(n));return s},interpolatePlaceholders:function(t){for(var n,r,s=t.split(a),o=[];s.length;)n=s.shift(),n.match(a)?(n=n.slice(2,-1),i(this.props.hasOwnProperty(n),"<ComponentInterpolator> expected '"+n+"' placeholder value, none found"),r=this.props[n],r=r&&r.type?e.cloneElement(r,{key:this.keyCounter++}):r,o.push(r)):o.push(n);return o},render:function(){return e.createElement("span",{},this.inferChildren());
}});t.exports=p},{"react/lib/invariant":40}],39:[function(require,t,exports){var e=require("../ComponentInterpolator"),i=function(t){t.ComponentInterpolator=e};t.exports=i},{"../ComponentInterpolator":38}],40:[function(require,t,exports){"use strict";var e=function(t,e,i,n,r,s,o,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,s,o,a],h=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return l[h++]}))}throw c.framesToPop=1,c}};t.exports=e},{}],41:[function(require,t,exports){!function(){"use strict";var e="undefined"!=typeof t&&t.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var t,e,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=i.length,s={};r>n;n++)if(t=i[n],t&&t[1]in document){for(n=0,e=t.length;e>n;n++)s[i[0][n]]=t[n];return s}return!1}(),r={request:function(t){var e=n.requestFullscreen;t=t||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?t[e]():t[e](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[n.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},raw:n};return n?(Object.defineProperties(r,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),void(e?t.exports=r:window.screenfull=r)):void(e?t.exports=!1:window.screenfull=!1)}()},{}],42:[function(require,t,exports){t.exports=require("./lib/")},{"./lib/":43}],43:[function(require,t,exports){!function(){"use strict";var e=function(t,e){var i,o,a,c,l,h="object"==typeof e&&e.maintainCase||!1,p="object"==typeof e&&e.titleCase?e.titleCase:!1,u="object"==typeof e&&"object"==typeof e.custom&&e.custom?e.custom:{},d="object"==typeof e&&e.separator||"-",f="object"==typeof e&&+e.truncate>1&&e.truncate||!1,_="object"==typeof e&&e.uric||!1,m="object"==typeof e&&e.uricNoSlash||!1,g="object"==typeof e&&e.mark||!1,v="object"==typeof e&&e.lang&&s[e.lang]?s[e.lang]:"object"!=typeof e||e.lang!==!1&&e.lang!==!0?s.en:{},y=[";","?",":","@","&","=","+","$",",","/"],b=[";","?",":","@","&","=","+","$",","],w=[".","!","~","*","'","(",")"],x="",S=d;if(p&&"number"==typeof p.length&&Array.prototype.toString.call(p)&&p.forEach(function(t){u[t+""]=t+""}),"string"!=typeof t)return"";for("string"==typeof e?d=e:"object"==typeof e&&(_&&(S+=y.join("")),m&&(S+=b.join("")),g&&(S+=w.join(""))),Object.keys(u).forEach(function(e){var i;i=e.length>1?new RegExp("\\b"+n(e)+"\\b","gi"):new RegExp(n(e),"gi"),t=t.replace(i,u[e])}),p&&(t=t.replace(/(\w)(\S*)/g,function(t,e,i){var n=e.toUpperCase()+(null!==i?i:"");return Object.keys(u).indexOf(n.toLowerCase())<0?n:n.toLowerCase()})),S=n(S),t=t.replace(/(^\s+|\s+$)/g,""),l=!1,o=0,c=t.length;c>o;o++)a=t[o],r[a]?(a=l&&r[a].match(/[A-Za-z0-9]/)?" "+r[a]:r[a],l=!1):!v[a]||_&&-1!==y.join("").indexOf(a)||m&&-1!==b.join("").indexOf(a)||g&&-1!==w.join("").indexOf(a)?(l&&(/[A-Za-z0-9]/.test(a)||x.substr(-1).match(/A-Za-z0-9]/))&&(a=" "+a),l=!1):(a=l||x.substr(-1).match(/[A-Za-z0-9]/)?d+v[a]:v[a],a+=void 0!==t[o+1]&&t[o+1].match(/[A-Za-z0-9]/)?d:"",l=!0),x+=a.replace(new RegExp("[^\\w\\s"+S+"_-]","g"),d);return x=x.replace(/\s+/g,d).replace(new RegExp("\\"+d+"+","g"),d).replace(new RegExp("(^\\"+d+"+|\\"+d+"+$)","g"),""),f&&x.length>f&&(i=x.charAt(f)===d,x=x.slice(0,f),i||(x=x.slice(0,x.lastIndexOf(d)))),h||p||p.length||(x=x.toLowerCase()),x},i=function(t){return function(i){return e(i,t)}},n=function(t){return t.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF"},s={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"}};if("undefined"!=typeof t&&t.exports)t.exports=e,t.exports.createSlug=i;else if("undefined"!=typeof define&&define.amd)define([],function(){return e});else try{if(window.getSlug||window.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";window.getSlug=e,window.createSlug=i}catch(t){}}()},{}],44:[function(require,t,exports){(function(t){function e(){window.global=t,self._=require("lodash"),require("yttro/lib/lodash-mixins"),self.Promise=window.Promise,Promise.onPossiblyUnhandledRejection(function(t,e){window.onerror(t.msg,"","","",t)}),self.React=window.React,React.initializeTouchEvents(!0),self.I18n=require("yttro/lib/i18n"),self.$=window.$,self.Velocity=window.Velocity||$.Velocity;var e=require("url"),i=require("yttro/lib/url-hash");self.PARSED_LOCATION=e.parse(self.location+"",!0),self.DEBUG=PARSED_LOCATION.query.debug||i.get(window.location).debug;var n=require("yttro/lib/private-browsing-check"),r=require("yttro/views/supported-browser-check"),s=require("yttro/views/highend-device-check"),o=require("yttro/lib/mobile-check"),a=require("yttro/lib/manifest-md5"),c=require("yttro/lib/ajax-image"),l=require("yttro/views/alert-once"),h=require("yttro/views/ymap"),p=require("yttro/views/loader"),u=require("yttro/views/app-update"),d=require("yttro/views/beta-interstitial");if(PARSED_LOCATION.query.clear||PARSED_LOCATION.query.clean)for(var f=localStorage.length-1;f>=0;--f){var m=localStorage.key(f);localStorage.removeItem(m)}var g=require("yttro/model/worlds"),v=g.default;PARSED_LOCATION.query.world&&(v=g[PARSED_LOCATION.query.world],v||(v=g.default)),window.world=_.merge({},v),window._trand=window._trand||Math.random();var y=require("yttro/lib/safe-storage")(window.localStorage),b=require("yttro/lib/experiments");self.Experiments=new b({hld:{description:"Track high level of details",buckets:[{name:"yes",probability:.5},{name:"no",probability:.5}]}},{values:y.safeGetObject("exp")}),y.safeSetObject("exp",Experiments.getBuckets()),_.forEach(Experiments.getBuckets(),function(t,e){var i=PARSED_LOCATION.query[e];i&&Experiments.setBucket(e,i)}),PARSED_LOCATION.query.hld?(Experiments.setBucket("hld","yes"),window._trand=1):PARSED_LOCATION.query._trand&&(window._trand=Number(PARSED_LOCATION.query._trand)||1),self.YTracking=require("yttro/lib/y-tracking"),YTracking.init({enabled:_trand>1-world.track_rate,hld:Experiments.inBucket("hld","yes")});var w=Experiments.getBuckets();w=_.mapKeys(w,function(t,e){return"_exp_"+e}),YTracking.defaultPayload(_.merge(w,{v:world.v,lc:I18n.locale,id:YTracking.uuid,vn:YTracking.visitNum})),YTracking.trackHLD("_js_"),window.IsHighendDevice=s(),IsHighendDevice||(world.FPS=Math.min(15,world.FPS),world.maxPixelRatio=Math.min(1,world.maxPixelRatio),world.numVisibleAnchors=Math.min(5,world.numVisibleAnchors)),o()?$("html").addClass("mobile"):$("html").addClass("desktop"),o.isIPod&&$("html").addClass("iPod"),o.isIPhone&&$("html").addClass("iPhone"),o.isIPad&&$("html").addClass("iPad"),o.isAndroid&&$("html").addClass("Android"),o.isUCBrowser&&$("html").addClass("UCBrowser");var x=8;Promise.all([n(),r(x),new Promise(function(t,e){new u({parentNode:$("#YMap").parent()[0]}),t()})]).then(function(){return Promise.resolve().then(function(){if(YTracking.trackHLD("_p_d"),o.isUCBrowser){var t=require("yttro/lib/ajax"),e=require("yttro/lib/ajax-image"),i=[t.get({url:world.jsonURL+(PARSED_LOCATION.query.dms||"")})];return i=i.concat(_.map(I18n.config.tutorialAssets,function(t){return e.get({url:t})})),Promise.all(i)}var i=_.flatten([world.jsonURL+(PARSED_LOCATION.query.dms||""),I18n.config.tutorialAssets],!0);return p.ensureAssets(i)}).then(function(t){var e=(new Date).getTime();return _.fastMerge(world,t[0]),YTracking.track("yo",{c:world.embed_array_num_cols,r:world.embed_array_num_rows}),window.ymap=new h(world),DEBUG&&$("#YMap").css({backgroundColor:"pink"}),ymap.init().then(function(){var t={asset:e-appStartTime,init:(new Date).getTime()-e,start:(new Date).getTime()-appStartTime};void YTracking.track("_init_",t);var i=$("#splash");i.addClass("done"),Velocity(i[0],{opacity:0,scale:4},{delay:300,duration:1200}).then(function(){i.remove(),window.TILE_DELAY=PARSED_LOCATION.query.delay||0,ymap._updateDownloadQueue()})}).then(function(){var t=new d({parentNode:document.body});return t.confirm()})}).catch(p.LoaderIsParent,function(t){}).catch(c.ImageLoadError,function(t){throw l(I18n.t("An unknown error occurred. YTTRO has been notified!")),t}).catch(function(t){throw l(I18n.t("It appears you are on an unsupported device. YTTRO requires Safari on iOS %{iOSVersion}+",{iOSVersion:x})),t})}).catch(r.UnsupportedDeviceError,function(t){YTracking.track("_e_ub",null),l(t.message)}).error(function(t){if(!o.isIOS)throw YTracking.track("_e_ud",null),l(I18n.t("It appears you are on an unsupported device. YTTRO requires Safari on iOS %{iOSVersion}+",{iOSVersion:x})),t;YTracking.track("_e_pb",null),l(I18n.t("It appears you are in private browsing mode. YTTRO does not support private browsing mode."))}),DEBUG&&a().then(function(t){var e="Manifest MD5 is "+t.md5;void alert(e)}).error(function(t){}),window.onerror=function(t,e,i,n,r){var s=_.get(r,"message",""),o=_.get(r,"constructor.name");s=o+": "+s,s=s.trim().slice(0,50);var a=null;if(r&&"string"==typeof r.stack)try{a=r.stack,a=a.trim(),a=a.replace(/http[:\/.a-zA-Z0-9-]*yttro[\/.a-zA-Z0-9-]*\.js/g,"yttro.js"),a=a.replace(/http.*?([^\/]+\.js)$/g,"$1"),a=a.slice(0,100)}catch(t){a="Err parsing stack"}return void YTracking.track("eu",{m:s,f:e,l:i,c:n,s:a})}}window.addEventListener("load",e)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lodash:36,url:118,"yttro/lib/ajax":47,"yttro/lib/ajax-image":46,"yttro/lib/experiments":52,"yttro/lib/i18n":56,"yttro/lib/lodash-mixins":60,"yttro/lib/manifest-md5":61,"yttro/lib/mobile-check":62,"yttro/lib/private-browsing-check":64,"yttro/lib/safe-storage":70,"yttro/lib/url-hash":73,"yttro/lib/y-tracking":75,"yttro/model/worlds":82,"yttro/views/alert-once":83,"yttro/views/app-update":88,"yttro/views/beta-interstitial":89,"yttro/views/highend-device-check":93,"yttro/views/loader":94,"yttro/views/supported-browser-check":108,"yttro/views/ymap":111}],45:[function(require,t,exports){t.exports={}},{}],46:[function(require,t,exports){function e(t){this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,e)}require("yttro/lib/ajax");e.prototype=Object.create(Error.prototype),e.prototype.constructor=e;var i={ImageLoadError:e,_bytesAndMimeType2Image:function(t){if(t.mimeType){var e=new Blob([t.bytes],{type:t.mimeType}),i=self.URL||self.webkitURL||self,n=i.createObjectURL(e);return this._getBasic(n).catch(function(t){throw t})}return t.width&&t.height?new Promise(function(e,i){var n=t.bytes;n instanceof Uint8ClampedArray||(n=new Uint8ClampedArray(n));var r=new ImageData(n,t.width,t.height),s=document.createElement("canvas");s.width=r.width,s.height=r.height;var o=s.getContext("2d");o.putImageData(r,0,0),e(s)}):Promise.reject(new Error("got bad bamt"))},_getBasic:function(t){var i=new Image;return new Promise(function(n,r){i.onload=function(){n(i)},i.onerror=function(i){r(new e(t))},i.src=t})},get:function(t){if(t=_.merge({retry:4},t),!t.url)throw new Error("url required");return this._getBasic(t.url).catch(function(e){if(t.retry<=0)throw e;return this.get(_.merge(t,{retry:t.retry-1}))}.bind(this))}};t.exports=i},{"yttro/lib/ajax":47}],47:[function(require,t,exports){function e(t){var e={uri:t.url,method:t.type||"GET",body:t.data};0==e.uri.indexOf("//")&&(e.uri="http:"+e.uri),t.dataType=t.dataType||"json";var i=t.dataType.toLowerCase();return"jsonp"==i&&(i="json"),"json"==i&&(e.json=!0),e}function i(t){var e=new XMLHttpRequest;t.onProgress&&e.addEventListener("progress",t.onProgress);var i=new Promise(function(t,i){e.onload=function(){var i=e.response,n=e.getResponseHeader("content-type");t({bytes:i,mimeType:n})},e.onerror=function(t){i(t)},e.onabort=function(t){i(t)},e.ontimeout=function(t){i(t)},e.onreadystatechange=function(t){return 4==e.readyState&&200!=e.status?void i(new Error(e.status+": "+e.statusText)):void 0}});return e.open("GET",t.url,!0),e.responseType=t.responseType||"arraybuffer",e.send(null),i}var n={},r=!1;try{r=!!$.get}catch(t){r=!1}if(r&&(n.get=function(t){return new Promise(function(e,i){t=_.merge({dataType:"json",type:"GET",success:e,error:function(t,e,n){var r=new Error(e);r.xhr=t,i(r)}},t),req=$.ajax(t)})},n.post=function(t){return t=_.merge({dataType:"json",type:"POST"},t),new Promise(function(e,i){req=$.ajax(t),req.then(e),req.fail(i)})}),!r){var s=require("request-promise");n.get=function(t){var i=e(t);return s(i)},n.post=function(t){t.type=t.type||"POST";var i=e(t);return s(i)}}n.getBytesAndMimeType=function(t){if(t=t||{},!t.url)throw new Error("URL required");var e=void 0===t.retry?5:t.retry;return i(t).catch(function(i){if(--e,0>=e)return Promise.reject(new Error("Ran out of tries"));var n=_.merge(t,{retry:e});return this.getBytesAndMimeType(n)}.bind(this))},t.exports=n},{"request-promise":113}],48:[function(require,t,exports){function e(t,e){return i.chain(e.match(t)).map(function(e){return e&&t.test(e)?e.replace(t,"$1"):null}).compact().value()}var i=require("lodash");t.exports=e},{lodash:36}],49:[function(require,t,exports){function e(t){return new Promise(function(e,i){var n=new Blob([t.bytes],{type:t.mimeType}),r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsText(n)})}t.exports=e},{}],50:[function(require,t,exports){t.exports={hsv2rgb:function(t,e,i){var n=i*e,r=360*t,s=n*(1-Math.abs(r/60%2-1)),o=i-n,a=[];return r>=0&&60>r?a=[n,s,0]:r>=60&&120>r?a=[s,n,0]:r>=120&&180>r?a=[0,n,s]:r>=180&&240>r?a=[0,s,n]:r>=240&&300>r?a=[s,0,n]:r>=300&&360>r&&(a=[n,0,s]),a[0]=255*(a[0]+o),a[1]=255*(a[1]+o),a[2]=255*(a[2]+o),a},rgb2hsv:function(t,e,i){t/=255,e/=255,i/=255;var n,r=Math.max(t,e,i),s=Math.min(t,e,i),o=r-s;if(0==o)n=0;else{switch(r){case t:n=(e-i)/o%6;break;case e:n=(i-t)/o+2;break;case i:n=(t-e)/o+4}n/=6}var a=0==r?0:o/r,c=o;return[n,a,c]},hueShift:function(t,e){var i=Color.rgb2hsv.apply(Color,t);return i[0]*=e,i[0]=i[0]-Math.floor(i[0]),Color.hsv2rgb.apply(Color,i)}}},{}],51:[function(require,t,exports){function e(t){t=t||{},this.msPerTick=t.msPerTick||Math.round(1e3/world.FPS),this._listeners=[],this._boundOnTick=this._onTick.bind(this)}e.prototype={addListener:function(t){requestAnimationFrame(this._boundOnTick);var e=_.indexOf(this._listeners,t);return e>=0?e:this._listeners.push(t)},removeListener:function(t){var e=_.indexOf(this._listeners,t);if(0>e)return null;var i=this._listeners.splice(e,1);return i[0]},_onTick:function(t){if(this._prevTS)if(t-this._prevTS<this.msPerTick);else{this._prevTS=t;for(var e=0;e<this._listeners.length;++e)this._listeners[e](t)}else this._prevTS=t;this._listeners.length>0&&requestAnimationFrame(this._boundOnTick)}},t.exports=e},{}],52:[function(require,t,exports){function e(t,n){this._experiment2bucketName=n.values||{},this._experiments=t,i.forEach(t,function(t,n){t.name=t.name||n;var r=0;if(i.forEach(t.buckets,function(t){r+=Number(t.probability)}),r>1)throw new Error('Experiment "'+n+'" probability > 100%: '+100*r);if(1>r){var s=1-r;t.buckets.push({name:e.DEFAULT_BUCKET_NAME,probability:s})}var o=this._experiment2bucketName[n];o&&!i.find(t.buckets,{name:o})&&(o=null),o||(this._experiment2bucketName[n]=this._selectValue(n))}.bind(this)),i.forEach(this._experiment2bucketName,function(t,e){this._experiments[e]||delete this._experiment2bucketName[e]}.bind(this))}var i=require("lodash");e.DEFAULT_BUCKET_NAME="_DEFAULT",e.prototype.getBuckets=function(){return i.clone(this._experiment2bucketName)},e.prototype.inBucket=function(t,e){return e&&this._experiment2bucketName[t]===e},e.prototype.setBucket=function(t,e){var n=this._experiments[t];if(!n)throw new Error("Experiment not found: "+t);if(!i.find(n.buckets,{name:e}))throw new Error("Bucket name "+e+" no longer exists in experiment "+t+".");this._experiment2bucketName[t]=e},e.prototype._selectValue=function(t){var e=this._experiments[t];if(e){var n=e.buckets,r=Math.random(),s=null,o=0;return i.forEach(n,function(t){return o+=t.probability,o>r&&(s=t),!s}),s?s.name:void 0}},t.exports=e},{lodash:36}],53:[function(require,t,exports){t.exports=function(t,e){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}},{}],54:[function(require,t,exports){t.exports=function(t){var e=0;if(0==t.length)return e;var n;for(i=0;i<t.length;i++)n=t.charCodeAt(i),e=(e<<5)-e+n,e|=0;return e}},{}],55:[function(require,t,exports){var e=require("yttro/lib/regexp-change-flags"),i={scriptPct:function(t,i){var n=i.replace(e(t,{g:!0}),"");return 1-n.length/i.length},TEST_ARABIC:/[\u0600-\u06FF]/,TEST_HEBREW:/\u0590-\u05FF/,TEST_CJK:/[\u4E00-\u9FFF\u3400-\u4DFF\uF900-\uFAFF]/};i.TEST_RTL=new RegExp(i.TEST_ARABIC.source+"|"+i.TEST_HEBREW.source),t.exports=i},{"yttro/lib/regexp-change-flags":66}],56:[function(require,t,exports){function e(t){this.locale=t.locale||"",this.countryCode=this.locale.replace(/(?:[^_]+)_([^_]+).*/,"$1").toLowerCase(),this.languageCode=this.locale.replace(/([^_]+)_.*/,"$1").toLowerCase(),this.localeProper=this.locale.split("_").splice(0,2).join("_"),this.jsWorldLocale=new i.Locale(t.format),this.priceFormatter=new i.MonetaryFormatter(this.jsWorldLocale),this.numberFormatter=new i.NumericFormatter(this.jsWorldLocale),this.jsWorldLocale.suffixes=t.format.suffixes,this.jsWorldLocale.suffixes.unshift({str:"",div:1,start:-(1/0)}),_.forEach(this.jsWorldLocale.suffixes,function(t){t.start=t.start||t.div}),_.forEach(this.jsWorldLocale.suffixes,function(t,e,i){var n=i[e+1];n?t.end=t.end||n.start:t.end=1/0}),this._translations=t.translations||{},this.config={}}var i=require("3rdParty/JsWorld/JsWorld.min");e.prototype.price=function(t){return this.priceFormatter.format(t)},e.prototype.abbreviateNumber=function(t){var e,i=this.jsWorldLocale.suffixes;return _.forEach(i,function(i,n){return i.start<=t&&t<i.end?(e=_.round(t/i.div,1)+i.str,!1):void 0}.bind(this)),e||t};var n={};try{n=require("yttro/i18n/en_US/format.json")}catch(t){n=require("yttro/i18n/en_US/format.json")}var r={};try{r=require("yttro/i18n/en_US/tr.json")}catch(t){r=require("yttro/i18n/en_US/tr.json")}var s=new e({locale:"en_US",format:n,translations:r}),o=require("i18n-js");o.locale=s.languageCode,require("i18nliner/dist/lib/extensions/i18n_js")(o),require("react-i18nliner/dist/extensions/i18n_js")(o);var a=s._translations;o.translations[s.languageCode]={},_.forEach(a,function(t,e){o.translations[s.languageCode][e]=t});var c=["locale"];_.forEach(o,function(t,e){_.contains(c,e)||("function"==typeof t?s[e]=t.bind(o):s[e]=t)}),function(){var t="";switch("us"!=s.countryCode&&(t=s.countryCode+"/"),s.config.tutorialAssets=s.config.tutorialAssets||["assets/"+t+"tutorial-tooltip-1.png","assets/"+t+"tutorial-pan-1.png","assets/"+t+"tutorial-pinch-1.png"],s.config.appleTouchIcons=s.config.appleTouchIcons||{"58x58":"assets/"+t+"app-icons/58.png","80x80":"assets/"+t+"app-icons/80.png","87x87":"assets/"+t+"app-icons/87.png","116x116":"assets/"+t+"app-icons/116.png","120x120":"assets/"+t+"app-icons/120.png","180x180":"assets/"+t+"app-icons/180.png","1024x1024":"assets/"+t+"app-icons/1024.png"},s.locale){case"zh_CN":s.config.canonicalURL="http://yttroh5.duapp.com";break;case"zh_CN_ALI":s.config.canonicalURL="http://yttrophp.aliapp.com/h5/";break;default:s.config.canonicalURL="http://h5.yttromobile.com"}}(),t.exports=s},{"3rdParty/JsWorld/JsWorld.min":1,"i18n-js":30,"i18nliner/dist/lib/extensions/i18n_js":32,"react-i18nliner/dist/extensions/i18n_js":39,"yttro/i18n/en_US/format.json":2,"yttro/i18n/en_US/tr.json":45}],57:[function(require,t,exports){t.exports={baseId:function(t){if(isFinite(t))return t;if(!t)return t;t+="";var e=t.match(/^(DGA-|AGA-)(.*)/);if(e)return e[2];var e=t.match(/.*[_\/]id(\d+)/);return e?e[1]:t}}},{}],58:[function(require,t,exports){t.exports=function(t,e){t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e}},{}],59:[function(require,t,exports){t.exports=function(t,e,i){return i*(e-t)+t},t.exports.remap=function(t,e,i,n,r){return(i-t)/(e-t)*(r-n)+n}},{}],60:[function(require,t,exports){_.mixin({valueOrCall:function(t,e){for(var i=[],n=2,r=arguments.length;r>n;n++)i.push(arguments[n]);var s=t[e];return s&&"function"==typeof s&&(s=s.apply(t,i)),s},fastMerge:function(t,e){for(var i in e)t[i]=e[i];return t},coerceArray:function(t){return _.isArray(t)?t:[t]},prune:function(t){var e={};return _.forEach(t,function(t,i){if(!("number"==typeof t&&isNaN(t)||void 0===t||null===t||""===t))if("object"==typeof t){var n=_.prune(t);if(0==_.keys(n).length)return;e[i]=n}else e[i]=t}),e}})},{}],61:[function(require,t,exports){var e=require("yttro/lib/bytes-mimetype-to-object"),i=require("yttro/lib/ajax");t.exports=function(){var t=$("html")[0].getAttribute("manifest");return t?i.getBytesAndMimeType({contentType:!1,url:t}).then(function(t){return e(t)}).then(function(t){var e=_(t).split(/\n/).filter(function(t){return/^#[ a-f0-9]+/i.test(t)}).last();if(!e)return Promise.reject(new Error("Manifest file doesn't seem to have an MD5"));var i=_(t).split(/\n/).filter(function(t){return/^#src:[a-f0-9]+/i.test(t)}).last();return{src:i,md5:e}}):Promise.reject(new Error("Not using AppCache"))}},{"yttro/lib/ajax":47,"yttro/lib/bytes-mimetype-to-object":49}],62:[function(require,t,exports){function e(){var t;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}e.isAndroid=/\bandroid\b/i.test(navigator.userAgent||""),e.isIPhone=/\biPhone\b/i.test(navigator.userAgent||""),e.isIPod=/\biPod\b/i.test(navigator.userAgent||""),e.isIPad=/\biPad\b/i.test(navigator.userAgent||""),e.isIOS=e.isIPhone||e.isIPad||e.isIPod,e.isUCBrowser=/\bUCBrowser\b/i.test(navigator.userAgent||""),e.isFirefox=/\bFirefox\b/i.test(navigator.userAgent||""),t.exports=e},{}],63:[function(require,t,exports){t.exports=function(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}},{}],64:[function(require,t,exports){function e(){return i||(i=new Promise(function(t,e){var i="__pbt",n=window.sessionStorage;try{n.setItem(i,"x"),n.removeItem(i),t()}catch(t){if(t.code!==DOMException.QUOTA_EXCEEDED_ERR||0!==n.length)throw t;e(t)}})),i}var i=null;t.exports=e},{}],65:[function(require,t,exports){function e(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0}var i=require("3rdParty/RandomBits/RBMath");e.prototype={center:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},left:function(){return this.x},right:function(){return this.x+this.width},top:function(){return this.y},bottom:function(){return this.y+this.height},tl:function(){return{x:this.left(),y:this.top()}},tr:function(){return{x:this.right(),y:this.top()}},bl:function(){return{x:this.left(),y:this.bottom()}},br:function(){return{x:this.right(),y:this.bottom()}},resize:function(t,e){e=e||this.center();var i=this.width,n=this.height;this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height),this.x=e.x-(e.x-this.x)/i*this.width,this.y=e.y-(e.y-this.y)/n*this.height},scale:function(t,e){t=Number(t)?{x:Number(t),y:Number(t)}:t,e=e||{x:0,y:0},this.x-=e.x,this.y-=e.y,this.x*=t.x,this.y*=t.y,this.x+=e.x,this.y+=e.y,this.width*=t.x,this.height*=t.y},clone:function(){return new e(this)},containsPoint:function(t){return this.left()<=t.x&&t.x<=this.right()&&this.top()<=t.y&&t.y<=this.bottom()},containsRect:function(t){return t.x>=this.x&&t.y>=this.y&&t.right()<=this.right()&&t.bottom()<=this.bottom()},toString:function(){return"<YRect {"+this.x+","+this.y+"} {"+this.width+", "+this.height+"}>"},round:function(t){this.x=i.round(this.x,t),this.y=i.round(this.y,t),this.width=i.round(this.width,t),this.height=i.round(this.height,t)},clampToRect:function(t){if(this.width>t.width||this.height>t.height)throw new Error(this+" is smaller than "+t);this.x=Math.max(this.x,t.x),this.x=Math.min(this.right(),t.right())-this.width,this.y=Math.max(this.y,t.y),this.y=Math.min(this.bottom(),t.bottom())-this.height},union:function(t){var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.right(),t.right())-e,r=Math.max(this.bottom(),t.bottom())-i;this.x=e,this.y=i,this.width=n,this.height=r}},e.intersection=function(t,i){var n=Math.max(t.left(),i.left()),r=Math.min(t.right(),i.right()),s=Math.max(t.top(),i.top()),o=Math.min(t.bottom(),i.bottom());return r>=n&&o>=s?new e({x:n,y:s,width:r-n,height:o-s}):null},t.exports=e},{"3rdParty/RandomBits/RBMath":3}],66:[function(require,t,exports){function e(t,n){var r="";_.isString(n)?r=n:_.forEach(e.FLAG2PROPERTY,function(e,i){return _.has(n,i)?void(n[i]&&(r+=i)):void(r+=t[e]?i:"")});var s=i(t);return s==r?t:new RegExp(t.source,r)}function i(t){var i=[];return _.forEach(e.FLAG2PROPERTY,function(e,n){i.push(t[e]?n:"")}),i.sort(),i.join("")}e.FLAG2PROPERTY={g:"global",i:"ignoreCase",m:"multiline"},t.exports=e},{}],67:[function(require,t,exports){function e(t){return/[\u4E00-\u9FFF\u3400-\u4dff\uf900-\ufaff]/.test(t)}var i=require("lodash"),n=function(t){t=t||{},this._values={},this.keyGetter=t.keyGetter||i.deburr};n.prototype={add:function(t){t.forEach(function(t){var e=this.keyGetter(t)||"";this._values[e]?this._values[e]instanceof Array?this._values[e].push(t):this._values[e]=[this._values[e],t]:this._values[e]=t},this)},get:function(t){var e=n.prefix2regexp(t),r=i.chain(this._values).map(function(t,i){return e.test(i)?t:null}).flatten().filter().uniq().value();return r.regexp=e,r}},n.prefix2regexp=function(t){var n=t.trim().split(" ");return n=i(n).map(function(r,s){return r?(r=i.escapeRegExp(r),
e(r)?r:s==n.length-1&&" "!=i.last(t)?"\\b("+r+")":"\\b("+r+")\\b"):null}).filter().join(".*?"),n?new RegExp(n,"i"):/\b\B/},t.exports=n},{lodash:36}],68:[function(require,t,exports){t.exports=function(t,e){return new Promise(function(i,n){$(t).one(e,function(){i()})})}},{}],69:[function(require,t,exports){t.exports=function(t,e,i,n,r,s){t.beginPath(),t.moveTo(e+s,i),t.lineTo(e+n-s,i),t.quadraticCurveTo(e+n,i,e+n,i+s),t.lineTo(e+n,i+r-s),t.quadraticCurveTo(e+n,i+r,e+n-s,i+r),t.lineTo(e+s,i+r),t.quadraticCurveTo(e,i+n,e,i+r-s),t.lineTo(e,i+s),t.quadraticCurveTo(e,i,e+s,i),t.closePath()}},{}],70:[function(require,t,exports){t.exports=function(t){var e=t&&t.constructor&&t.constructor.prototype;return t||(t={},e=t),e.safeGetItem=function(){try{return t.getItem.apply(t,arguments)}catch(t){return}},e.safeSetItem=function(){try{return t.setItem.apply(t,arguments)}catch(t){return}},e.safeGetObject=function(){try{return JSON.parse(t.getItem.apply(t,arguments))}catch(t){return}},e.safeSetObject=function(e,i){try{var n=JSON.stringify(i);return t.setItem(e,n)}catch(t){return}},t}},{}],71:[function(require,t,exports){function e(t,e){var r=[],s=0;t.lastIndex=0;for(var o=-1,a=0,c=1e3;s<e.length;){++a;var l=null;if(a>c?void 0:o==t.lastIndex||(o=t.lastIndex,l=t.exec(e)),!l){var h=e.substring(s,e.length);r.push({string:h,match:!1,index:s}),s=e.length;break}var p=l.index;if(p>s){var h=e.substring(s,p);r.push({string:h,match:!1,index:s}),s=p}if(s==p){var u=l[0];if(0==u.length)for(var d;++a,!(a>c);){if(d=t.exec(e),!d){t.lastIndex=e.length;break}if(d[0].length>0){t.lastIndex=d.index;break}if(t.lastIndex>=e.length){t.lastIndex=e.length;break}t.lastIndex=t.lastIndex+1}if(0==u.length&&r.length&&n.last(r).match);else if(1==l.length)r.push({string:u,match:!0,index:s}),s=p+u.length;else{l.shift();var f=i(l,u);n.forEach(f,function(t){t.index+=s}),r=r.concat(f),s=p+u.length}}t.lastIndex=Math.max(t.lastIndex,s)}return r}function i(t,e){var i=[],r=0;if(n.forEach(t,function(t){var n=t,s=e.indexOf(t,r);if(s>r){var o=e.substring(r,s);i.push({string:o,match:!1,index:r}),r=s}r==s&&(i.push({string:n,match:!0,index:r}),r+=n.length)}),r<e.length){var s=e.substring(r,e.length);i.push({string:s,match:!1,index:r}),r=e.length}return i}var n=require("lodash");t.exports=e},{lodash:36}],72:[function(require,t,exports){t.exports=function(t,e){function i(){var n=t()===!1;n||window.setTimeout(i,e)}if(!t)throw new Error("Callback needed");window.setTimeout(i,e)}},{}],73:[function(require,t,exports){var e=require("url");t.exports={edit:function(t,i,n){var r=e.parse(t+"");r.search=(r.hash||"").replace(/^#/,"?"),r=e.parse(e.format(r),!0),r.search="",r.query=r.query||{},r.query=_.assign(r.query,i),r.query=_.prune(r.query),n=n||[],n.forEach(function(t){delete r.query[t]}),r=e.format(r),r=e.parse(r);var s=e.parse(t+"");return s.hash=r.query?"#"+r.query:null,s=e.format(s)},get:function(t){var i=e.parse(t+"");return i.search=(i.hash||"").replace(/^#/,"?"),i=e.parse(e.format(i),!0),i.query}}},{url:118}],74:[function(require,t,exports){function e(t){t=t||{},this.center=_.clone(t.center||{x:0,y:0}),this.size=_.clone(t.size||{width:0,height:0}),this.zoomLevel=1,this.ee=n(this)}var i=require("yttro/lib/rect"),n=require("event-emitter");e.prototype={rectInWorld:function(){var t=new i({x:this.center.x-this.size.width/2,y:this.center.y-this.size.height/2,width:this.size.width,height:this.size.height});return t},zoom:function(t,e){t=t||1,e=_.clone(e||this.center),this.center.x-=e.x,this.center.y-=e.y,this.center.x/=t,this.center.y/=t,this.center.x+=e.x,this.center.y+=e.y,this.size.width/=t,this.size.height/=t,this.zoomLevel*=t,this.ee.emit("didChange",this)},zoomToLevel:function(t,e){this.zoom(t/this.zoomLevel,e)},translate:function(t){this.center.x+=t.x,this.center.y+=t.y,this.ee.emit("didChange",this)},translateCenterTo:function(t){this.center.x=t.x,this.center.y=t.y,this.ee.emit("didChange",this)},clampToWorldRect:function(t){if(this.size.width>t.width||this.size.height>t.height){var e=Math.max(this.size.width/t.width,this.size.height/t.height);this.zoom(e)}var i=_.clone(this.center);return this.center.x=Math.max(this.center.x,t.left()+this.size.width/2),this.center.x=Math.min(this.center.x,t.right()-this.size.width/2),this.center.y=Math.max(this.center.y,t.top()+this.size.height/2),this.center.y=Math.min(this.center.y,t.bottom()-this.size.height/2),this.ee.emit("didChange",this),i.x!=this.center.x||i.y!=this.center.y?{x:this.center.x-i.x,y:this.center.y-i.y}:void 0},adjustToSize:function(t){this.size.width=t.width,this.size.height=t.height,this.ee.emit("didChange",this)},isValid:function(){return Math.abs(this.center.x)<1/0&&Math.abs(this.center.y)<1/0&&this.size.width>0&&this.size.height>0&&this.zoomLevel>0},saveState:function(){return{center:_.clone(this.center),size:_.clone(this.size),zoomLevel:this.zoomLevel}},restoreState:function(t){this.center=_.clone(t.center),this.size=_.clone(t.size),this.zoomLevel=t.zoomLevel,this.ee.emit("didChange",this)}},t.exports=e},{"event-emitter":28,"yttro/lib/rect":65}],75:[function(require,t,exports){var e=(require("yttro/lib/hash-code"),require("yttro/lib/timeout-loop")),i={track:function(t,e,i){this.enabled&&(i=i||{},(!i.hld||this.hld)&&mixpanel.track(t,e))},trackOnce:function(t){return this._seenEvent[t]?void 0:(this._seenEvent[t]=(this._seenEvent[t]||0)+1,this.track.apply(this,arguments))},trackHLD:function(t,e,i){return i=i||{},i=_.merge(i,{hld:!0}),this.track(t,e,i)},trackApp:function(t,e,i){return i=_.merge({i:e},i),this.track(t,i)},init:function(t){return this._seenEvent?void 0:(this._seenEvent={},this.visitNum=Number(localStorage.getItem("vn")||localStorage.getItem("bi")||0),this.visitNum++,localStorage.setItem("vn",this.visitNum),this.hld=t.hld,void(this.enabled=t.enabled))},_waitForMixPanel:function(){return new Promise(function(t,i){e(function(){return mixpanel.cookie?(t(),!1):void 0},200)})},defaultPayload:function(t){return this.enabled?this._waitForMixPanel().then(function(){_.forEach(mixpanel.cookie.props,function(t,e){/(^\$|id$)/.test(e)||delete mixpanel.cookie.props[e]}),mixpanel.cookie.save(),mixpanel.register(t)}):void 0}};t.exports=i},{"yttro/lib/hash-code":54,"yttro/lib/timeout-loop":72}],76:[function(require,t,exports){function e(t){this.anchorApps=t.anchorApps,this.visibleAnchors=[],this._maxIconRatio=t.maxIconRatio,this._maxVisibleAnchors=world.numVisibleAnchors,this._breathingAnimators=[];for(var e=0;e<this._maxVisibleAnchors;++e){var n=s*(1+Math.random()/2);this._breathingAnimators.push(new i({delay:Math.random()*o,startTSOffset:Math.random()>.5?n:0,duration:n}))}this._deadmanBreathing=_.debounce(function(){this._deadmanBreathing.paused?this._deadmanBreathing():this._setBreathing(!0)}.bind(this),a),this.startBreathingAfterDelay()}function i(t){this.delay=t.delay||0,this.duration=t.duration||6e3,this.minScale=.9,this.maxScale=1.1,this.scale=1,this._tsOffset=0,this._lastTSOffset=t.startTSOffset||0}var n=require("yttro/lib/rect"),r=require("yttro/lib/lerp"),s=1500,o=2e3,a=3e3;e.prototype.refreshVisibleAnchors=function(t){var i=_.indexBy(this.visibleAnchors,"id"),r={};this.startBreathingAfterDelay();var s=2*Math.pow(1.5*this._maxIconRatio,2),o=2,a=this._maxVisibleAnchors,c=0,l=t.center();return _.chain(this.anchorApps).sortBy(function(t){return Math.pow(l.x-t.center.x,2)+Math.pow(l.y-t.center.y,2)}).forEach(function(l){if(c>=Math.min(o,a))return!1;if(!i[l.id]&&!e._anchorTooCloseToSet(r,l,s)){var h=n.intersection(l.rectInWorld(),t);h&&(r[l.id]=l,++c)}}).value(),_.chain(this.anchorApps).shuffle().forEach(function(t){return c>=a?!1:void(i[t.id]||e._anchorTooCloseToSet(r,t,s)||(r[t.id]=t,++c))}).value(),this.visibleAnchors=_.values(r),this.visibleAnchors},e._anchorTooCloseToSet=function(t,i,n){return _.some(t,function(t){return e._anchorsTooClose(t,i,n)})},e._anchorsTooClose=function(t,e,i){var n=Math.pow(t.rowIndex-e.rowIndex,2)+Math.pow(t.columnIndex-e.columnIndex,2);return i>n},e.prototype.setAnchorApps=function(t){this.anchorApps=t},e.prototype.render=function(t,e,i){if(this.visibleAnchors.length){for(var n=e.zoomLevel<=.95*(ymap.MAX_ZOOM_LEVEL-ymap.MIN_ZOOM_LEVEL),s=e.rectInWorld(),o=0;o<this.visibleAnchors.length;++o){var a=this.visibleAnchors[o],c=ymap.tileManager.highResLayer().tileForApp(a);if(c&&c.isLoaded()){t.save();var l=a.scaledRectInWorld();if(t.translate(l.center().x,l.center().y),t.scale(l.scaledBy,l.scaledBy),n){var h=Math.abs(s.center().x-l.center().x),p=r.remap(0,s.width/2,h,1.2,.8);t.scale(p,p)}var u=this._breathingAnimators[o];u&&n&&u.render(t,i),c.renderApp(t,a),t.restore()}}this.breathing&&ymap.requestRender()}},e.prototype.saveState=function(){return{visibleAnchors:_.clone(this.visibleAnchors,!1)}},e.prototype.restoreState=function(t){this.visibleAnchors=t.visibleAnchors},e.prototype._setBreathing=function(t){this.breathing=t,this._breathingAnimators.forEach(function(e){e.setPaused(!t)}),this.breathing&&ymap.requestRender()},e.prototype.startBreathingAfterDelay=function(){this._deadmanBreathing.paused=!1,this._setBreathing(!1),this._deadmanBreathing()},e.prototype.stopBreathing=function(){this._setBreathing(!1),this._deadmanBreathing.paused=!0},t.exports=e,i.prototype={setPaused:function(t){this.paused=t,t&&(this._tsOffset=this._lastTSOffset,delete this._startTS,delete this._2ndTick)},render:function(t,e){if(this.paused)return void t.scale(this.scale,this.scale);if(this._startTS||(this._startTS=e+this.delay),e<this._startTS)return void t.scale(this.scale,this.scale);var i=e-this._startTS+this._tsOffset;i/=this.duration,i=Math.sin(Math.PI*i);var n=r.remap(-1,1,i,this.minScale,this.maxScale);this.scale=n,t.scale(n,n),e-this._startTS==this.duration&&(this._startTS=e),this._lastTSOffset=e-this._startTS+this._tsOffset}}},{"yttro/lib/lerp":59,"yttro/lib/rect":65}],77:[function(require,t,exports){function e(t){this.iconSize=t.iconSize,this.numRows=t.numRows,this.numColumns=t.numColumns,this._apps=[],this._deserializeApps(t.apps),this.ee=r(this);var e=s.safeGetObject("pa")||[];e.length||(e=t.promotedApps),this._deserializePromotedApps(e),i.get({url:"//"+world.yttroServer+"/promoted_apps?type=AGA"}).then(function(t){t=t||[],s.safeSetObject("pa",t),this._deserializePromotedApps(t),this.ee.emit("promotedAppsDidChange",this)}.bind(this))}var i=require("yttro/lib/ajax"),n=require("yttro/model/app-item"),r=require("event-emitter"),s=require("yttro/lib/safe-storage")(self.localStorage);e.prototype.getLinearIndex=function(t,e){if(void 0===e){var i=t;t=i.rowIndex,e=i.columnIndex}return e*this.numRows+t},e.prototype.appAtWorldPoint=function(t){var e=Math.floor(t.x/this.iconSize),i=Math.floor(t.y/this.iconSize);return this._apps[this.getLinearIndex(i,e)]},e.prototype.appAtRowColumn=function(t,e){return this._apps[this.getLinearIndex(t,e)]},e.prototype.appAtLinearIndex=function(t){return this._apps[t]},e.prototype.appWithId=function(t){var e=_.findIndex(this._apps,"id",t+"");return 0>e?null:this._apps[e]},e.prototype.appsInRect=function(t){var e=[],i={x:0,y:0};for(i.x=t.left();i.x<t.right();i.x+=this.iconSize)for(i.y=t.top();i.y<t.bottom();i.y+=this.iconSize){var n=this.appAtWorldPoint(i);n&&e.push(n)}return e},e.prototype.promotedApps=function(){return _.filter(this._apps,_.method("isPromoted"))},e.prototype.replaceAppAtLinearIndex=function(t,e){var i=Math.floor(t/this.numRows),r=(t-i*this.numRows,this.appWithId(e));if(r)throw new Exception("App already exists with id "+e);var s=n.create({i:e});s.setRowAndColumnIndex(t%this.numRows,Math.floor(t/this.numRows));var o=this._apps[t];return this._apps[t]=s,o},e.prototype._deserializeApps=function(t){_.forEach(t,function(t){var e=n.create(t);if(_.isFinite(t.r)&&_.isFinite(t.c))e.setRowAndColumnIndex(Number(t.r),Number(t.c));else{var i=this._apps.length;e.setRowAndColumnIndex(i%this.numRows,Math.floor(i/this.numRows))}var i=this.getLinearIndex(e),r=this._apps[i];r?(r.id!=e.id&&void 0,r._mergeDict(e)):this._apps[i]=e}.bind(this))},e.prototype._deserializePromotedApps=function(t){return _(t).map(function(t){var e=this.appWithId(t.i);return e?(e.setPromotedURL(t.url),e):null}.bind(this)).filter().value()},t.exports=e},{"event-emitter":28,"yttro/lib/ajax":47,"yttro/lib/safe-storage":70,"yttro/model/app-item":78}],78:[function(require,t,exports){function e(t){this.ee=a(this),t instanceof Array?this.restoreState(t):this._mergeDict({i:t.i||t.id,name:t.n||t.name,rating:t.a||t.rating,ratingCount:t.o||t.ratingCount,categoryId:t.g||t.categoryId,price:t.p||t.price,videos:t.v||t.videos,downloadCount:t.d||t.downloadCount,developerName:t.e||t.developerName,cluster:t.cluster}),this.isInvalidApp=!1;var e=world.icon_padding,i=world.icon_size;this.size={width:e+i,height:e+i},this.videos&&(this.videos=_.take(this.videos,d),this.videos.forEach(function(t){t.name=s(t.name),t.name=t.name.substring(0,100)}))}function i(){e.apply(this,arguments)}function n(t){e.apply(this,arguments),this._url=t.u}function r(t){e.apply(this,arguments)}function s(t){return t?(t=o.decodeHTML(t),t=t.replace(/<br\s?\/?>/gi,"\n"),t=t.replace(/<p.*>/gi,"\n"),t=t.replace(/&nbsp;/gi," "),t=t.replace(/\u00a0/g," "),t=t.replace(/<a.*href="(.*?)".*>(.*?)<\/a>/gi," $2 (Link->$1) "),t=t.replace(/<(?:[^>])*?>/g,"")):t}var o=require("entities"),a=require("event-emitter"),c=require("yttro/lib/id-util"),l=require("yttro/lib/rect"),h=require("yttro/lib/all-group-matches"),p=require("yttro/lib/ajax"),u=require("yttro/lib/extend"),d=5;e.prototype={setRowAndColumnIndex:function(t,e){return isFinite(this.rowIndex)&&this.rowIndex!=t||isFinite(this.columnIndex)&&this.columnIndex!=e?void 0:(this.rowIndex=t,this.columnIndex=e,void(this.center={x:(this.columnIndex+.5)*this.size.width,y:(this.rowIndex+.5)*this.size.height}))},rectInWorld:function(){return new l({x:this.center.x-this.size.width/2,y:this.center.y-this.size.height/2,width:this.size.width,height:this.size.height})},rectInWorldWithoutPadding:function(){var t=this.rectInWorld(),e=world.icon_padding;return t.x+=e/2,t.y+=e/2,t.width-=e,t.height-=e,t},scaledRectInWorld:function(t){t||(t=ymap.MAX_ZOOM_LEVEL/ymap.viewport.zoomLevel);var e=this.rectInWorld();return e.scale(t,e.center()),e.clampToRect(ymap.worldRect),e.scaledBy=t,e},isPromoted:function(){return!!this._promotedURL},setPromotedURL:function(t){this._promotedURL=t,this.ee.emit("didChange",this)},getAffiliateURL:function(){return this._promotedURL?this._promotedURL:this._getDefaultAffiliateURL()},_getDefaultAffiliateURL:function(){throw new Error("Subclass need impl")},isLoaded:function(){return this.isInvalidApp?!0:this.screenshots&&(this.screenshots.length||0===this.screenshots.length)},_mergeDict:function(t){if(this.rating=Number(t.rating||this.rating||0),this.ratingCount=Number(t.ratingCount||this.ratingCount||0),this.downloadCount=Number(t.downloadCount||this.downloadCount||0),this.developerName=t.developerName||this.developerName,this.categoryId=Number(t.categoryId||this.categoryId||0),this.originalId=t.i||this.originalId,this.id=c.baseId(this.originalId)||c.baseId(t.id)||this.id,!this.id)throw new Error("Dictionary missing id");if(this.name=o.decodeHTML(t.name||this.name||""),void 0===t.price);else{var e=t.price||this.price||"";e+="",e=e.replace(/[^0-9.]/,""),e=Number(e)||0,this.price=e}this.videos=t.videos||this.videos,this.cluster=t.cluster||this.cluster,this.screenshots=t.screenshots||this.screenshots,this.description=t.description||this.description,this.ee.emit("didChange",this)},_normalizeFullDataFromStore:function(){throw new Error("need impl")},loadFullData:function(){return this._loadFullDataPromise||(this._loadFullDataPromise=this._normalizeFullDataFromStore().then(function(t){return this._mergeDict(t),delete this._loadFullDataPromise,this}.bind(this)).error(function(t){return this.isInvalidApp=!0,this.name=this.name||"",this.ee.emit("didChange",this),self.ymap&&YTracking.trackApp("na",ymap.appItemManager.getLinearIndex(this),{id:this.id}),delete this._loadFullDataPromise,this}.bind(this))),this._loadFullDataPromise},saveState:function(){return _.map(e.SERIALIZE_ORDER,function(t){return this[t]}.bind(this))},restoreState:function(t){var i={};try{_.forEach(t,function(t,n){var r=e.SERIALIZE_ORDER[n];if(!r)throw new Error("No key at index "+n+" for value "+t);return i[r]=t})}catch(t){return}this._mergeDict(i)}},e.SERIALIZE_ORDER=["id","name","rating","ratingCount","categoryId","price","videos"],u(e,i),i.prototype._getDefaultAffiliateURL=function(){if(!world.affiliateToken)return"https://itunes.apple.com/"+I18n.countryCode+"/app/games/id"+this.id;var t="https://itunes.apple.com/"+I18n.countryCode+"/app/games/id"+this.id+"?at="+world.affiliateToken;return t},i.prototype._normalizeFullDataFromStore=function(){var t="";return I18n.countryCode&&"us"!=I18n.countryCode&&(t="&country="+I18n.countryCode),p.get({dataType:"JSONP",cache:!0,url:"https://itunes.apple.com/lookup?id="+this.id+t}).then(function(t){if(t=t.results[0],!t)return Promise.reject(new Error("App removed"));var e=s(t.description),i=t.genres||[];return i=_(i).reverse().value(),{name:t.trackName,ratingCount:Math.max(Number(this.ratingCount)||0,Number(t.userRatingCount)||0),rating:this.rating||t.averageUserRating,price:t.price,categoryStrings:i,screenshots:t.screenshotUrls,description:e,developerName:t.artistName,iconURL:t.artworkUrl100||t.artworkUrl60||t.artworkUrl512}}.bind(this))},u(e,n),n.prototype._getDefaultAffiliateURL=function(){return"alimarket://details?id="+this.id},n.prototype._normalizeFullDataFromStore=function(){var t="http://apps.yunos.com/api/app/yttrodetail?source=yttro&pkg="+this.id,e={dataType:"JSONP",url:t};return p.get(e).then(function(t){var e=_.get(t,"result.desc"," "),i=_.chain(t).get("result.previews",[]).map(function(t){return(t||{}).addr||""}).filter().value();return{screenshots:i,description:e}})},u(e,r),r.prototype._getDefaultAffiliateURL=function(){return"https://play.google.com/store/apps/details?id="+this.id},r.prototype._normalizeFullDataFromStore=function(){var t="https://play.google.com/store/apps/details?id="+this.id,e={dataType:"html",url:"http://crossorigin.me/"+t};return p.get(e).then(function(t){var e=/itemprop="description"[^>]*>(.*?)<[^>]*class="show-more-end"/gi,i=h(e,t);i=_.first(i),i=s(i);var n=/<([^>]*?itemprop="screenshot"[^>]*?)>/gi,r=/src="([^"]*?)"/gi,o=_(h(n,t)).map(function(t){return h(r,t)}).flatten().uniq().value();return o.length||i?{screenshots:o,description:i}:Promise.reject(new Error("App removed"))})},t.exports={create:function(t){var e=t.appType||(self.world||{}).appType;switch(e){case"ALI":return new n(t);case"AGA":return new i(t);case"DGA":return new r(t);default:throw new Error("Unknown app type: "+e)}}}},{entities:7,"event-emitter":28,"yttro/lib/ajax":47,"yttro/lib/all-group-matches":48,"yttro/lib/extend":53,"yttro/lib/id-util":57,"yttro/lib/rect":65}],79:[function(require,t,exports){function e(t){this.categories=_.clone(t.categories)||{}}e.prototype={stringForId:function(t){var e=this.categories[t];return e?I18n.t.call(I18n,e):""},categoryIdsForStrings:function(t){return _(t).map(function(t){return _.findKey(this.categories,function(e){return e==t})}.bind(this)).filter().value()},defaultCategoryId:function(){return this._defaultCategoryId||(this._defaultCategoryId=this.categoryIdsForStrings([I18n.t("Games")])[0]),this._defaultCategoryId}},t.exports=e},{}],80:[function(require,t,exports){function e(t){this._imgScale=t.imgScale,this._tileSize=t.tileSize,this._numTiles=t.numTiles;var e=t.tileSrcs||[],i=t.tileImgs||[];this._tiles=[];for(var n=this.minTileX();n<=this.maxTileX();++n)for(var r=this.minTileY();r<=this.maxTileY();++r){var o=this.tileXY2Index(n,r),a=this._tiles[o]||new s({center:{x:(n+.5)*this._tileSize.width,y:(r+.5)*this._tileSize.height},size:{width:this._tileSize.width,height:this._tileSize.height},tileX:n,tileY:r,scale:t.imgScale,img:i[o],src:e[o]});this._tiles[o]=a}}function i(t){if(this.worldSize=t.worldSize,!this.worldSize||!this.worldSize.width||!this.worldSize.height)throw Error("No world size");t.tileLayerDicts||[],this._tileLayers=_(t.tileLayerDicts).map(function(t){var i=t.numTiles,n=t.imgScale,r={width:Math.round(this.worldSize.width/i),height:Math.round(this.worldSize.height/i)},s=new e({numTiles:i,tileSize:r,imgScale:n,tileImgs:t.tileImgs,tileSrcs:t.tiles});return s}.bind(this)).sort(function(t){return 1/t.numTiles}).value(),this.ee=n(this)}var n=require("event-emitter"),r=require("yttro/lib/rect"),s=(require("yttro/lib/color"),require("yttro/model/tile"));require("3rdParty/RandomBits/RBMath");e.prototype.minTileX=function(){return 0},e.prototype.minTileY=function(){return 0},e.prototype.maxTileX=function(){return this._numTiles-1},e.prototype.maxTileY=function(){return this._numTiles-1},e.prototype.tileXY2Index=function(t,e){return t<this.minTileX()||t>this.maxTileX()?-1:e<this.minTileY()||e>this.maxTileY()?-1:t*(this.maxTileY()+1)+e},e.prototype.tileAtXY=function(t,e){return this._tiles[this.tileXY2Index(t,e)]},e.prototype.tileAtWorldPoint=function(t){var e=Math.floor(t.x/this._tileSize.width),i=Math.floor(t.y/this._tileSize.height);return this.tileAtXY(e,i)},e.prototype.tilesOverlappingRect=function(t){var e=this._tileSize,i=this,n=Math.floor(t.left()/e.width);n=Math.max(n,i.minTileX()),n=Math.min(n,i.maxTileX());var r=Math.ceil(t.right()/e.width)-1;r=Math.max(r,i.minTileX()),r=Math.min(r,i.maxTileX());var s=Math.floor(t.top()/e.height);s=Math.max(s,i.minTileY()),s=Math.min(s,i.maxTileY());var o=Math.ceil(t.bottom()/e.height)-1;o=Math.max(o,i.minTileY()),o=Math.min(o,i.maxTileY());for(var a=[],c=n;r>=c;++c)for(var l=s;o>=l;++l)this.tileAtXY(c,l),a.push(this.tileAtXY(c,l));return a},e.prototype.tileForApp=function(t){return this.tileAtWorldPoint(t.center)},e.prototype.isLoaded=function(){return _.every(this._tiles,function(t){return t.isLoaded()})},i.prototype.tileLoadSpiral=function(t,e){t=t||{x:this.worldSize.width/2,y:this.worldSize.height/2};var i=_(this._tileLayers).map(function(t){return t._tiles}).flatten(!0).sortBy(function(i){return Math.pow(t.x-i.center.x,2)+Math.pow(t.y-i.center.y,2)+1e8*Math.pow(e-i.scale,2)}).value();return i};var o=5;i.prototype.updateLoadQueue=function(t,e){if(this._loadQueue=this._loadQueue||[],!(this._loadQueue.length>=o)){this._startingWPoint=t;var i=this.tileLoadSpiral(t,e);return _.forEach(i,function(t){return this._loadQueue.length>=o?!1:void(t.isLoaded()||this._loadQueue.indexOf(t)>=0||(this._loadQueue.push(t),t.load().then(function(){this._loadQueue=_.filter(this._loadQueue,function(t){return!t.isLoaded()}),this.ee.emit("tileDidLoad",this,t)}.bind(this))))}.bind(this)),this._loadQueue.length}},i.prototype.tileForApp=function(t){var e;return _.forEach(this._tileLayers,function(i){return e=i.tileForApp(t),e?!1:void 0}),e},i.prototype.tilesForApp=function(t){return _(this._tileLayers).map(function(e){return e.tileForApp(t)}.bind(this)).filter().value()},i.prototype.loadedTileForApp=function(t){var e;return _.forEach(this._tileLayers,function(i){e=i.tileForApp(t);var n=e&&e.isLoaded();return n?!1:void(e=null)}),e},i.prototype.highResLayer=function(){return _.first(this._tileLayers)},i.prototype.lowResLayer=function(){return _.last(this._tileLayers)},i.prototype.tileLayersReversed=function(){return this._tileLayersReversed||(this._tileLayersReversed=_.clone(this._tileLayers).reverse()),this._tileLayersReversed};var a=1,c=2,l=3;s.prototype._renderUsingLayers=function(t,e,i){this._animations=this._animations||[],this._state=this._state||a,this._canRender(e)?this._state==a?(this._state=c,this._prepLoadingAnimation(this._animations),this._renderUsingAnimations(t,e,this._animations,i)):this._state==c&&this._animations.length?this._renderUsingAnimations(t,e,this._animations,i):(this._state=l,this._renderMainImg(t,e)):(this._state=a,this._renderLoadingImg(t,e))},s.prototype._canRender=function(t){return this._rectInWorld=this._rectInWorld||this.rectInWorld(),_.any(t,function(t){var e=t.tileAtWorldPoint(this._rectInWorld);return e&&e.isLoaded()}.bind(this))},s.prototype._loadingTileFromTileLayers=function(t){var e;return _.find(t,function(t){var i=t.tileAtWorldPoint(this._rectInWorld);return i?(e=i,i):null}.bind(this)),e},s.prototype._renderLoadingImg=function(t,e){this._rectInWorld=this._rectInWorld||this.rectInWorld();var i=this._loadingTileFromTileLayers(e),n=s._getLoadingTexture(i.scale,i.size);if(this.size.width==i.size.width)this._renderUsingImg(t,n);else{var r=i.rectInImg(this._rectInWorld);this._renderUsingImg(t,n,r)}};(new Date).getTime();s.initialRenders={},s.rir=function(t){},s.prototype._loadedTileFromTileLayers=function(t){var e;return _.find(t,function(t){var i=t.tileAtWorldPoint(this._rectInWorld);return i&&i.isLoaded()?(e=i,i):null}.bind(this)),e},s.prototype._renderMainImg=function(t,e){this._rectInWorld=this._rectInWorld||this.rectInWorld();var i=this._loadedTileFromTileLayers(e);if(i){var n=i._img;if(this.size.width==i.size.width)this._renderUsingImg(t,n);else{var r=i.rectInImg(this._rectInWorld);this._renderUsingImg(t,n,r)}}},s.prototype._renderUsingImg=function(t,e,i){i?(t.save(),t.translate(this.center.x,this.center.y),s.rir(e),t.drawImage(e,i.x,i.y,i.width,i.height,-this.size.width/2,-this.size.height/2,this.size.width,this.size.height),t.restore()):(t.save(),t.translate(this.center.x,this.center.y),s.rir(e),t.drawImage(e,-this.size.width/2,-this.size.height/2,this.size.width,this.size.height),t.restore())},s.prototype.renderDebug=function(t){},s.prototype._prepLoadingAnimation=function(t){this._rectInWorld=this._rectInWorld||this.rectInWorld();for(var e={width:6*(world.icon_size+world.icon_padding),height:6*(world.icon_size+world.icon_padding)},i=0;i<this._rectInWorld.width;i+=e.width)for(var n=0;n<this._rectInWorld.height;n+=e.height){var s=new r({x:i+this._rectInWorld.x,y:n+this._rectInWorld.y,width:e.width,height:e.height});t.push({wRect:s,delay:Math.random()*(200*(window._SLOW_ANIMATIONS?10:1)*2.5),duration:200*((window._SLOW_ANIMATIONS?10:1)+2*Math.random())})}},s.prototype._renderUsingAnimations=function(t,e,i,n){this._renderLoadingImg(t,e),i.startTS=i.startTS||n,t.save(),i.forEach(function(r){r.done=n>=i.startTS+r.delay+r.duration;var o=s.getAlpha(i.startTS+r.delay,r.duration,n);t.globalAlpha=o;var a=this._loadedTileFromTileLayers(e);if(a){var c=a.rectInImg(r.wRect);s.rir(a._img),t.drawImage(a._img,c.x,c.y,c.width,c.height,r.wRect.x,r.wRect.y,r.wRect.width,r.wRect.height)}}.bind(this)),t.restore(),i.done=_.all(i,"done"),i.done&&(i.length=0,delete i.startTS),ymap.requestRender()};var h=require("yttro/lib/lerp");s.getAlpha=function(t,e,i){var n=h.remap(t,t+e,i,0,1);return n=Math.max(0,n),n=Math.min(1,n)},i.prototype._maybeRenderViewportUsingLowResLayer=function(t,e){var i=this.lowResLayer(),n=this.highResLayer().tilesOverlappingRect(e);if(!_.all(n,{_state:l}))return!1;var o=i.tilesOverlappingRect(e);return _.all(o,_.method("isLoaded"))?(o.forEach(function(i){i._rectInWorld=i._rectInWorld||i.rectInWorld();var n=r.intersection(i._rectInWorld,e),o=i.rectInImg(n);s.rir(i._img),t.drawImage(i._img,o.x,o.y,o.width,o.height,n.x,n.y,n.width,n.height)}),!0):!1};var p=16;i.prototype.renderViewport=function(t,e,i){var n=i.lowRes||e.zoomLevel<.5*ymap.MAX_ZOOM_LEVEL,r=this._tileLayers;n&&(r=this.tileLayersReversed());var s=e.rectInWorld(),o=i.ts,a=this.highResLayer().tilesOverlappingRect(s);if(r[0]==this.lowResLayer()){var c=this._maybeRenderViewportUsingLowResLayer(t,s);if(c)return}var l=!1,h=(new Date).getTime();a.forEach(function(e){e._renderUsingLayers(t,r,o);var i=(new Date).getTime()-h;i>p&&r[0]!=this.lowResLayer()&&(l=!0,r=this.tileLayersReversed())}.bind(this)),l&&ymap.requestRender(),this.renderLoadingIndicators(t)},i.prototype.renderLoadingIndicators=function(t){},t.exports=i},{"3rdParty/RandomBits/RBMath":3,"event-emitter":28,"yttro/lib/color":50,"yttro/lib/lerp":59,"yttro/lib/rect":65,"yttro/model/tile":81}],81:[function(require,t,exports){(function(e){function i(t){this._img=t.img,e.Image&&!this._img&&(this._img=new Image),this.size=_.clone(t.size||{width:this._img.width,height:this._img.height}),this.center=_.clone(t.center||{x:this.size.width/2,y:this.size.height/2}),this.scale=t.scale||1,this.tileX=t.tileX,this.tileY=t.tileY,this.src=t.src}var n=require("yttro/lib/ajax-image"),r=(require("yttro/lib/ajax"),require("yttro/lib/rect")),s=(require("yttro/lib/mobile-check"),require("yttro/lib/rounded-rect"));i.prototype={load:function(t){return this._isLoaded?Promise.resolve(this):(this._loadPromise||(this._loadPromise=Promise.all([this.loadImg(t)]).then(function(){return this._isLoaded=!0,ymap.appItemManager.appsInRect(this.rectInWorld()).forEach(function(t){t.ee.emit("didChange",t)}),ymap.requestRender(),delete this._loadPromise,this}.bind(this))),this._loadPromise)},loadImg:function(t){if(this._imgLoadPromise)return this._imgLoadPromise;if(/^data:/.test(this._img.src))return Promise.resolve(this);if(this._img instanceof HTMLCanvasElement)return Promise.resolve(this);if(this._img.src&&this._img.complete)return Promise.resolve(this);if(!this.src)return Promise.reject(new Error("No image src for tile "+this.scale+"x "+this.tileX+","+this.tileY));var e=this._img.src;return this._img.src||(e=this.src,e!=this._img.src)?(this._imgLoadPromise=n.get(_.merge(t||{},{url:e})).then(self.RBDebug?RBDebug.setTimeoutPromise(1e3*(window.TILE_DELAY||0)*(1+2*Math.random())):function(){return arguments[0]}).then(function(t){return delete this._imgLoadPromise,this._img=t,this._img.id=this.tileX+"x"+this.tileY+"@"+this.scale,this}.bind(this)).catch(function(t){throw delete this._imgLoadPromise,t}.bind(this)),this._imgLoadPromise):Promise.resolve(this)},isLoaded:function(){return this._isLoaded?!0:(this._img instanceof self.HTMLCanvasElement?this._isLoaded=!0:this._isLoaded=this._img&&this._img.src&&this._img.complete,this._isLoaded)},rectInWorld:function(){return new r({x:this.center.x-this.size.width/2,y:this.center.y-this.size.height/2,width:this.size.width,height:this.size.height})},rectInImg:function(t){var e=t.clone();return e.x-=this.center.x-this.size.width/2,e.y-=this.center.y-this.size.height/2,e.scale(this.scale),e},renderApp:function(t,e){this.isLoaded()&&(t.save(),t.globalCompositeOperation="destination-out",i.pathAppIconMask(t,-e.size.width/2,-e.size.height/2,e.size.width,e.size.height),t.fillStyle="black",t.fill(),t.globalCompositeOperation="destination-over",this._renderAppNoMask(t,e),t.globalCompositeOperation="source-over",i.pathAppIconMask(t,-e.size.width/2,-e.size.height/2,e.size.width,e.size.height),t.shadowBlur=10,t.shadowColor="white",t.fillStyle="transparent",t.fill(),t.strokeStyle="#ddd",t.stroke(),t.restore())},_renderAppNoMask:function(t,e){var i=this.rectInImg(e.rectInWorldWithoutPadding());t.drawImage(this._img,i.x,i.y,i.width,i.height,-e.size.width/2,-e.size.height/2,e.size.width,e.size.height)}},i._getLoadingTexture=function(t,e){if(this._loadingTextures=this._loadingTextures||{},!this._loadingTextures[t]){var n=document.createElement("canvas");n.width=e.width*t,n.height=e.height*t;var r=n.getContext("2d"),s=world.icon_size+world.icon_padding;r.save(),r.scale(t,t);for(var o=0;o<e.width;o+=s)for(var a=0;a<e.height;a+=s)i.drawAppIconMask(r,o+world.icon_padding/2,a+world.icon_padding/2,world.icon_size,world.icon_size);r.restore(),r.globalCompositeOperation="destination-over",r.fillStyle=world.tileBGColor,r.fillRect(0,0,r.canvas.width,r.canvas.height),this._loadingTextures[t]=n,n.id="ld@"+t}return this._loadingTextures[t]},i.pathAppIconMask=function(t,e,i,n,r){s(t,e,i,n,r,22)},i.drawAppIconMask=function(t,e,i,n,r){t.save(),t.globalCompositeOperation="source-over",this.pathAppIconMask(t,e,i,n,r),t.fillStyle="#ddd",t.fill(),t.restore()},t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"yttro/lib/ajax":47,"yttro/lib/ajax-image":46,"yttro/lib/mobile-check":62,"yttro/lib/rect":65,"yttro/lib/rounded-rect":69}],82:[function(require,t,exports){var e=require("lodash"),i={"AGA-v3":{affiliateToken:"1010l4FA",v:3,appType:"AGA",jsonURL:"map/AGA-v4/AGA_4_trim.json",tileFormat:"map/AGA-v3/AGA_3_{invScale}x_{y}_{x}.jpg",
tileLayers:[{numTiles:15,imgScale:1},{numTiles:5,imgScale:1/3}]},"AGA-v7":{affiliateToken:"1010l4FA",v:7,appType:"AGA",jsonURL:"map/AGA-v7/AGA_7_trim.json",tileFormat:"map/AGA-v7/AGA_7_{invScale}x_{y}_{x}.jpg",tileLayers:[{numTiles:15,imgScale:1},{numTiles:5,imgScale:1/3}]},"AGA-v8":{affiliateToken:"1010l4FA",v:8,appType:"AGA",jsonURL:"map/AGA-v8/AGA_8_trim.json",tileFormat:"map/AGA-v8/AGA_8_{invScale}x_{y}_{x}.jpg",tileLayers:[{numTiles:15,imgScale:1},{numTiles:5,imgScale:1/3}]},"ALI-v4.1":{v:4,appType:"ALI",jsonURL:"map/ALI-v4.1/ALI_4_trim.json",tileFormat:"map/ALI-v4.1/ALI_4_{invScale}x_{y}_{x}.jpg",tileLayers:[{numTiles:9,imgScale:1},{numTiles:3,imgScale:.25}]},eval:{v:4,appType:"AGA",jsonURL:"map/eval/metadata.json",tileFormat:"map/eval/aga_icon80_padding4_3x.jpg",tileLayers:[{numTiles:1,imgScale:1/3}]}};e.forEach(i,function(t,e){t.FPS=t.FPS||60,t.maxPixelRatio=t.maxPixelRatio||10,t.numVisibleAnchors=t.numVisibleAnchors||15,t.tileBGColor=t.tileBGColor||"#ffffff",t.yttroServer="yttroserver.appspot.com",t.track_rate=.5,t.tileLayers&&t.tileFormat&&t.tileLayers.forEach(function(e){for(var i=[],n=e.numTiles,r=1/e.imgScale,s=0;n>s;++s)for(var o=0;n>o;++o){var a=t.tileFormat;a=a.replace("{x}",s),a=a.replace("{y}",o),a=a.replace("{invScale}",r),i.push(a)}e.tiles=i})}),i.default=i["AGA-v7"],t.exports=i},{lodash:36}],83:[function(require,t,exports){var e=!1;t.exports=function(t){t&&!e&&(e=!0,alert(t))}},{}],84:[function(require,t,exports){function e(t){var e=t.parentNode,n="app-search";this.$node=$(e).find("#"+n),this.$node.length||(this.$node=$('<div id="'+n+'"></div>').appendTo($(e))),this.node=this.$node[0],this._apps=t.apps,this.ee=i(this),this.$node.on("click",function(t){return this.hasFocus()?void($(t.target).closest(".typeahead").length||this.blur()):void this.focus()}.bind(this)),this.$node.on("touchmove",function(t){$(t.target).closest(".typeahead-results").length||t.preventDefault()}.bind(this)),$(document).on("keydown",function(t){(114==t.keyCode||(t.ctrlKey||t.metaKey)&&70==t.keyCode)&&(this.focus(),t.preventDefault())}.bind(this)),this.$node.on("keydown",function(t){27==t.keyCode&&this.hasFocus()&&(this.blur(),t.preventDefault())}.bind(this)),$(window).on("orientationchange",function(){o()&&(o.isIPad||(window.orientation%180!=0?(this._hadFocus=this.hasFocus(),this.blur()):this._hadFocus&&(this.focus(),this._hadFocus=!1)))}.bind(this)),this._render()}var i=require("event-emitter"),n=require("classnames"),r=require("yttro/lib/regexp-match"),s=require("yttro/lib/split-with-groups"),o=require("yttro/lib/mobile-check"),a=require("yttro/views/react-typeahead").Typeahead,c=require("yttro/views/app-tooltip/top-card"),l=35;e.prototype={hasFocus:function(){return this.$node.hasClass("focus")},blur:function(){YTracking.trackHLD("_s_d",{q:this.$node.find(".typeahead-input").val()}),this.ee.emit("willBlur",this),$("html").removeClass("searching"),this.$node.find(".typeahead-input").blur(),this.$node.removeClass("focus"),this.ee.emit("didBlur",this)},focus:function(){if(YTracking.trackHLD("_s_s"),this.ee.emit("willFocus",this),$("html").addClass("searching"),this.$node.addClass("focus"),this.$node.find(".typeahead-input").focus(),!o()){var t=this.$node.find(".typeahead-input")[0];t&&t.setSelectionRange(0,t.value.length)}window.setTimeout(function(){this.ee.emit("didFocus",this)}.bind(this),50)},setApps:function(t){this._apps=t,this._render()},_onSelect:function(t,e){this.blur(),this.ee.emit("didSelect",this,t,e)},_onInputBlur:function(t){var e=100;window.setTimeout(function(){this.hasFocus()&&this.blur()}.bind(this),e)},_render:function(){var t=React.createElement(p,{apps:this._apps,onSelect:this._onSelect.bind(this),onBlur:this._onInputBlur.bind(this),limitResults:l});React.render(t,this.node)}};var h=o()?400:0,p=React.createClass({displayName:"AppSearchReact",propTypes:{apps:React.PropTypes.array.isRequired,limitResults:React.PropTypes.number.isRequired},getInitialState:function(){return this._boundInit=_.debounce(this._initScrollingNode,100),this._boundForceUpdate=function(){this.forceUpdate()}.bind(this),this._stateFromProps(this.props)},componentWillReceiveProps:function(t){this.setState(this._stateFromProps(t))},_stateFromProps:function(t){return this._nameIndex=new r({keyGetter:function(t){return _.deburr(t.name)}}),this._nameIndex.add(t.apps),{matchInfos:_.get(this,"state.matchInfos")||[]}},componentDidUpdate:function(t,e){if(this._initScrollingNode(),_.get(e,"inputValue")!==_.get(this,"state.inputValue")){var i=React.findDOMNode(this.refs.typeahead.refs.sel);i&&(i.scrollTop=1)}o.isIOS&&(this._toggleZoom=this._toggleZoom||_.debounce(function(){if(!this.state.inputValue){var t=React.findDOMNode(this);$(t).find("input").css({zoom:Number(this._toggleZoomValue)}),this._toggleZoomValue=!this._toggleZoomValue}}.bind(this),100),window.setTimeout(this._toggleZoom))},componentDidMount:function(){this._initScrollingNode(),window.addEventListener("resize",this._boundForceUpdate),DEBUG&&$(document).on("keyup",function(t){if(16==t.keyCode){var e=this.state.matchInfos;if(e.length){e.map(function(t){return t.app.originalId.replace(/_id/,"/id")}).join("\n")}}}.bind(this))},componentWillUnmount:function(){this._removeListeners(),window.removeEventListener("resize",this._boundForceUpdate)},_onFocus:function(){window.setTimeout(function(){this._initScrollingNode()}.bind(this),100)},_initScrollingNode:function(){var t=React.findDOMNode(this.refs.typeahead.refs.sel);if(!t)return void window.setTimeout(this._boundInit,100);var e=document.body.clientHeight,i=t.scrollTop;$(t).css({height:""}),t.scrollHeight?$(t).css({height:Math.min(e-$(t).offset().top,t.scrollHeight-2)}):$(t).css({height:e-$(t).offset().top}),t.scrollTop=Math.max(i,1),this._scrollingNode&&this._scrollingNode==t||(this._removeListeners(),$(t).on("scroll",this._handleScroll),this._scrollingNode=t)},_removeListeners:function(){this._scrollingNode&&$(this._scrollingNode).off("scroll",this._handleScroll)},_clearInput:function(t){this._onInputChange(""),t.preventDefault();var e=React.findDOMNode(this.refs.typeahead.refs.entry);e.focus()},_handleScroll:_.debounce(function(){if(o()){var t=this._scrollingNode;this._scrollingNode&&(t.scrollTop+t.offsetHeight==t.scrollHeight&&(t.scrollTop=t.scrollTop-1),0==t.scrollTop&&(t.scrollTop=1))}},70),_onTouchMoveOnResults:function(t){var e=React.findDOMNode(this.refs.typeahead.refs.entry);e&&e.blur()},_onSelect:function(t){var e=this.props.onSelect;return e?t?e(t.app,this.state.matchInfos):e(null):void 0},_onInputChange:function(t){var e={inputValue:t};this.setState(e),window.setTimeout(function(){if(t==this.state.inputValue){var e=this._textSearch(t);t==this.state.inputValue&&this.setState({matchInfos:e})}}.bind(this),h)},_textSearch:function(t){if(!t)return[];var e=this._nameIndex.get(t),i=e.regexp,n=(t.indexOf(" ")>0,_.chain(e).map(function(t){var e=this._nameIndex.keyGetter(t),n=i.exec(e)||{index:-1};return{deburredAppName:e,indexOfMatch:n.index,app:t}}.bind(this)).sortByOrder(["indexOfMatch","app.ratingCount","app.name"],["asc","desc","asc"]).take(this.props.limitResults).map(function(t){var e=s(i,t.deburredAppName);return _.forEach(e,function(e){e.string=t.app.name.substring(e.index,e.index+e.string.length)}),t.matchParts=e,t}).value());return n},_renderOption:function(t,e){if(!t||!t.app)return"";var i=React.createElement("div",React.__spread({},e),React.createElement(c,{app:t.app,matchInfo:t,disableIcon:!!o.isUCBrowser}));return i},_renderEmptyHTML:function(){return React.createElement("div",{className:"typeahead-empty"})},render:function(){var t=this.state.inputValue?React.createElement("div",{className:"typeahead-input-clear",onMouseDown:this._clearInput}):null;return React.createElement(a,{ref:"typeahead",className:n("typeahead",{"typeahead-non-empty":0!=this.state.matchInfos.length}),customClasses:{controls:"",input:"typeahead-input",results:"typeahead-results",listItem:"typeahead-result"},placeholder:I18n.t("Search…"),defaultValue:this.state.inputValue||null,options:this.state.matchInfos,renderOption:this._renderOption,getOptionsForValue:function(t,e){return e},getStringForOption:function(t){return this.state.inputValue}.bind(this),onFocus:this._onFocus,onBlur:this.props.onBlur,onTouchMoveOnResults:this._onTouchMoveOnResults,selection:null,onOptionSelected:this._onSelect,onInputChange:this._onInputChange,mustHaveSelection:!1,selectionAlwaysVisible:!0,emptyHTML:this._renderEmptyHTML},t)}});t.exports=e},{classnames:4,"event-emitter":28,"yttro/lib/mobile-check":62,"yttro/lib/regexp-match":67,"yttro/lib/split-with-groups":71,"yttro/views/app-tooltip/top-card":87,"yttro/views/react-typeahead":100}],85:[function(require,t,exports){"use strict";function e(t){var e=t.match(/mzstatic.com.*screen([0-9]+)x([0-9]+).jp/);if(e||(e=t.match(/wdjimg.com.*_([0-9]+)_([0-9]+).jp/)),e||(e=t.match(/=h([0-9]+)$/)),e){var i,n;return e.length>=3&&e[1]!=e[2]?(i=e[1],n=e[2]):568==e[1]?(i=320,n=568):320==e[1]?(i=320,n=180):310==e[1]?(i=413,n=310):(i=640,n=e[1]),a/n*i}}var i=require("yttro/views/playable-video"),n=require("yttro/lib/mobile-check"),r=require("yttro/views/size-required-img"),s=require("yttro/lib/i18n-script"),o=require("classnames"),a=180,c=.6,l=React.createClass({displayName:"AppDetails",propTypes:{app:React.PropTypes.object.isRequired},componentDidUpdate:function(){this._initScrollingNode();var t=React.findDOMNode(this);t&&(t.scrollTop=1)},componentDidMount:function(){this._initScrollingNode()},componentWillUnmount:function(){this._removeListeners()},_initScrollingNode:function(){var t=React.findDOMNode(this);if(t){var e=$(t),i=t.scrollTop;t.scrollTop=Math.max(i,1),this._scrollingNode&&this._scrollingNode==t||(this._removeListeners(),e.on("scroll",this._handleScroll),this._scrollingNode=t)}},_removeListeners:function(){this._scrollingNode&&$(this._scrollingNode).off("scroll",this._handleScroll)},_handleScroll:_.debounce(function(){if(n()){var t=this._scrollingNode;this._scrollingNode&&(t.scrollTop+t.offsetHeight==t.scrollHeight&&(t.scrollTop=t.scrollTop-1),0==t.scrollTop&&(t.scrollTop=1))}},70),_trackClick:function(){YTracking.trackApp("pi",ymap.appItemManager.getLinearIndex(this.props.app))},render:function(){if(this.props.app.isInvalidApp)return React.createElement("div",{className:"app-details"},React.createElement("center",{className:"not-available"},I18n.t("App unavailable")));if(void 0!==navigator.onLine&&!navigator.onLine)return React.createElement("div",{className:"app-details"},React.createElement("center",{className:"not-available"},I18n.t("Network unavailable")));if(!this.props.app.isLoaded())return this.props.app.loadFullData(),React.createElement("div",{className:"app-details"},React.createElement("br",null),React.createElement("div",{className:"loading"},React.createElement("div",{className:"loading-spinner"},I18n.t("Loading"))));var t=this.props.app.getAffiliateURL(),e=React.createElement("div",{className:"learn-more"},React.createElement("a",{className:"learn-more-content",href:t,target:"_blank",onMouseDown:this._trackClick},I18n.t("Learn more on App Store")));return React.createElement("div",{className:"app-details"},React.createElement(p,{videos:this.props.app.videos,app:this.props.app}),React.createElement(u,{screenshots:this.props.app.screenshots}),React.createElement(h,{className:"description",description:this.props.app.description}),e)}}),h=React.createClass({displayName:"Description",propTypes:{description:React.PropTypes.string.isRequired},render:function(){if(!this.props.description)return null;var t=_.clone(this.props);delete t.description;var e=this.props.description,i=o({rtl:s.scriptPct(s.TEST_RTL,e)>c},this.props.className),n=e.split("\n").map(function(t,e){return[t,React.createElement("br",null)]});return React.createElement("div",React.__spread({className:i},t),n)}}),p=React.createClass({displayName:"Videos",propTypes:{videos:React.PropTypes.array,app:React.PropTypes.object.isRequired},render:function(){if(!this.props.videos)return null;if(n.isFirefox)return null;if(n.isUCBrowser)return null;var t=this.props.videos;return React.createElement("div",{className:"videos"},React.createElement("div",{className:"video-list"},t.map(function(t,e){return React.createElement(i,{video:t,app:this.props.app,key:t.video_url})}.bind(this))),React.createElement("span",{className:"attribution"},I18n.t("Powered by")))}}),u=React.createClass({displayName:"Screenshots",propTypes:{screenshots:React.PropTypes.array},shouldComponentUpdate:function(t,e){return!_.isEqual(this.props.screenshots,t.screenshots)},render:function(){return(this.props.screenshots||[]).length?React.createElement("div",{className:"screenshots"},this.props.screenshots.map(function(t,i){var n=Math.round(e(t));return React.createElement(r,{key:t,src:t,width:n})})):null}});t.exports=l,t.exports.Screenshots=u,t.exports.Description=h},{classnames:4,"yttro/lib/i18n-script":55,"yttro/lib/mobile-check":62,"yttro/views/playable-video":99,"yttro/views/size-required-img":107}],86:[function(require,t,exports){"use strict";function e(t){var e=t.parentNode,i="app-tooltip";this.$node=$(e).find("#"+i),this.$node.length||(this.$node=$('<div id="'+i+'"></div>').appendTo($(e))),this.node=this.$node[0],this.ee=n(this),Velocity(this.node,{translateY:"100%"},{duration:0,queue:!1}),this._state=p,this._app=null;var s=this;this._boundOnAppChange=function(){window.setTimeout(function(){s._render(),r.isIPad&&(s._toggleVisibility=s._toggleVisibility||_.debounce(function(){s.$node.find(".screenshots").css({visibility:""})},300),s.$node.find(".screenshots").css({visibility:"hidden"}),s._toggleVisibility())})},DEBUG&&(this._evalSelectedApps=[],$(document).on("keyup",function(t){if(16==t.keyCode){!this._evalSelectedApps.length&&this._app&&this._evalSelectedApps.push(this._app);this._evalSelectedApps.map(function(t){return t.originalId.replace(/_id/,"/id")}).join("\n");this._evalSelectedApps.length=0}}.bind(this)))}var i=require("hammerjs"),n=require("event-emitter"),r=require("yttro/lib/mobile-check"),s=require("yttro/views/app-tooltip/top-card"),o=require("yttro/views/app-tooltip/app-details"),a=require("yttro/views/top-bar"),c=114,l="FULLSCREEN",h="PREVIEW",p="HIDDEN",u=35,d=500;e.prototype={setApp:function(t,e){this._app!=t&&(this._app&&this._app.ee.off("didChange",this._boundOnAppChange),this._app=t,t&&(t.ee.on("didChange",this._boundOnAppChange),DEBUG&&this._evalSelectedApps.push(t)),this._render())},_generateAppCycle:function(t){for(var e=[],i=3,n=0;i>n;++n)for(var r=0;i>r;++r){var s=ymap.appItemManager.appAtRowColumn(t.rowIndex+n-Math.floor(i/2),t.columnIndex+r-Math.floor(i/2));s&&e.push(s)}return e},syncPositionToState:function(){return this._state==p?this._animateToTranslateY(this.$node.parent().height()-a.TOPBAR_HEIGHT):this._state==h?this._animateToTranslateY(this.$node.parent().height()-a.TOPBAR_HEIGHT-c):this._state==l?this._animateToTranslateY(0):Promise.reject(new Error("Not yet in good state: "+this._state))},hideTooltip:function(){return p==this._state?Promise.resolve([this.node]):(this._state=p,this.ee.emit("willHideTooltip",this),this.syncPositionToState().then(function(){return this.ee.emit("didHideTooltip",this),arguments[0]}.bind(this)))},previewTooltip:function(t){return t||h!=this._state?(this._state=h,this.ee.emit("willPreviewTooltip",this),this.syncPositionToState().then(function(){return this.ee.emit("didPreviewTooltip",this),arguments[0]}.bind(this))):Promise.resolve([this.node])},fullScreenTooltip:function(t){if(!t&&l==this._state)return Promise.resolve([this.node]);this._state=l;var e=ymap.appItemManager.getLinearIndex(this._app);return YTracking.trackApp("iv",e),this._app.videos&&YTracking.trackApp("vv",e),this.ee.emit("willFullScreenTooltip",this),this.syncPositionToState().then(function(){return this.ee.emit("didFullScreenTooltip",this),arguments[0]}.bind(this))},isFullScreen:function(){return this._state==l},saveState:function(){return{app:this._app,state:this._state}},restoreState:function(t){return t?(this.setApp(t.app),l==t.state?this.fullScreenTooltip():h==t.state?this.previewTooltip():p==t.state?this.hideTooltip():Promise.resolve()):Promise.resolve(this)},_animateToTranslateY:function(t){return Velocity(this.node,"stop"),Velocity(this.node,{translateY:t},{duration:250,easing:"ease-out",queue:!1})},_getTranslateY:function(){return Number(this.$node.css("transform").split(/[()]/)[1].split(",")[5])},_onTopCardRender:function(t,e){if(e!=this._topCard){this._topCardGestureManager&&(this._topCardGestureManager.destroy(),this._topCardGestureManager=null),this._topCard=e;var n=new i.Manager(this._topCard,{touchAction:"auto"});this._topCardGestureManager=n,n.add(new i.Tap({event:"singletap",posThreshold:u,interval:250,time:d})),n.on("singletap",function(t){if($(t.target).closest(".top-card").length)if($(t.target).closest(".app-icon-and-price").length)h==this._state?(this.fullScreenTooltip(),t.preventDefault(),t.srcEvent.preventDefault()):l==this._state;else{if($(t.target).closest(".app-genre").length&&l!=this._state)return;h==this._state?this.fullScreenTooltip():l==this._state&&this.previewTooltip(),t.preventDefault(),t.srcEvent.preventDefault()}}.bind(this));var r=new i.Pan({event:"vpan",direction:i.DIRECTION_VERTICAL,threshold:5});n.add(r);var s=function(t,e){if(!e)return!0;if($(e.target).closest(".top-card").length)return!0;var i=$(e.target).closest(".app-details")[0];return i?$(e.target).closest("*:scrollableX").length?!1:Math.abs(i.scrollTop)>1?!1:e.velocityY<0?!0:!1:!0},o=.7,p=75,f=0,_=0,m=0,g=!1,v=!1;n.on("vpanstart",function(t){return s(null,t)?(g=!0,t.srcEvent.preventDefault(),t.preventDefault(),f=this._getTranslateY(),_=0,void(m=this.$node.parent().height()-a.TOPBAR_HEIGHT)):(g=!1,void(v=!0))}.bind(this)),n.on("vpanmove",function(t){if(g){t.srcEvent.preventDefault(),t.preventDefault();var e=f+t.deltaY;e=Math.max(e,_),e=Math.min(e,m),Velocity(this.node,"stop"),Velocity(this.node,{translateY:e},{duration:0,queue:!1});var i=e/(m-c);i=1-i,this.ee.emit("didPanPercentY",this,i)}}.bind(this)),n.on("vpanend",function(t){if(v=!1,g){t.srcEvent.preventDefault(),t.preventDefault();var e=this._getTranslateY(),i=-t.velocityY;return i>o?void(h==this._state?this.hideTooltip():this.previewTooltip(!0)):-o>i?void this.fullScreenTooltip(!0):e>m-c?void this.hideTooltip():void(l==this._state?e>p?this.previewTooltip(!0):this.fullScreenTooltip(!0):m-c-p>e?this.fullScreenTooltip(!0):this.previewTooltip(!0))}}.bind(this))}},_pannableNode:function(){return this.$node.find(" > .container")[0]},_goToPrevApp:function(){return Velocity(this._pannableNode(),"stop"),Velocity(this._pannableNode(),{translateX:"100%"},{duration:300,easing:"ease-out",queue:!1}).then(function(){this.ee.emit("didGoToApp",this._prevApp())}.bind(this))},_goToNextApp:function(){return Velocity(this._pannableNode(),"stop"),Velocity(this._pannableNode(),{translateX:"-100%"},{duration:300,easing:"ease-out",queue:!1}).then(function(){this.ee.emit("didGoToApp",this._nextApp())}.bind(this))},_snapToCurrentApp:function(){return Velocity(this._pannableNode(),"stop"),Velocity(this._pannableNode(),{translateX:"0%"},{duration:300,easing:"ease-out",queue:!1})},_nextApp:function(){var t=(this._appCycleIndex+1)%this._appCycle.length;return this._appCycle[t]},_prevApp:function(){var t=(this._appCycleIndex-1+this._appCycle.length)%this._appCycle.length;return this._appCycle[t]},_onClickOnCategory:function(){if(this._app){var t=this._app.categoryId;t&&(r.isUCBrowser||this.ee.emit("didClickOnCategory",this,t))}},_render:function(){if(!this._app)return void React.render(React.createElement("div",null),this.node);var t=this._app,e=React.createElement("div",{className:"container"},React.createElement("div",{className:"current",key:t.id},React.createElement(s,{app:t,onRender:this._onTopCardRender.bind(this),onClickOnCategory:this._onClickOnCategory.bind(this)}),React.createElement("hr",null),React.createElement(o,{app:t})));React.render(e,this.node)}},e.TOOLTIP_HEIGHT=c,t.exports=e},{"event-emitter":28,hammerjs:29,"yttro/lib/mobile-check":62,"yttro/views/app-tooltip/app-details":85,"yttro/views/app-tooltip/top-card":87,"yttro/views/top-bar":109}],87:[function(require,t,exports){var e=require("3rdParty/RandomBits/RBMath"),i=require("classnames"),n=63,r=React.createClass({displayName:"TopCard",propTypes:{app:React.PropTypes.object.isRequired,matchInfo:React.PropTypes.object},getInitialState:function(){return{tileForApp:ymap.tileManager.loadedTileForApp(this.props.app),isLoaded:this.props.app.isLoaded()}},componentDidMount:function(){this.props.onRender&&this.props.onRender(this,React.findDOMNode(this))},componentDidUpdate:function(){this.props.onRender&&this.props.onRender(this,React.findDOMNode(this))},_trackClick:function(){YTracking.trackApp("pl",ymap.appItemManager.getLinearIndex(this.props.app))},shouldComponentUpdate:function(t,e){return this.state.tileForApp!==ymap.tileManager.loadedTileForApp(t.app)?!0:this.state.isLoaded!==t.app.isLoaded()?!0:_.isEqual(this.props.matchInfo,t.matchInfo)?t.app.id!=this.props.app.id:!0},render:function(){var t=this.props.app,e=t.getAffiliateURL(),n=i("top-card",this.props.className),r=" ";void 0!==t.price&&(r=t.price>0?I18n.price(t.price):I18n.t("Free"));var l=t.name;if(t.name||(l=t.isInvalidApp?I18n.t("App unavailable"):""),this.props.matchInfo){var h=this.props.matchInfo;l=_.map(h.matchParts,function(t,e){var n=i({match:t.match});return React.createElement("span",{key:e,className:n},t.string)})}return l=l||" ",React.createElement("div",{className:n},this.props.disableIcon?null:React.createElement("a",{className:"app-icon-and-price",href:e,target:"_blank",onMouseDown:this._trackClick},React.createElement(s,{app:t}),React.createElement("div",{className:"app-price"},r)),React.createElement("div",{className:"app-major-info"},React.createElement("div",{className:"app-name"},l),React.createElement(o,{app:t,onClick:this.props.onClickOnCategory}),React.createElement("br",null),React.createElement(a,{rating:t.rating}),React.createElement(c,{ratingCount:t.ratingCount})))}}),s=React.createClass({displayName:"AppIcon",propTypes:{app:React.PropTypes.object.isRequired},componentDidMount:function(){this._flushCanvas()},componentDidUpdate:function(){this._flushCanvas()},_flushCanvas:function(){var t=React.findDOMNode(this.refs.canvas);if(t){var e=this.props.app;if(!e)return null;var i=ymap.tileManager.loadedTileForApp(e);if(i){var r=i.rectInImg(e.rectInWorld());if(r){var s=i._img;t.width=n,t.height=n;var o=t.getContext("2d");o.drawImage(s,r.x,r.y,r.width,r.height,0,0,t.width,t.height)}}}},render:function(){var t=React.createElement("div",{className:"app-icon loading",style:{width:n,height:n}}),e=this.props.app;if(!e)return t;var i=ymap.tileManager.loadedTileForApp(e);if(!i)return t;var r=n/e.size.width;if(i._img instanceof HTMLCanvasElement)return React.createElement("div",{className:"app-icon",style:{width:n,height:n}},React.createElement("canvas",{ref:"canvas"}));var s=i.rectInImg(e.rectInWorld());return s.scale(1/i.scale),React.createElement("div",{className:"app-icon",style:{width:n,height:n}},React.createElement("img",{src:i._img.src,style:{position:"relative",width:i.size.width*r,left:-s.x*r,top:-s.y*r}}))}}),o=React.createClass({displayName:"AppCategory",propTypes:{app:React.PropTypes.object.isRequired},render:function(){var t=this.props.app,e=ymap.categoryManager.stringForId(t.categoryId);return e?React.createElement("div",{className:"app-genre",onClick:this.props.onClick},e):null}}),a=React.createClass({displayName:"AppRating",propTypes:{rating:React.PropTypes.number.isRequired},render:function(){var t=this.props.rating;return t=e.round(t,.5),t?React.createElement("div",{className:i("app-rating","app-rating"+2*t)}):null}}),c=React.createClass({displayName:"AppRatingCount",propTypes:{ratingCount:React.PropTypes.number.isRequired},render:function(){var t=this.props.ratingCount;return(t=Math.max(t,0))?(t=I18n.abbreviateNumber(t),React.createElement("div",{className:"app-rating-num"},t)):null}});t.exports=r},{"3rdParty/RandomBits/RBMath":3,classnames:4}],88:[function(require,t,exports){function e(t){var e=t.parentNode,i="app-update";this.$node=$(e).find("#"+i),this.$node.length||(this.$node=$('<div id="'+i+'"></div>').appendTo($(e))),this.node=this.$node[0];var r=new n.Manager(this.node,{touchAction:"pan-y"}),o=new n.Swipe({event:"swipe",direction:n.DIRECTION_VERTICAL,threshold:1});r.add(o),r.on("swipe",function(t){t.velocityY>0&&this._render(!0)}.bind(this));var a=Number(localStorage.getItem(s))||0;a||(window.applicationCache.addEventListener("cached",function(t){localStorage.setItem(s,1)}.bind(this)),window.applicationCache.addEventListener("noupdate",function(t){localStorage.setItem(s,1)}.bind(this)),window.applicationCache.addEventListener("obsolete",function(t){localStorage.removeItem(s)}.bind(this)),window.applicationCache.addEventListener("updateready",function(t){localStorage.setItem(s,1)}.bind(this))),this._render(!a)}var i=(require("event-emitter"),require("classnames")),n=require("hammerjs"),r={};r[window.applicationCache.UNCACHED]="uncached",r[window.applicationCache.IDLE]="idle",r[window.applicationCache.CHECKING]="checking",r[window.applicationCache.DOWNLOADING]="downloading",r[window.applicationCache.UPDATEREADY]="ready",r[window.applicationCache.OBSOLETE]="obselete";var s="au";e.prototype={_render:function(t){var e=React.createElement(o,{appCache:window.applicationCache,initialHidden:!!t});React.render(e,this.node)}};var o=React.createClass({displayName:"AppUpdateReact",propTypes:{appCache:React.PropTypes.object.isRequired,initialHidden:React.PropTypes.bool.isRequired},getInitialState:function(){var t=this.props.appCache;return t.addEventListener("checking",function(t){}),t.addEventListener("cached",function(t){}.bind(this)),t.addEventListener("downloading",function(t){this.setState({progress:0})}.bind(this)),t.addEventListener("error",function(t){this.setState({hidden:!0})}.bind(this)),t.addEventListener("noupdate",function(t){this.setState({hidden:!0})}.bind(this)),t.addEventListener("obsolete",function(t){}.bind(this)),t.addEventListener("progress",function(t){this.setState({progress:t.loaded/(t.total||1)}),t.loaded>=t.total&&void 0}.bind(this)),t.addEventListener("updateready",function(t){this.setState({progress:1})}.bind(this)),{hidden:this.props.initialHidden}},componentWillReceiveProps:function(t){this.setState({hidden:t.initialHidden})},_onClickHideButton:function(){YTracking.trackHLD("_au_h"),this.setState({hidden:!0})},_onClickDoneButton:function(){ymap.clearStateFromHistory(),window.location.reload()},render:function(){if(this.state.error)return YTracking.trackHLD("_au_e"),React.createElement("div",{className:"error"},I18n.t("An error occurred while updating the map. Refresh to try again."));if(!_.isFinite(this.state.progress))return null;var t,e=Math.min(this.state.progress,1);return 1>e?(e>0&&YTracking.trackOnce("_au_s",null,{hld:!0}),t=React.createElement("div",{className:"message"},I18n.t("A new map is downloading. In the meantime, continue exploring the current map!"))):(YTracking.trackOnce("_au_d",null,{hld:!0}),t=React.createElement("div",{className:"message"},React.createElement("div",null,I18n.t("A new map has finished downloading!")),React.createElement("div",{className:"btn-cta",onClick:this._onClickDoneButton},I18n.t("Let's go!")))),React.createElement("div",{className:i({hidden:this.state.hidden})},React.createElement("div",{className:"hide",onClick:this._onClickHideButton}),React.createElement("progress",{className:"asset-loader",max:"100",value:Math.round(100*e)}),t)}});t.exports=e},{classnames:4,"event-emitter":28,hammerjs:29}],89:[function(require,t,exports){function e(t){this.parentNode=t.parentNode,this.visitNum=Number(localStorage.getItem("bi"))||0,this.visitNum++,localStorage.setItem("bi",this.visitNum)}var i=require("yttro/lib/mobile-check");e.prototype={_shouldShow:function(){return this.visitNum>1?!1:i()&&i.isIOS?!1:!0},confirm:function(){return new Promise(function(t,e){if(!this._shouldShow())return void t(this);ymap.blurApp(!0);var i=function(){ymap.blurApp(!1),Velocity(r[0],{scale:0},{duration:200,easing:"ease-out",queue:!1}).then(function(){r.remove(),t()}.bind(this))}.bind(this),r=$("<div class='beta-interstitial focus'></div>").appendTo($(this.parentNode));r.on("click",i),React.render(React.createElement(n,{onClick:i}),r[0])}.bind(this))}};var n=React.createClass({displayName:"BetaInterstitialReact",componentDidMount:function(){i.isUCBrowser&&!this._onResize&&(this._onResize=function(){var t=$(".beta-interstitial").height()-20-$(".beta-interstitial .header-image").height()-$(".beta-interstitial .android-promo-footer").outerHeight();$(".beta-interstitial .body").css("height",t)},$(window).on("resize",this._onResize),this._onResize(),window.setTimeout(this._onResize,1e3))},componentWillUnmount:function(){this._onResize&&$(window).off("resize",this._onResize)},render:function(){var t="feedback@yttromobile.com",e=null;return e="cn"==I18n.countryCode?[React.createElement(o,{key:"ali"}),React.createElement(s,{key:"bdu"})]:React.createElement(r,null),React.createElement("div",{className:"container"},React.createElement("div",{className:"header-image"}),React.createElement("div",{className:"content-border"},React.createElement("div",{className:"body"},React.createElement("h1",null,I18n.t("Welcome to YTTRO!")),React.createElement("span",{className:"btn btn-cta",onClick:this.props.onClick},I18n.t("Get Started")),React.createElement("div",null,I18n.t("You've discovered the best way to discover mobile games on the web.")),React.createElement("div",null,I18n.t("We're currently in beta, so please reach out to us if you see any problems.")),React.createElement("div",null,React.createElement("a",{href:"mailto:"+t},t))),React.createElement("div",{className:"android-promo-footer"},React.createElement("div",null,I18n.t("You can also find us on Google Play!")),React.createElement("div",{className:"promo-links"},e))))}}),r=React.createClass({displayName:"GooglePlayLink",render:function(){var t="https://play.google.com/store/apps/details?id=com.yttromobile.gamediscovery";return React.createElement("a",React.__spread({href:t,target:"_blank"},this.props),React.createElement("div",{className:"google-play-button"}))}}),s=React.createClass({displayName:"BaiduLink",render:function(){var t="http://shouji.baidu.com/game/item?docid=8082340";return React.createElement("a",React.__spread({href:t,target:"_blank"},this.props),React.createElement("div",{className:"baidu-button"}),React.createElement("div",null,"百度手机助手"))}}),o=React.createClass({displayName:"AliLink",render:function(){var t="http://apps.yunos.com/detail.htm?id=9837268";return React.createElement("a",React.__spread({href:t,target:"_blank"},this.props),React.createElement("div",{className:"ali-button"}),React.createElement("div",null,"阿里云应用中心"))}});t.exports=e},{"yttro/lib/mobile-check":62}],90:[function(require,t,exports){function e(t){t.parentNode,this._startCenter={}}var i=require("3rdParty/RandomBits/RBMath");e.prototype={updateMarking:function(t,e,i){t=t||{},_.isFinite(this._startCenter.x)||(this._startCenter.x=e.x),_.isFinite(this._startCenter.y)||(this._startCenter.y=e.y),t.x<0?this.right(Math.abs(e.x-this._startCenter.x)/50):t.x>0?this.left(Math.abs(e.x-this._startCenter.x)/50):t.x||(this._leftMark&&i.x>0||this._rightMark&&i.x<0)&&this.stopX(),t.y<0?this.bottom(Math.abs(e.y-this._startCenter.y)/50):t.y>0?this.top(Math.abs(e.y-this._startCenter.y)/50):t.y||(this._topMark&&i.y>0||this._bottomMark&&i.y<0)&&this.stopY()},left:function(t){this._leftMark=i.clamp(0,1,t)},right:function(t){this._rightMark=i.clamp(0,1,t)},top:function(t){this._topMark=i.clamp(0,1,t)},bottom:function(t){this._bottomMark=i.clamp(0,1,t)},stopX:function(){delete this._leftMark,delete this._rightMark,delete this._startCenter.x},stopY:function(){delete this._topMark,delete this._bottomMark,delete this._startCenter.y},stop:function(){this.stopX(),this.stopY()},render:function(t,e){if(this._leftMark||this._rightMark||this._topMark||this._bottomMark){
if(!this._startTS)return void(this._startTS=e);var i=30;if(!this._grd){t.save();var n=t.createRadialGradient(0,0,0,0,0,i);n.addColorStop(0,"rgba(255,255,255,0.6)"),n.addColorStop(1,"rgba(255,255,255,0.2)"),this._grd=n,t.restore()}this._leftMark>0&&(t.save(),t.translate(0,t.canvas.height/2),t.scale(this._leftMark,t.canvas.height/2/i),t.fillStyle=this._grd,t.beginPath(),t.arc(0,0,i,Math.PI/2+Math.PI,Math.PI/2),t.closePath(),t.fill(),t.restore()),this._rightMark>0&&(t.save(),t.translate(t.canvas.width,t.canvas.height/2),t.scale(this._rightMark,t.canvas.height/2/i),t.fillStyle=this._grd,t.beginPath(),t.arc(0,0,i,Math.PI/2,Math.PI/2+Math.PI),t.closePath(),t.fill(),t.restore()),this._topMark>0&&(t.save(),t.translate(t.canvas.width/2,0),t.scale(t.canvas.width/2/i,this._topMark),t.fillStyle=this._grd,t.beginPath(),t.arc(0,0,i,0,Math.PI),t.closePath(),t.fill(),t.restore()),this._bottomMark>0&&(t.save(),t.translate(t.canvas.width/2,t.canvas.height),t.scale(t.canvas.width/2/i,this._bottomMark),t.fillStyle=this._grd,t.beginPath(),t.arc(0,0,i,Math.PI,0),t.closePath(),t.fill(),t.restore())}}},t.exports=e},{"3rdParty/RandomBits/RBMath":3}],91:[function(require,t,exports){function e(t){var n=t.parentNode,r="feedback";this.$node=$(n).find("#"+r),this.$node.length||(this.$node=$('<a id="'+r+'" href="'+e.generateHref()+'"></a>').appendTo($(n))),this.node=this.$node[0],i().then(function(t){this.$node.attr("href",e.generateHref({srcVersion:t.src}))}.bind(this)).catch(function(){})}var i=require("yttro/lib/manifest-md5");e.generateHref=function(t){t=t||{};var e="feedback@yttromobile.com",i="\n\n\n"+navigator.userAgent,n=t.srcVersion||"";n&&(i+="\n"+I18n.t("YTTRO version: %{versionNumber}",{versionNumber:n}));var r=encodeURI(i),s=I18n.t("Feedback for YTTRO"),o=encodeURI(s);return"mailto:"+e+"?body="+r+"&subject="+o},t.exports=e},{"yttro/lib/manifest-md5":61}],92:[function(require,t,exports){function e(t){var e=t.parentNode;this.$node=$('<div class="hamburger-menu"></div>').appendTo($(e)),this.ee=i(this),this.$node.on("click",function(t){this.isOpen()?this.closeMenu():this.openMenu()}.bind(this)),this._items=[],this._render(),this.closeMenu();var s=new r.Manager(this.$node[0],{touchAction:"auto"}),o=new r.Pan({event:"hpan",direction:r.DIRECTION_HORIZONTAL,threshold:5});s.add(o);var a=0,c=!1;s.on("hpanstart",function(t){c=!0,t.srcEvent.preventDefault(),t.preventDefault(),a=this._getTranslateX(),MIN_TRANSLATE_X_PCT=-100,MAX_TRANSLATE_X_PCT=0}.bind(this)),s.on("hpanmove",function(t){t.srcEvent.preventDefault(),t.preventDefault();var e=a+t.deltaX,i=this.$node.find(".hamburger-menu-items"),r=e/i.width();r=_.round(100*r,2),r=n.clamp(MIN_TRANSLATE_X_PCT,MAX_TRANSLATE_X_PCT,r),Velocity(i,"stop"),Velocity(i,{translateX:r+"%"},{duration:0,queue:!1})}.bind(this)),s.on("hpanend",function(t){t.srcEvent.preventDefault(),t.preventDefault(),this.closeMenu()}.bind(this))}var i=require("event-emitter"),n=(require("classnames"),require("3rdParty/RandomBits/RBMath")),r=(require("yttro/lib/regexp-match"),require("yttro/lib/split-with-groups"),require("yttro/lib/mobile-check"),require("yttro/views/react-typeahead").Typeahead,require("yttro/views/app-tooltip/top-card"),require("hammerjs"));e.prototype={addItem:function(t){this._items.push(t),this._render()},clearItems:function(){this._items=[]},isOpen:function(){return this._isOpen},closeMenu:function(){return this._isOpen=!1,this.$node.removeClass("open"),this.ee.emit("willCloseMenu",this),this.syncPositionToState().then(function(){return this.ee.emit("didCloseMenu",this),arguments[0]}.bind(this))},openMenu:function(){return this._isOpen=!0,this.$node.addClass("open"),this.ee.emit("willOpenMenu",this),this.syncPositionToState().then(function(){return this.ee.emit("didOpenMenu",this),arguments[0]}.bind(this))},syncPositionToState:function(){return this._isOpen?this._animateToTranslateX("0%"):this._animateToTranslateX("-100%")},_animateToTranslateX:function(t){var e=this.$node.find(".hamburger-menu-items");return Velocity(e,"stop"),Velocity(e,{translateX:t},{duration:150,easing:"ease-out",queue:!1})},_getTranslateX:function(){var t=this.$node.find(".hamburger-menu-items");return Number(t.css("transform").split(/[()]/)[1].split(",")[5])},_render:function(){var t=this._items,e=React.createElement("div",{className:"hamburger-menu-items"},t);React.render(e,this.$node[0])}},t.exports=e},{"3rdParty/RandomBits/RBMath":3,classnames:4,"event-emitter":28,hammerjs:29,"yttro/lib/mobile-check":62,"yttro/lib/regexp-match":67,"yttro/lib/split-with-groups":71,"yttro/views/app-tooltip/top-card":87,"yttro/views/react-typeahead":100}],93:[function(require,t,exports){var e=require("yttro/lib/mobile-check"),i=require("platform");t.exports=function(){return e()&&e.isIOS?e.isUCBrowser?!1:Number(i.version)<9?!1:!0:!0}},{platform:37,"yttro/lib/mobile-check":62}],94:[function(require,t,exports){function e(t){$("#loader").length||$("body").append("<div id='loader'><center id='loading-msg'/></div>");var e=new l({id:"nanobar",target:$("#loader")}),i=[];i.length=t.length;var n=function(){var t=_.sum(i);t/=i.length;var n=.01,r=.98,s=c(n,r,t),o=Math.floor(100*s);e.go(o),React.render(React.createElement("div",{className:"lines"},React.createElement("div",null,React.createElement(I18n.ComponentInterpolator,{string:I18n.t("Loading %{br}a world of games…",{br:"%{br}"}),br:React.createElement("br",null)},"$1")),React.createElement("div",null,o,"%"),React.createElement("div",{className:"initial-dl-msg"},I18n.t("Initial download may take longer."))),$("#loader #loading-msg")[0])},r=_.debounce(function(){var t=_.sum(i);t>=i.length||$("#refresh").length||($("#loader").append("<center id='refresh'><div class='slow-dl-msg'>"+I18n.t("Sorry, it seems an error ocurred.")+"</div><span class='btn-cta'>"+I18n.t("Refresh")+"</span></center>"),$("#refresh").on("click",function(){window.location.reload(!0)}))},2e4),o=t.map(function(t,e){if(!t)throw new Error("missing url");return s.getBytesAndMimeType({onProgress:function(t){if(r(),t.lengthComputable){var s=t.loaded/t.total;i[e]=Math.max(i[e]||0,s),n()}},url:t}).then(function(t){return r(),i[e]=1,n(),t}).catch(function(t){throw t})});return o}function i(t){$("#splash").addClass("loader-orphan");var i=e(t),r=i.map(function(t){return t.then(n)});return Promise.all(r).then(function(t){return $("#loader").remove(),$("#nanobar").remove(),t})}function n(t){return/^image\b/.test(t.mimeType)?o._bytesAndMimeType2Image(t).then(function(t){if(!window.IsHighendDevice){var e=document.createElement("canvas"),i=e.getContext("2d");i.drawImage(t,0,0)}return t}):a(t).then(function(e){return/\/json$/.test(t.mimeType)?JSON.parse(e):e})}function r(t){this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,r)}var s=require("yttro/lib/ajax"),o=require("yttro/lib/ajax-image"),a=(require("yttro/lib/mobile-check"),require("yttro/lib/bytes-mimetype-to-object")),c=require("yttro/lib/lerp"),l=function(t){var e=t.target||document.body;this.node=$('<progress class=\'asset-loader\' max="100" value="0"/>').appendTo($(e))[0],this.pct=0};l.prototype={go:function(t){t=t||0,t=Math.round(t),this.pct!=t&&(this.pct=t,this.node.value=this.pct)}},r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports={LoaderIsParent:r,ensureAssets:function(t){return YTracking.trackHLD("_ld_o"),i(t)}}},{"yttro/lib/ajax":47,"yttro/lib/ajax-image":46,"yttro/lib/bytes-mimetype-to-object":49,"yttro/lib/lerp":59,"yttro/lib/mobile-check":62}],95:[function(require,t,exports){function e(){this.START_SCALE=1,this.MIN_SCALE=1.1,this.MAX_SCALE=1.4,this.duration=1500,this.scalePerMS=(this.MAX_SCALE-this.MIN_SCALE)/this.duration;var t=84;this._rings=[],this._rings[0]=new i({maxRadius:2.5*t,minRadius:this.MIN_SCALE*t/2}),this._rings[1]=new i({delay:1500,maxRadius:2.5*t,minRadius:this.MIN_SCALE*t/2})}function i(t){this.delay=t.delay||0,this.duration=t.duration||6e3,this.minRadius=t.minRadius,this.maxRadius=t.maxRadius}var n=(require("yttro/lib/rect"),require("yttro/lib/lerp"));e.prototype={start:function(t){this.stop(),this._paused=!1,this._app=t,delete this._startTS,ymap.requestRender()},render:function(t,e){var i=this._app;if(i&&!this._paused){if(!this._startTS)return this._startTS=e,void ymap.requestRender();var r,s=this.duration,o=this._startTS+(this.MIN_SCALE-this.START_SCALE)/this.scalePerMS;if(o>e)r=this.START_SCALE+this.scalePerMS*(e-this._startTS);else{var a,c=(e-o)%(2*s);s>c?a=c/s:(a=(c-s)/s,a=1-a),r=n.remap(0,1,a,this.MIN_SCALE,this.MAX_SCALE)}var l=ymap.tileManager.loadedTileForApp(i);if(l){t.save();var h=i.scaledRectInWorld(r);t.translate(h.center().x,h.center().y),this._rings.forEach(function(i){i.render(t,e)}),t.scale(h.scaledBy,h.scaledBy),l.renderApp(t,i),t.restore()}ymap.requestRender()}},stop:function(){this._rings.forEach(function(t){t.stop()}),delete this._app,delete this._startTS},pause:function(){this._paused=!0},resume:function(){this._paused&&(this._paused=!1,delete this._startTS,ymap.requestRender())}},i.prototype={stop:function(){delete this._startTS},render:function(t,e){if(!this._startTS)return void(this._startTS=e);t.save();var i=(e-this._startTS-this.delay)%this.duration;i/=this.duration;var r=n(this.minRadius,this.maxRadius,i)/this.maxRadius;t.scale(r,r);var s=1,o=0;if(t.globalAlpha=n(s,o,i),!this._grd){var a=t.createRadialGradient(0,0,this.maxRadius/3,0,0,.8*this.maxRadius);a.addColorStop(0,"rgba(255,255,255,0)"),a.addColorStop(1,"rgba(255,255,255,0.6)"),this._grd=a}t.fillStyle=this._grd,t.beginPath(),t.arc(0,0,this.maxRadius,0,2*Math.PI),t.closePath(),t.fill(),t.restore()}},t.exports=e},{"yttro/lib/lerp":59,"yttro/lib/rect":65}],96:[function(require,t,exports){function e(t){this.allApps=t.allApps,this.numColumns=t.numColumns,this.numRows=t.numRows,this._textureCache={}}function i(t){this.highlightApps=new e({allApps:t.allApps,numColumns:t.numColumns,numRows:t.numRows}),this.allApps=t.allApps,this._filters=[],this.ee=n(this),this.$node=$('<div class="map-filters" />').appendTo(t.parentNode),this.$node.hide()}var n=require("event-emitter"),r=require("yttro/lib/image-smoothing-enabled"),s=require("yttro/lib/lerp"),o=require("3rdParty/RandomBits/RBMath"),a=30,c=250;e.prototype={_getTexture:function(t){var e=_(t).pluck("id").sortBy().join("-");return this._textureCache=this._textureCache||{},this._textureCache[e]||(_.size(this._textureCache)>a&&(this._textureCache={}),this._textureCache[e]=this._generateTexture(t)),this._textureCache[e]},_generateTexture:function(t){var e=document.createElement("canvas");e.width=this.numColumns,e.height=this.numRows;var i=e.getContext("2d");return r(i,!1),this.allApps.forEach(function(e){i.save(),_.includes(t,e)?i.fillStyle="rgba(0,0,0,0)":i.fillStyle="rgba(0,0,0,0.8)",i.fillRect(e.columnIndex,e.rowIndex,1,1),i.restore()}),e},setHighlightApps:function(t){if(this.appsToHighlight=t,this.appsToHighlight){var e=this._getTexture(this.appsToHighlight);this._startTS=null,this._prevTexture=this._textureToRender,this._textureToRender=e}else this._startTS=null,this._prevTexture=this._textureToRender,this._textureToRender=null;ymap.requestRender()},render:function(t,e){if(this._textureToRender||this._prevTexture){this._startTS||(this._startTS=e);var i=s.remap(0,c*(window._SLOW_ANIMATIONS?10:1),e-this._startTS,0,1);i>1?delete this._prevTexture:ymap.requestRender(),i=o.clamp(0,1,i),this._prevTexture&&(t.save(),r(t,!1),t.globalAlpha=1-i,t.drawImage(this._prevTexture,0,0,ymap.worldRect.width,ymap.worldRect.height),t.restore()),this._textureToRender&&(t.save(),r(t,!1),t.globalAlpha=i,t.drawImage(this._textureToRender,0,0,ymap.worldRect.width,ymap.worldRect.height),t.restore())}}},i.prototype={_updateFilteredApps:function(){if(this._filters.length){var t=this.allApps;_.forEach(this._filters,function(e){t=_.intersection(t,e.apps)}),this.filteredApps=t,this.highlightApps.setHighlightApps(t)}else this.filteredApps=this.allApps,this.highlightApps.setHighlightApps(null);this._renderHTML(),this.ee.emit("filterDidChange",this)},hasFilter:function(){return this._filters.length>0},includes:function(t){return this.hasFilter()?_.includes(this.filteredApps,t):!0},_upsertFilter:function(t){var e=_.findIndex(this._filters,{type:t.type}),i=this._filters[e];i?0==_.difference(_.pluck(i.apps,"id"),_.pluck(t.apps,"id")).length?this._filters.splice(e,1):this._filters.splice(e,1,t):this._filters.push(t),this._updateFilteredApps()},toggleCategoryId:function(t){var e=_.filter(this.allApps,function(e){return e.categoryId==t});this._upsertFilter({displayName:ymap.categoryManager.stringForId(t),apps:e,type:"category"})},toggleFreeApps:function(){var t=_.filter(this.allApps,function(t){return!t.price});this._upsertFilter({displayName:I18n.t("Free"),apps:t,type:"price"})},toggleAnchorApps:function(){var t=ymap.anchorManager.anchorApps;this._upsertFilter({displayName:I18n.t("Anchors"),apps:t,type:"anchor"})},_renderHTML:function(){var t=React.createElement("div",{className:"container"},this._filters.map(function(t){return React.createElement("div",{key:t.type,className:"map-filter",onClick:this._upsertFilter.bind(this,t)},t.displayName)}.bind(this)));React.render(t,this.$node[0])},renderOnMap:function(t,e){return this.highlightApps.render(t,e)}},t.exports=i},{"3rdParty/RandomBits/RBMath":3,"event-emitter":28,"yttro/lib/image-smoothing-enabled":58,"yttro/lib/lerp":59}],97:[function(require,t,exports){var e={_getDummy:function(){return e._dummy=e._dummy||document.createElement("div"),e._dummy},stop:function(){return Velocity(e._getDummy(),"stop")},animate:function(t){t=_.clone(t);var i=t.viewport,n=i.saveState();t.animations();var r=i.saveState();e._setStateByLERP(i,n,r,0);var s=Math.pow(r.center.x-n.center.x,2)+Math.pow(r.center.y-n.center.y,2),o=Math.pow(r.zoomLevel-n.zoomLevel,2);(s>176400||o>.0875*ymap.pixelRatio*ymap.pixelRatio)&&ymap.forceLowRes(!0);var a=t.progress;return t.progress=function(t,s,o,c,l){e._setStateByLERP(i,n,r,s),a&&a.apply(this,arguments)},t.queue=t.queue||!1,t.duration=(window._SLOW_ANIMATIONS?10:1)*(t.duration||250),this._prevOptions&&(this._prevOptions.cancelled=!0),this._prevOptions=t,e.stop(),Velocity(e._getDummy(),{tween:[0,100]},t).then(function(){t.cancelled||(ymap.forceLowRes(!1),ymap.requestRenderNoMotionBlur())}.bind(this))},_setStateByLERP:function(t,e,i,n){var r={width:(i.size.width-e.size.width)*n+e.size.width,height:(i.size.height-e.size.height)*n+e.size.height},s=Math.max(e.zoomLevel*e.size.width/r.width,e.zoomLevel*e.size.height/r.height);t.restoreState({center:{x:(i.center.x-e.center.x)*n+e.center.x,y:(i.center.y-e.center.y)*n+e.center.y},size:r,zoomLevel:s})}};t.exports=e},{}],98:[function(require,t,exports){function e(t){this.friction=.9,this.viewport=t.viewport,this.eventLoop=t.eventLoop,this._running=!1,this._boundOnTick=this._onTick.bind(this)}e.prototype={isRunning:function(){return this._running},stop:function(){this.setVelocity({x:0,y:0})},setVelocity:function(t){this.velocity=t,this.eventLoop.addListener(this._boundOnTick),this._running=!0},_onTick:function(t){if(this.velocity){if(!this._prevTS)return void(this._prevTS=t);var e=this.viewport.saveState(),i=t-this._prevTS;if(this.viewport.translate({x:this.velocity.x*i,y:this.velocity.y*i}),this.viewport.clampToWorldRect(ymap.viewportClampingRect),this.velocity.x*=this.friction,this.velocity.y*=this.friction,Math.abs(this.velocity.x)*this.eventLoop.msPerTick<.1&&(this.velocity.x=0),Math.abs(this.velocity.y)*this.eventLoop.msPerTick<.1&&(this.velocity.y=0),this._prevTS=t,(Math.abs(this.velocity.x)+Math.abs(this.velocity.y))*this.eventLoop.msPerTick,0==this.velocity.x&&0==this.velocity.y)return this._running=!1,void this.eventLoop.removeListener(this._boundOnTick);var n=this.viewport.saveState();return Math.abs(e.center.x-n.center.x)<1e-4&&Math.abs(e.center.y-n.center.y)<1e-4&&Math.abs(e.size.width-n.size.width)<1e-4&&Math.abs(e.size.height-n.size.height)<1e-4?(this._running=!1,void this.eventLoop.removeListener(this._boundOnTick)):void 0}}},t.exports=e},{}],99:[function(require,t,exports){"use strict";function e(t){var e=t/1e3,i=Math.floor(e/3600);e-=3600*i;var n=Math.floor(e/60);e-=60*n;var s=Math.floor(e/1);return i?i+":"+r(n,2)+":"+r(s,2):n+":"+r(s,2)}var i=require("screenfull"),n=require("yttro/lib/mobile-check"),r=require("yttro/lib/pad-number");i.enabled&&(i.requestAsync=function(t){return new Promise(function(e,n){var r=function(n){$(t).off(i.raw.fullscreenchange,r),$(t).off(i.raw.fullscreenerror,s),e(t)},s=function(e){$(t).off(i.raw.fullscreenchange,r),$(t).off(i.raw.fullscreenerror,s),n(e)};$(t).one(i.raw.fullscreenchange,r),$(t).one(i.raw.fullscreenerror,s),i.request(t)})});var s=React.createClass({displayName:"PlayableVideo",propTypes:{video:React.PropTypes.object.isRequired,app:React.PropTypes.object.isRequired},_playVideo:function(){var t=React.findDOMNode(this.refs.video);return t?(t.play&&t.play(),this._canPlay=this._canPlay||new Promise(function(e,i){$(t).one("canplay",function(){e(this)}.bind(this))}.bind(this)),n.isIOS||!i.enabled?(t.webkitEnterFullScreen&&t.webkitEnterFullScreen(),this._canPlay.then(function(){return t.paused?Promise.reject(new Error("No longer active video: "+t.src)):void 0}.bind(this))):i.requestAsync(t).then(function(){return this._canPlay}.bind(this))):void 0},componentDidMount:function(){var t=React.findDOMNode(this.refs.video);if(t){var e=function(){$(React.findDOMNode(this)).removeClass("loading"),$(React.findDOMNode(this)).removeClass("playing")}.bind(this);n.isIOS||!i.enabled?$(t).on("webkitendfullscreen",function(){t.pause&&t.pause(),e()}):$(t).on(i.raw.fullscreenchange,function(n){i.element||(t.pause&&t.pause(),e())}.bind(this))}},componentWillUnmount:function(){var t=React.findDOMNode(this.refs.video);t&&$(t).off()},_handleClick:function(t){if(!i.enabled||!i.element){var e=React.findDOMNode(this.refs.video);if(e){e.pause&&e.pause();var n=$(React.findDOMNode(this));n.addClass("loading"),this._playVideo().then(function(){var t=ymap.appItemManager.getLinearIndex(this.props.app);YTracking.trackApp("vp",t,{vi:this.props.video.source.id}),n.removeClass("loading"),n.addClass("playing")}.bind(this)).error(function(){})}}},render:function(){var t=this.props.video;return React.createElement("div",{className:"playable-video",onClick:this._handleClick,style:{backgroundImage:"url('"+t.thumbnail+"')"}},React.createElement("div",{className:"video-title"},t.name),React.createElement("div",{className:"duration-and-views"},React.createElement("div",{className:"views"},I18n.abbreviateNumber(t.views)),React.createElement("div",{className:"duration"},e(t.duration))),React.createElement("video",{src:t.video_url,ref:"video",poster:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",preload:"none",controls:!0}))}});t.exports=s},{screenfull:41,"yttro/lib/mobile-check":62,"yttro/lib/pad-number":63}],100:[function(require,t,exports){var e=require("./typeahead"),i=require("./tokenizer");t.exports={Typeahead:e,Tokenizer:i}},{"./tokenizer":102,"./typeahead":104}],101:[function(require,t,exports){var e=e||{};e.DOM_VK_UP=e.DOM_VK_UP||38,e.DOM_VK_DOWN=e.DOM_VK_DOWN||40,e.DOM_VK_BACK_SPACE=e.DOM_VK_BACK_SPACE||8,e.DOM_VK_RETURN=e.DOM_VK_RETURN||13,e.DOM_VK_ENTER=e.DOM_VK_ENTER||14,e.DOM_VK_ESCAPE=e.DOM_VK_ESCAPE||27,e.DOM_VK_TAB=e.DOM_VK_TAB||9,t.exports=e},{}],102:[function(require,t,exports){var e=window.React||window.React,i=require("./token"),n=(require("../keyevent"),require("../typeahead")),r=require("classnames"),s=e.createClass({displayName:"TypeaheadTokenizer",propTypes:{name:e.PropTypes.string,options:e.PropTypes.array,customClasses:e.PropTypes.object,allowCustomValues:e.PropTypes.number,defaultSelected:e.PropTypes.array,defaultValue:e.PropTypes.string,placeholder:e.PropTypes.string,onTokenRemove:e.PropTypes.func,onTokenAdd:e.PropTypes.func,maxVisible:e.PropTypes.number},getInitialState:function(){return{selected:this.props.defaultSelected.slice(0)}},getDefaultProps:function(){return{options:[],defaultSelected:[],customClasses:{},allowCustomValues:0,defaultValue:"",placeholder:"",onTokenAdd:function(){},onTokenRemove:function(){}}},_renderTokens:function(){var t={};t[this.props.customClasses.token]=!!this.props.customClasses.token;var n=r(t),s=this.state.selected.map(function(t){return e.createElement(i,{key:t,className:n,onRemove:this._removeTokenForValue,name:this.props.name},t)},this);return s},_getOptionsForTypeahead:function(){return this.props.options},_removeTokenForValue:function(t){var e=this.state.selected.indexOf(t);-1!=e&&(this.state.selected.splice(e,1),this.setState({selected:this.state.selected}),this.props.onTokenRemove(this.state.selected))},_addTokenForValue:function(t){-1==this.state.selected.indexOf(t)&&(this.state.selected.push(t),this.setState({selected:this.state.selected}),this.refs.typeahead.setEntryText(""),this.props.onTokenAdd(this.state.selected))},render:function(){var t={};t[this.props.customClasses.typeahead]=!!this.props.customClasses.typeahead;var i=r(t);return e.createElement("div",{className:"typeahead-tokenizer"},this._renderTokens(),e.createElement(n,{ref:"typeahead",className:i,placeholder:this.props.placeholder,allowCustomValues:this.props.allowCustomValues,customClasses:this.props.customClasses,options:this._getOptionsForTypeahead(),defaultValue:this.props.defaultValue,maxVisible:this.props.maxVisible,onOptionSelected:this._addTokenForValue,onKeyDown:this._onKeyDown}))}});t.exports=s},{"../keyevent":101,"../typeahead":104,"./token":103,classnames:4}],103:[function(require,t,exports){var e=window.React||window.React,i=require("classnames"),n=e.createClass({displayName:"Token",propTypes:{className:e.PropTypes.string,name:e.PropTypes.string,children:e.PropTypes.string,onRemove:e.PropTypes.func},render:function(){var t=i("typeahead-token",this.props.className);return e.createElement("div",{className:t},this._renderHiddenInput(),this.props.children,this._renderCloseButton())},_renderHiddenInput:function(){return this.props.name?e.createElement("input",{type:"hidden",name:this.props.name+"[]",value:this.props.children}):null},_renderCloseButton:function(){return this.props.onRemove?e.createElement("a",{className:"typeahead-token-close",href:"#",onClick:function(t){this.props.onRemove(this.props.children),t.preventDefault()}.bind(this)},"×"):""}});t.exports=n},{classnames:4}],104:[function(require,t,exports){var e=require("./selector"),i=require("../keyevent"),n=require("classnames"),r=React.createClass({displayName:"Typeahead",propTypes:{name:React.PropTypes.string,customClasses:React.PropTypes.object,maxVisible:React.PropTypes.number,options:React.PropTypes.array,renderOption:React.PropTypes.func,getStringForOption:React.PropTypes.func,allowCustomValues:React.PropTypes.number,defaultValue:React.PropTypes.string,placeholder:React.PropTypes.string,onOptionSelected:React.PropTypes.func,onKeyDown:React.PropTypes.func,selectionAlwaysVisible:React.PropTypes.bool,getOptionsForValue:React.PropTypes.func,mustHaveSelection:React.PropTypes.bool},getDefaultProps:function(){return{options:[],customClasses:{},allowCustomValues:0,defaultValue:"",placeholder:"",selectionAlwaysVisible:!1,mustHaveSelection:!1,onKeyDown:function(t){},onOptionSelected:function(t){}}},getInitialState:function(){return{visible:this.getOptionsForValue(this.props.defaultValue,this.props.options),entryValue:this.props.defaultValue,selection:null}},componentWillReceiveProps:function(t){this.setState({visible:this.getOptionsForValue(t.defaultValue,t.options),entryValue:t.defaultValue})},getOptionsForValue:function(t,e){var i;return i=this.props.selectionAlwaysVisible&&!t?e:this.props.getOptionsForValue(t,e),this.props.maxVisible&&(i=i.slice(0,this.props.maxVisible)),i},setEntryText:function(t){this.refs.entry.getDOMNode().value=t,this._onTextEntryUpdated()},_hasCustomValue:function(){return this.props.allowCustomValues>0&&this.state.entryValue.length>=this.props.allowCustomValues&&this.state.visible.indexOf(this.state.entryValue)<0?!0:!1},_getCustomValue:function(){return this._hasCustomValue()?this.state.entryValue:null},_onFocus:function(t){this.setState({hasFocus:!0}),this.props.onFocus&&this.props.onFocus(t)},_onBlur:function(t){if(!this.refs.sel)return void(this.props.onBlur&&this.props.onBlur(t));var e=this.refs.sel.getActiveOptions();e.length||(this.props.onBlur&&this.props.onBlur(),this.setState({hasFocus:!1}))},_renderIncrementalSearchResults:function(){return(this.props.selectionAlwaysVisible||this.state.hasFocus)&&(this.state.entryValue||this.state.visible)?this.state.selection?"":this.state.visible.length||this.props.allowCustomValues>0?this._hasCustomValue()?React.createElement(e,{ref:"sel",options:this.state.visible,customValue:this.state.entryValue,onOptionSelected:this._onOptionSelected,onTouchMove:this.props.onTouchMoveOnResults,renderOption:this.props.renderOption,mustHaveSelection:this.props.mustHaveSelection,selection:this.props.selection,selectionIndex:this.props.selectionIndex,customClasses:this.props.customClasses}):React.createElement(e,{ref:"sel",options:this.state.visible,onOptionSelected:this._onOptionSelected,onChange:this.props.onSelectionChange,onTouchMove:this.props.onTouchMoveOnResults,renderOption:this.props.renderOption,mustHaveSelection:this.props.mustHaveSelection,selection:this.props.selection,selectionIndex:this.props.selectionIndex,customClasses:this.props.customClasses}):_.valueOrCall(this.props,"emptyHTML")||"":""},_onOptionSelected:function(t,e){if(!this.props.selectionAlwaysVisible){var i=this.props.getStringForOption(t),n=this.refs.entry.getDOMNode();n.focus(),n.value=i,this.setState({visible:this.getOptionsForValue(i,this.props.options),selection:t,entryValue:i})}return this.props.onOptionSelected(t,e)},_onTextEntryUpdated:function(){var t=this.refs.entry.getDOMNode().value,e=this.state.entryValue;this.setState({visible:this.getOptionsForValue(t,this.props.options),selection:null,entryValue:t}),this.props.onInputChange&&this.props.onInputChange(t,e)},_onEnter:function(t){return this.refs.sel&&this.refs.sel.state.selection?this._onOptionSelected(this.refs.sel.state.selection,t):this.props.onKeyDown(t)},_onEscape:function(){this.props.mustHaveSelection?this.refs.entry.getDOMNode().blur():this.refs.sel.setSelectionIndex(null)},_onTab:function(t){var e=this.refs.sel.state.selection;return null===e&&this._hasCustomValue()&&(e=this._getCustomValue()),null!==e?this._onOptionSelected(e,t):null===e?this.refs.entry.getDOMNode().blur():void 0},eventMap:function(t){var e={};return e[i.DOM_VK_UP]=this.refs.sel.navUp,e[i.DOM_VK_DOWN]=this.refs.sel.navDown,e[i.DOM_VK_RETURN]=e[i.DOM_VK_ENTER]=this._onEnter,e[i.DOM_VK_ESCAPE]=this._onEscape,e[i.DOM_VK_TAB]=this._onTab,e},_onKeyDown:function(t){if(!this.refs.sel)return this.props.onKeyDown(t);var e=this.eventMap()[t.keyCode];return e?(e(t),void t.preventDefault()):this.props.onKeyDown(t)},render:function(){var t={};t[this.props.customClasses.input]=!!this.props.customClasses.input;var e=n(t),i={};i[this.props.customClasses.controls]=!!this.props.customClasses.controls;var r=n(i),s={typeahead:!0};s[this.props.className]=!!this.props.className;var o=n(s);return React.createElement("div",{className:o},React.createElement("div",{className:r},this._renderHiddenInput(),React.createElement("input",{ref:"entry",type:"text",placeholder:this.props.placeholder,className:e,value:this.state.entryValue,defaultValue:this.props.defaultValue,onChange:this._onTextEntryUpdated,onKeyDown:this._onKeyDown,onFocus:this._onFocus,onBlur:this._onBlur,spellCheck:!1}),this.props.children),this._renderIncrementalSearchResults())},_renderHiddenInput:function(){if(!this.props.name)return null;var t=this.props.getStringForOption(this.state.selection);return React.createElement("input",{type:"hidden",name:this.props.name,value:t})}});t.exports=r},{"../keyevent":101,"./selector":106,classnames:4}],105:[function(require,t,exports){var e=require("classnames");React.initializeTouchEvents(!0);var i=React.createClass({displayName:"TypeaheadOption",propTypes:{customClasses:React.PropTypes.object,customValue:React.PropTypes.string,onClick:React.PropTypes.func,hover:React.PropTypes.bool},getDefaultProps:function(){return{customClasses:{},onClick:function(t){t.preventDefault()}}},getInitialState:function(){return{}},_onMouseLeave:function(t){return this.setState({isActive:!1}),this.props.onMouseLeave?this.props.onMouseLeave(t):void 0},_onMouseDown:function(t){this.setState({isActive:!0})},_onMouseUp:function(t){this.setState({isActive:!1})},render:function(){var t={};t[this.props.customClasses.hover||"hover"]=!!this.props.hover,t[this.props.customClasses.listItem]=!!this.props.customClasses.listItem,t[this.props.customClasses.active||"active"]=!!this.state.isActive,this.props.customValue&&(t[this.props.customClasses.customAdd]=!!this.props.customClasses.customAdd);var i=e(t),n={ref:"li",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onTouchStart:this._onMouseDown,onTouchEnd:this._onMouseUp,className:i,onClick:this._onClick};return this.props.renderer(n)},_getClasses:function(){var t={"typeahead-option":!0};return t[this.props.customClasses.listAnchor]=!!this.props.customClasses.listAnchor,e(t)},_onClick:function(t){return t.preventDefault(),this.props.onClick(t)}});t.exports=i},{classnames:4}],106:[function(require,t,exports){var e=require("./option"),i=require("classnames"),n=React.createClass({displayName:"TypeaheadSelector",propTypes:{options:React.PropTypes.array,customClasses:React.PropTypes.object,customValue:React.PropTypes.string,selectionIndex:React.PropTypes.number,selection:React.PropTypes.object,mustHaveSelection:React.PropTypes.bool,onOptionSelected:React.PropTypes.func},getDefaultProps:function(){return{selectionIndex:null,selection:null,customClasses:{},customValue:null,onOptionSelected:function(t){},renderOption:function(t,e){return React.createElement("div",React.__spread({},e),t)}}},getInitialState:function(){this.props.selection&&void(t=this.props.options.indexOf(this.props.selection));var t=this.props.selectionIndex;return this.props.mustHaveSelection&&(t=t||0,(0>t||t>this.props.options.length)&&(t=0)),{selectionIndex:t,selection:this.getSelectionForIndex(t)}},componentWillReceiveProps:function(t){var e;t.selection?e=t.options.indexOf(t.selection):t.selectionIndex&&(e=t.selectionIndex),t.mustHaveSelection&&(!e&&0!==e&&t.options.length&&(e=0),(0>e||e>t.options.length)&&(e=0)),this.setState({selectionIndex:e})},render:function(){var t={"typeahead-selector":!0};t[this.props.customClasses.results]=this.props.customClasses.results;var n=i(t),r=[];return null!==this.props.customValue&&r.push(React.createElement(e,{ref:this.props.customValue,key:this.props.customValue,hover:this.state.selectionIndex===r.length,customClasses:this.props.customClasses,customValue:this.props.customValue,onClick:this._onClick.bind(this,this.props.customValue)},this.props.customValue)),this.props.options.forEach(function(t,i){r.push(React.createElement(e,{ref:"option-"+i,key:i,hover:this.state.selectionIndex===r.length,customClasses:this.props.customClasses,onClick:this._onClick.bind(this,t),renderer:this.props.renderOption.bind(null,t)}))},this),React.createElement("ul",{className:n,onTouchMove:this.props.onTouchMove},r)},setSelectionIndex:function(t){this.props.mustHaveSelection&&(t=t||0),this.setState({selectionIndex:t,selection:this.getSelectionForIndex(t)}),this.props.onChange&&this.props.onChange(this.getSelectionForIndex(t))},getSelectionForIndex:function(t){return null===t?null:0===t&&null!==this.props.customValue?this.props.customValue:(null!==this.props.customValue&&(t-=1),this.props.options[t])},_onClick:function(t,e){return this.props.onOptionSelected(t,e)},_nav:function(t){if(this.props.options||null!==this.props.customValue){var e=null===this.state.selectionIndex?1==t?0:t:this.state.selectionIndex+t,i=this.props.options.length;null!==this.props.customValue&&(i+=1),0>e?e+=i:e>=i&&(e-=i),this.setSelectionIndex(e)}},navDown:function(){
this._nav(1)},navUp:function(){this._nav(-1)},getActiveOptions:function(){var t=_.chain(this.refs||{}).map(function(t,e){return t&&/^option-[0-9]+/.test(e)?t:null}).compact().value();return _.filter(t,function(t){return t.state.isActive})}});t.exports=n},{"./option":105,classnames:4}],107:[function(require,t,exports){var e=React.createClass({displayName:"SizeRequiredImg",statics:{getNaturalDim:function(t){this._dims=this._dims||{};var e=this._dims;return e[t]?Promise.resolve(e[t]):(e[t]=new Promise(function(i,n){var r=new Image;r.onload=function(){e[t]={naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight},i(e[t])},window.setTimeout(function(){r.src=t})}),e[t])}},getInitialState:function(){return{}},shouldComponentUpdate:function(t,e){return!_.isEqual(this.props,t)||!_.isEqual(this.state,e)},componentWillMount:function(){e.getNaturalDim(this.props.src).then(function(t){this.isMounted()&&this.setState({naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight})}.bind(this))},componentWillReceiveProps:function(t){this.setState({naturalWidth:null,naturalHeight:null}),e.getNaturalDim(t.src).then(function(t){this.isMounted()&&this.setState({naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight})}.bind(this))},render:function(){var t=_.clone(this.props);return t.width||this.state.naturalWidth?React.createElement("img",React.__spread({},t)):(delete t.src,null)}});t.exports=e},{}],108:[function(require,t,exports){function e(t,e){Error.call(this),this.name="UnsupportedDeviceError",this.message=t||"",this.code=e,this.stack=(new Error).stack}var i=require("platform"),n=require("yttro/lib/mobile-check"),r=require("yttro/lib/extend");r(Error,e),t.exports=function(t){if(!(n.isUCBrowser||/\bSafari\b/i.test(i.name)||/\bChrome\b/i.test(i.name)||/\bFirefox\b/i.test(i.name)))return Promise.reject(new e(I18n.t("It appears you are on an unsupported browser. YTTRO requires Safari or Chrome.")));if(n.isIOS&&/\bSafari\b/i.test(i.name)){var r=i.os.version||"";if(r=r.match(/[1-9]+(\.[0-9])?/)[0],r=Number(r)||0,t>r)return Promise.reject(new e(I18n.t("It appears you are on an unsupported device. YTTRO requires iOS %{iOSVersion}+",{iOSVersion:t})));if(460==screen.availHeight&&320==screen.availWidth)return Promise.reject(new e(I18n.t("It appears you are on an unsupported device. YTTRO requires iPhone 5+")))}return Promise.resolve()},t.exports.UnsupportedDeviceError=e},{platform:37,"yttro/lib/extend":53,"yttro/lib/mobile-check":62}],109:[function(require,t,exports){"use strict";function e(t){var e;e=t.parentNode;var n="topbar";this.$node=$(e).find("#"+n),this.$node.length||(this.$node=$('<div id="'+n+'"></div>').appendTo($(e))),this.node=this.$node[0],this.ee=i(this),this.hide(),this._render()}var i=require("event-emitter");e.prototype={show:function(){return this._animateToTranslateY(0)},hide:function(t){return this._animateToTranslateY(-e.TOPBAR_HEIGHT)},setTranslateYPct:function(t){t=Math.max(0,t),t=Math.min(1,t);var i=(1-t)*(0-e.TOPBAR_HEIGHT);i=_.round(i,1),Velocity(this.node,"stop"),Velocity(this.node,{translateY:i},{duration:0,queue:!1})},_animateToTranslateY:function(t){return Velocity(this.node,"stop"),Velocity(this.node,{translateY:t},{duration:250,easing:"ease-out",queue:!1})},_onCollapseClick:function(){this.ee.emit("didClickCollapseButton",this)},_onDownloadClick:function(){this.ee.emit("didClickDownloadButton",this)},_render:function(){var t=React.createElement("div",null,React.createElement("div",{className:"topbar-button collapse-button",onClick:this._onCollapseClick.bind(this)}),React.createElement("div",{className:"topbar-logo"}),React.createElement("div",{className:"topbar-button download-button",onClick:this._onDownloadClick.bind(this)}));React.render(t,this.node)}},t.exports=e,e.TOPBAR_HEIGHT=40},{"event-emitter":28}],110:[function(require,t,exports){function e(t){this.seenHints=JSON.parse(localStorage.getItem("t")||"[]"),this.allTutorials=["pan","pinch","tooltip","mc"],this.$node=$("<div class='tutorial hidden'></div>").appendTo($(t.parentNode)),this._hintsQueue=[],this._dismiss(!1)}var i=(require("yttro/lib/mobile-check"),require("classnames"),require("yttro/lib/resolve-on-event")),n=React.createClass({displayName:"TutorialPan",componentDidMount:function(){Promise.delay(800).then(function(){this.props&&this.props.doneCB&&this.props.doneCB()}.bind(this))},render:function(){return React.createElement("div",{className:"hint-img pan"})}}),r=React.createClass({displayName:"TutorialPinch",componentDidMount:function(){Promise.delay(800).then(function(){this.props&&this.props.doneCB&&this.props.doneCB()}.bind(this))},render:function(){return React.createElement("div",{className:"hint-img pinch"})}}),s=React.createClass({displayName:"TutorialTooltip",componentDidMount:function(){Promise.delay(800).then(function(){this.props&&this.props.doneCB&&this.props.doneCB()}.bind(this))},render:function(){return React.createElement("div",{className:"hint-img tooltip"})}}),o=React.createClass({displayName:"TutorialMapClick",statics:{animated:!0},componentDidMount:function(){this.animate().then(function(){this.props&&this.props.doneCB&&this.props.doneCB()}.bind(this))},animate:function(){if(!this._animationPromise){var t=ymap.viewport.rectInWorld(),e=ymap.appItemManager.appAtWorldPoint(t.center()),i=ymap.worldPoint2Node(e.center),n=$(React.findDOMNode(this));n.css({left:i.x,top:i.y}),this._animationPromise=Velocity(n,{opacity:1},{duration:200,easing:"ease-out",queue:!1}).then(function(){return Promise.delay(600)}).then(function(){return ymap.selectApp(e)}).then(function(){delete this._animationPromise}.bind(this))}return this._animationPromise},render:function(){return React.createElement("div",{className:"hint-img mc"},React.createElement("div",{className:"text"},I18n.t("Tap to select an app")))}}),a={pan:n,pinch:r,tooltip:s,mc:o};e.prototype={showExcept:function(t){t=_(t).keys().filter(function(e){return t[e]}).value();var e=this.allTutorials;return e=_.difference(e,t),e=_.difference(e,this.seenHints),e=_.filter(e,function(t){return!!a[t]}),e=_.difference(e,this._hintsQueue),this._drainPromise||e.length?(this._hintsQueue=this._hintsQueue.concat(e),this._drainPromise||(this._drainPromise=this._drainHintsQueue().then(function(){delete this._drainPromise}.bind(this))),this._drainPromise):(YTracking.trackOnce("_tut_f",null,{hld:!0}),this._dismiss(),Promise.resolve())},_drainHintsQueue:function(){var t,e=_.takeWhile(this._hintsQueue,function(t){return!a[t].animated});return t=e.length?e:this._hintsQueue.length?[this._hintsQueue[0]]:[],t.length?(YTracking.trackHLD("_tut_s",{h:t}),this.$node.removeClass("hidden"),Promise.all([this._render(t),Velocity(this.$node[0],{opacity:1},{duration:200,easing:"ease-out",queue:!1})]).then(function(){return i(this.$node,"click touchstart")}.bind(this)).then(function(){return this._hintsQueue=_.difference(this._hintsQueue,t),this.seenHints=_.union(this.seenHints,t),localStorage.setItem("t",JSON.stringify(this.seenHints)),this._drainHintsQueue(this._hintsQueue)}.bind(this))):(YTracking.trackHLD("_tut_d"),this._dismiss(),Promise.resolve(this._hintsQueue))},_dismiss:function(t){return t=t||void 0===t,Velocity(this.$node[0],"stop"),Velocity(this.$node[0],{opacity:0},{duration:t?200:1,easing:"ease-out",queue:!1}).then(function(){return 0==_.difference(this.allTutorials,this.seenHints).length?this.$node.remove():this.$node.addClass("hidden"),this.$node}.bind(this))},_skipAllTutorials:function(t){return YTracking.trackHLD("_tut_sa"),t.preventDefault(),this._hintsQueue=[],this.seenHints=_.union(this.seenHints,this.allTutorials),localStorage.setItem("t",JSON.stringify(this.seenHints)),this._dismiss()},_render:function(t){var e=[],i=_.map(t,function(t){var i=null;return e.push(new Promise(function(e,n){var r=a[t]||null;r&&(i=React.createElement(r,{key:t,doneCB:e}))})),i});return React.render(React.createElement("div",{className:"container"},React.createElement("div",{className:"skip",onClick:this._skipAllTutorials.bind(this)},"Skip All »"),i),this.$node[0]),Promise.all(e)}},t.exports=e},{classnames:4,"yttro/lib/mobile-check":62,"yttro/lib/resolve-on-event":68}],111:[function(require,t,exports){function e(t){this.$node=$("#YMap"),this.node=this.$node[0],this.updatePixelRatio(),this._allowMotionBlur=PARSED_LOCATION.query.mb||!1,(PARSED_LOCATION.query.buffer||this._allowMotionBlur)&&(this.buffer=document.createElement("canvas"),this.$buffer=$(this.buffer),this.$buffer.css({display:"none"}),this.fbs=this._flushBufferToScreen.bind(this));var e=new m;this.viewport=e,e.ee.on("didChange",this.requestRender.bind(this)),e.ee.on("didChange",function(){this.updateSoftViewportClampingRect()}.bind(this));var s=t.icon_padding+t.icon_size;_.forEach(C,function(t,e){void 0!==PARSED_LOCATION.query[e]&&""+PARSED_LOCATION.query[e]!=""&&(C[e]=PARSED_LOCATION.query[e]||C[e])});var a=new o({width:t.embed_array_num_cols*s,height:t.embed_array_num_rows*s});this.worldRect=a,this.tileManager=new p({worldSize:{width:a.width,height:a.height},tileLayerDicts:t.tileLayers}),this.tileManager.ee.on("tileDidLoad",function(t){this.requestRender(),this._updateDownloadQueue()}.bind(this)),this.appItemManager=new d({apps:t.items_array,promotedApps:t.promoted_apps||[],iconSize:s,numColumns:t.embed_array_num_cols,numRows:t.embed_array_num_rows}),this.categoryManager=new h({categories:t.category_dict}),this._maybeLoadNonExistentApp(),this.anchorManager=new f({anchorApps:_.chain(t.toplist_anchors).map(this.appItemManager.appAtLinearIndex.bind(this.appItemManager)).filter().concat(this.appItemManager.promotedApps()).uniq("id").value(),maxIconRatio:this.MAX_ZOOM_LEVEL/this.MIN_ZOOM_LEVEL}),this.appItemManager.ee.on("promotedAppsDidChange",function(){var t=this.appItemManager.promotedApps();this.anchorManager.setAnchorApps(_.uniq(this.anchorManager.anchorApps.concat(t),"id"))}.bind(this)),this.breathingAnimator=new g,this.mapFilter=new b({parentNode:this.node.parentNode,numColumns:this.appItemManager.numColumns,numRows:this.appItemManager.numRows,allApps:this.appItemManager._apps}),this.mapFilter.ee.on("filterDidChange",function(){this.mapFilter.hasFilter()?(YTracking.trackHLD("_mf_s",{f:this.mapFilter.$node.html()}),this.mapFilter.$node.show(200),this.appSearch.setApps(this.mapFilter.filteredApps)):(YTracking.trackHLD("_mf_f"),this.mapFilter.$node.hide(200),this.appSearch.setApps(this.appItemManager._apps)),this.filteredAnchors=null,this.requestRender()}.bind(this)),this.hamburgerSearch=$('<div class="hamburger-search"/>').appendTo($(this.node.parentNode)),this.hamburgerMenu=new S({parentNode:this.hamburgerSearch});var u=require("yttro/views/feedback"),k=require("yttro/lib/manifest-md5"),M="",L=function(){this.hamburgerMenu.clearItems(),this.hamburgerMenu.addItem(React.createElement("div",{key:"toggleFreeApps",onClick:function(){this.mapFilter.toggleFreeApps()}.bind(this)},I18n.t("Free games"))),this.hamburgerMenu.addItem(React.createElement("div",{key:"refreshAnchors",onClick:function(){this.anchorManager.refreshVisibleAnchors(this.viewport.rectInWorld()),this.requestRender()}.bind(this)},I18n.t("Refresh anchors"))),this.hamburgerMenu.addItem(React.createElement("div",{key:"filler",className:"filler"})),this.hamburgerMenu.addItem(React.createElement("a",{key:"sendFeedback",href:u.generateHref({srcVersion:M})},I18n.t("Send feedback"))),this.hamburgerMenu._render()}.bind(this);L(),k().then(function(t){M=t.src,L()}.bind(this)),this.hamburgerMenu.ee.on("willOpenMenu",function(){P.set({enable:!1})}),this.hamburgerMenu.ee.on("willCloseMenu",function(){P.set({enable:!0})}),this.appSearch=new T({parentNode:this.hamburgerSearch,apps:this.appItemManager._apps}),this.appSearch.ee.on("didFocus",function(){this.selectApp(null),P.set({enable:!1}),this._blurExcept(1,!r(),this.hamburgerSearch)}.bind(this)),this.appSearch.ee.on("didBlur",function(){P.set({enable:!0}),this._blurExcept(0,!r(),this.hamburgerSearch)}.bind(this)),this.appSearch.ee.on("didSelect",function(t,e,i){YTracking.trackApp("sr",this.appItemManager.getLinearIndex(e)),this._blurExcept(0,!r(),this.hamburgerSearch),this.selectApp(e)}.bind(this)),this.appSearch.ee.on("didFocus",function(){this.anchorManager.stopBreathing()}.bind(this)),this.appSearch.ee.on("didBlur",function(){this.anchorManager.startBreathingAfterDelay()}.bind(this)),e.ee.on("didChange",function(){e.zoomLevel>this.ANCHOR_BREATHING_MIN_ZOOM_LEVEL?this.anchorManager.stopBreathing():this.anchorManager.startBreathingAfterDelay()}.bind(this)),this.appTooltip=new w({parentNode:this.node.parentNode}),this.appTooltip.ee.on("didPanPercentY",function(t,e){this.topbar.setTranslateYPct(e),IsHighendDevice&&this._blurExcept(e,!1,[this.appTooltip.node,this.topbar.node])}.bind(this)),this.appTooltip.ee.on("didHideTooltip",function(t){this.selectApp(null)}.bind(this)),this.appTooltip.ee.on("willFullScreenTooltip",function(t){P.set({enable:!1}),this.topbar.show(),this._blurExcept(1,!0,[this.appTooltip.node,this.topbar.node]),this.breathingAnimator.pause()}.bind(this)),this.appTooltip.ee.on("willPreviewTooltip",function(t){P.set({enable:!0}),this.topbar.hide(),this._blurExcept(0,!0,[this.appTooltip.node,this.topbar.node])}.bind(this)),this.appTooltip.ee.on("didPreviewTooltip",function(t){this.breathingAnimator.resume()}.bind(this)),this.appTooltip.ee.on("willHideTooltip",function(t){P.set({enable:!0}),this.topbar.hide(),this._blurExcept(0,!0,[this.appTooltip.node,this.topbar.node])}.bind(this)),this.appTooltip.ee.on("didClickOnCategory",function(t,e){this.mapFilter.toggleCategoryId(e)}.bind(this)),this.topbar=new x({parentNode:this.node.parentNode}),this.topbar.ee.on("didClickCollapseButton",function(){this.appTooltip.previewTooltip()}.bind(this)),this.topbar.ee.on("didClickDownloadButton",function(){var t=this.selectedApp();if(t){var e=t.getAffiliateURL();YTracking.trackApp("pd",this.appItemManager.getLinearIndex(t)),window.open(e)}}.bind(this)),this.tutorial=new A({parentNode:this.node.parentNode}),this.edgeMarking=new R({parentNode:this.node.parentNode}),this.updateSoftViewportClampingRect(a),$(window).resize(this.onResize.bind(this)),this.onResize();var P=new n.Manager(this.node),O=new n.Pan({event:"pan",direction:n.DIRECTION_ALL,threshold:i});P.add(O);var N={x:0,y:0};P.on("panstart panmove panend pinchstart pinchmove",function(t){var i=this.nodeDelta2World({x:t.deltaX,y:t.deltaY});if("panstart"==t.type||"pinchstart"==t.type)return void(N=i);var n={x:N.x-i.x,y:N.y-i.y};e.translate(n);var r=e.clampToWorldRect(this.viewportClampingRect);return this.edgeMarking.updateMarking(r,t.center,n),N=i,"panend"==t.type?void this.edgeMarking.stop():void 0}.bind(this)),this.$node.on("touchstart touchmove mousedown mousewheel",y.stop.bind(y));var D=function(t,i){var n=t*e.zoomLevel;n=Math.max(n,this.MIN_ZOOM_LEVEL),n=Math.min(n,this.MAX_ZOOM_LEVEL);var r=1.5;if(!(n/e.zoomLevel>r||n/e.zoomLevel<1/r)){var s=this.nodePoint2World(i);e.zoomToLevel(n,s),e.clampToWorldRect(this.viewportClampingRect),1>t&&this.selectApp(null)}}.bind(this),F=new n.Pinch({event:"pinch",threshold:0});P.add(F),P.get("pinch").recognizeWith("pan");var q=1;P.on("pinchstart pinchmove",function(t){return"pinchstart"==t.type?void(q=t.scale):(D(t.scale/q,t.center),void(q=t.scale))}),this.node.addEventListener("mousewheel",function(t){if(!this.appTooltip.isFullScreen()){var e=t.deltaY>0?1:-1,i=Math.log(Math.abs(t.deltaY));i*=e;var n=50/(50+i);n=Math.max(n,0),n=Math.min(n,2.5);var r={x:t.clientX,y:t.clientY};D(n,r)}}.bind(this)),P.add(new n.Tap({event:"doubletap",taps:2,threshold:this.TAP_MOVEMENT_THRESHOLD,posThreshold:this.MAX_MULTITAP_THRESHOLD,interval:I,time:E})),P.on("doubletap",function(t){var i=e.zoomLevel>=this.MAX_ZOOM_LEVEL;i&&this.selectApp(null);var n=this.nodePoint2World(t.center);y.animate({viewport:e,animations:function(){i?e.zoomToLevel(this.MIN_ZOOM_LEVEL,n):e.zoomToLevel(this.MAX_ZOOM_LEVEL,n),e.clampToWorldRect(this.viewportClampingRect)}.bind(this),easing:[300,10]})}.bind(this)),P.add(new n.Tap({event:"singletap",threshold:this.TAP_MOVEMENT_THRESHOLD,interval:I,time:E})),P.get("doubletap").recognizeWith("singletap"),P.get("singletap").requireFailure("doubletap"),P.on("singletap",function(t){if(this.appTooltip.isFullScreen())return void this.appTooltip.previewTooltip();var i=this.nodePoint2World(t.center),n=_.intersection(this.anchorManager.visibleAnchors,this.mapFilter.filteredApps),r=_.find(n,function(t){var e=t.scaledRectInWorld(),n=15*e.scaledBy;return e.scale((e.width+2*n)/e.width,e.center()),e.containsPoint(i)});if(r)return this.selectApp(r),YTracking.trackApp("ac",this.appItemManager.getLinearIndex(r)),void P.stop(!0);if(e.zoomLevel>=this.MIN_ZOOM_LEVEL_FOR_SINGLETAP_APP_SELECT){var i=this.nodePoint2World(t.center),s=this.appItemManager.appAtWorldPoint(i);if(!s)return;if(!this.mapFilter.includes(s))return;s==this.selectedApp()?this.appTooltip.fullScreenTooltip():this.selectApp(s),YTracking.trackApp("mc",this.appItemManager.getLinearIndex(s))}}.bind(this));var z=new c({msPerTick:Math.round(1e3/t.FPS)}),j=new v({viewport:e,eventLoop:z});this.viewportMomentum=j;var V=new n.Swipe({event:"swipe",direction:n.DIRECTION_ALL,threshold:1});if(P.add(V),P.get("swipe").recognizeWith("pan"),P.on("swipe",function(t){var e={x:t.velocityX,y:t.velocityY};e=this.nodeDelta2World(e),j.setVelocity(e)}.bind(this)),this.$node.on("touchstart mousedown mousewheel",j.stop.bind(j)),$(document).on("keydown",function(t){var e=this.selectedApp();if(e&&!this.appSearch.hasFocus()){if(69==t.keyCode)return void(this.appTooltip.isFullScreen()?this.appTooltip.previewTooltip(!0):this.appTooltip.fullScreenTooltip(!0));if(86==t.keyCode)return void window.open(e.getAffiliateURL());var i=0,n=0;if(65==t.keyCode?i=-1:83==t.keyCode?n=1:68==t.keyCode?i=1:87==t.keyCode&&(n=-1),0!=i||0!=n){var r=this.appItemManager.appAtRowColumn(Math.max(0,Math.min(this.appItemManager.numRows,e.rowIndex+n)),Math.max(0,Math.min(this.appItemManager.numColumns,e.columnIndex+i)));r&&this.selectApp(r)}}}.bind(this)),DEBUG){$(document).on("keyup",function(t){t.ctrlKey&&84==t.keyCode&&void(window._SLOW_ANIMATIONS=!window._SLOW_ANIMATIONS)}),$(document).on("keyup",function(t){if(!this.appSearch.hasFocus()&&(74==t.keyCode||75==t.keyCode)){var e=self._q;e?e=_.map(e,function(t){return ymap.appItemManager.appWithId(t)}):(e=self._topApps||_.sortBy(this.appItemManager._apps,"ratingCount"),self._topApps=e);var i,n=this.selectedApp();i=n?e.indexOf(n)+(74==t.keyCode?-1:1):74==t.keyCode?-1:0,i=(i+e.length)%e.length,void this.selectApp(e[i])}}.bind(this));var U=_.groupBy(this.appItemManager._apps,"cluster");if(_.keys(U).length<=1);else{this.clusters=U;var B={};_.forEach(this.clusters,function(t,e){var i=t[0].rectInWorld();if(_.forEach(t,function(t){i.union(t.rectInWorld())}),t.bounds=i,t.center=i.center(),t.length<=1)t.color="black";else for(;;){var n="#"+_.random(7,15).toString(16)+_.random(7,15).toString(16)+_.random(7,15).toString(16);if(!B[n]){t.color=n,B[n]=!0;break}}});var W=$('<input\n                id="cluster-slider"\n                type="range"\n                value="75"\n                style="position:absolute;top:0;left:0"/>').appendTo($(this.node.parentNode));W.on("input",function(t){W.val(),ymap.requestRender()});var H=document.createElement("canvas");(function(){H.width=this.appItemManager.numColumns,H.height=this.appItemManager.numRows;var t=H.getContext("2d");l(t,!1),this.appItemManager._apps.forEach(function(e){t.save(),t.fillStyle=this.clusters[e.cluster].color,t.fillRect(e.columnIndex,e.rowIndex,1,1),t.restore()}.bind(this))}).call(this),this._renderClusterTexture=function(t,e){var i=this.selectedApp(),n=H;if(i){var r=this.clusters[i.cluster];if(!r.texture){var s=H.getContext("2d").getImageData(0,0,H.width,H.height);_.forEach(r,function(t){var e=4*(t.rowIndex*ymap.appItemManager.numColumns+t.columnIndex);s.data[e+3]=0}),r.texture=document.createElement("canvas"),r.texture.width=H.width,r.texture.height=H.height,r.texture.getContext("2d").putImageData(s,0,0)}n=r.texture}t.save(),l(t,!1),t.globalAlpha=_.round(W.val()/100,2),t.drawImage(n,0,0,a.width,a.height),t.restore()}}}DEBUG||(delete t.items_array,delete t.toplist_anchors,delete t.tileLayers)}var i,n=require("hammerjs"),r=require("yttro/lib/mobile-check"),s=require("yttro/lib/ajax-image"),o=require("yttro/lib/rect"),a=require("yttro/lib/url-hash"),c=require("yttro/lib/event-loop"),l=require("yttro/lib/image-smoothing-enabled"),h=require("yttro/model/category-manager"),p=require("yttro/model/tile-manager"),u=require("yttro/model/tile"),d=require("yttro/model/app-item-manager"),f=require("yttro/model/anchor-manager"),m=require("yttro/lib/viewport"),g=require("yttro/views/map-render/breathing-animator"),v=require("yttro/views/map-render/viewport-momentum"),y=require("yttro/views/map-render/viewport-animator"),b=require("yttro/views/map-render/map-filter"),w=require("yttro/views/app-tooltip/app-tooltip"),x=require("yttro/views/top-bar"),S=require("yttro/views/hamburger-menu"),T=require("yttro/views/app-search"),A=require("yttro/views/tutorial"),R=require("yttro/views/edge-marking"),I=200,E=500,C={TAP_MOVEMENT_THRESHOLD:45,MAX_MULTITAP_THRESHOLD:80,MAX_ZOOM_LEVEL:.75,MIN_ZOOM_LEVEL:.165,ANCHOR_BREATHING_MIN_ZOOM_LEVEL:.45,MIN_ZOOM_LEVEL_FOR_SINGLETAP_APP_SELECT:0},k=1,M=8;e.prototype.init=function(){var t=JSON.parse(localStorage.getItem("ss")||"{}"),e=a.get(window.location).app;return Promise.all([this.restoreState(t)]).then(function(){YTracking.trackHLD("_rs");var t=this.appItemManager.appWithId(e);if(t){YTracking.trackHLD("_la"),this.selectApp(t);var i="fs"===a.get(window.location).tt;i&&this.appTooltip.fullScreenTooltip(!0)}window.history.replaceState(null,"",a.edit(window.location,null,["tt"]))}.bind(this)).then(function(){this.anchorManager.refreshVisibleAnchors(this.viewport.rectInWorld());var t=this.tileManager.tileLoadSpiral(this.viewportGravity(),this.viewport.zoomLevel);return t=_.take(t,k),t=t.map(function(t){return t.load({retry:10})}),Promise.all(t)}.bind(this)).then(function(t){YTracking.trackHLD("_til",{x:(t||[]).length});var e=function(){var t=this.saveState();localStorage.setItem("ss",JSON.stringify(t))}.bind(this);e=_.throttle(e,500),this.viewport.ee.on("didChange",e),this.appTooltip.ee.on("willFullScreenTooltip",e),this.appTooltip.ee.on("willPreviewTooltip",e),this.appTooltip.ee.on("willHideTooltip",e),this.tutorial.showExcept({tooltip:!this.selectedApp(),mc:!!this.selectedApp()}).then(function(){var t=function(){YTracking.trackHLD("_vpm"),this.viewport.ee.off("didChange",t)}.bind(this);this.viewport.ee.on("didChange",t)}.bind(this)),this._minMSBetweenFrames=1e3/world.FPS/2,this.requestRender()}.bind(this))},e.prototype.saveState=function(){var t=this.viewport.saveState(),e=this.appTooltip.saveState(),i=this.anchorManager.saveState();return{v:world.v,vp:{c:t.center,zl:t.zoomLevel},tt:{a:e.app?e.app.id:null,s:e.state},a:{a:i.visibleAnchors.map(function(t){return t.id})}}},e.prototype.restoreState=function(t){if(!t)return this._jumpToDefaultViewport(),Promise.resolve(this);if(t.v!=world.v)return this._jumpToDefaultViewport(),Promise.resolve(this);t.vp&&(this.viewport.restoreState({center:t.vp.c,zoomLevel:t.vp.zl,size:{width:1,height:1}}),this.onResize()),t.vp&&this.viewport.isValid()||(this.viewport.isValid()||void 0,this._jumpToDefaultViewport());var e=[];if(t.tt&&t.tt.a){var i=t.tt.a,n=this.appItemManager.appWithId(i);if(n){var r=this.selectApp(n).then(function(){return this.appTooltip.restoreState({state:t.tt.s,app:n}).then(function(){this.appTooltip.isFullScreen()&&this.appTooltip.previewTooltip(!0)}.bind(this))}.bind(this));e.push(r)}}return Promise.all(e)},e.prototype.clearStateFromHistory=function(){localStorage.removeItem("ss"),window.history.replaceState(null,"",a.edit(window.location,null,["app"]))},e.prototype._maybeLoadNonExistentApp=function(){var t=a.get(window.location).app;if(t){var e=this.appItemManager.appWithId(t);if(!e){var i=this.appItemManager._apps.length-1;0>i&&(i=0),world.toplist_anchors=(world.toplist_anchors||[]).filter(function(t){return t!=i}),this.appItemManager.replaceAppAtLinearIndex(i,t);var n=this.appItemManager.appWithId(t);n.loadFullData().then(function(){this.appSearch._render()}.bind(this));var r=this.tileManager.tilesForApp(n),o=r.map(function(t){return t.load().then(function(){var e=document.createElement("canvas"),i=t._img;e.width=i.naturalWidth,e.height=i.naturalHeight;var r=e.getContext("2d");r.drawImage(i,0,0);var s=t.rectInImg(n.rectInWorldWithoutPadding());u.drawAppIconMask(r,s.x,s.y,s.width,s.height),t._img=e})});Promise.props({replaceTiles:Promise.all(o).then(function(){n.ee.emit("didChange",n)}),appIconImage:n._normalizeFullDataFromStore().then(function(t){var e=this.categoryManager.categoryIdsForStrings(t.categoryStrings||[]);return n.categoryId=e[0]||this.categoryManager.defaultCategoryId(),s.get({url:t.iconURL})}.bind(this))}).then(function(t){var e=t.appIconImage;r.forEach(function(t){var i=t._img,r=i.getContext("2d"),s=t.rectInImg(n.rectInWorldWithoutPadding());r.globalCompositeOperation="destination-out",u.pathAppIconMask(r,s.x,s.y,s.width,s.height),r.fillStyle="black",r.fill(),r.globalCompositeOperation="destination-over",r.drawImage(e,s.x,s.y,s.width,s.height)})}).then(function(){n.ee.emit("didChange",n)})}}},e.prototype._jumpToDefaultViewport=function(){this.viewport.restoreState({center:{x:0,y:0},size:{width:0,height:0},zoomLevel:1}),this.onResize();var t=1;t=.71,t=1/6,t=this.MIN_ZOOM_LEVEL,this.viewport.zoom(t),this.viewport.translateCenterTo({x:this.worldRect.width/2,y:this.worldRect.height/2}),this.viewport.clampToWorldRect(this.worldRect),this.requestRender()},e.prototype.updateSoftViewportClampingRect=function(t){var e=this.viewportGravity();if(t=t||this.worldRect){this.softViewportClampingRect=t.clone();var i=.5,n=this.tileManager.highResLayer()._tileSize;this.softViewportClampingRect.resize({width:Math.min(this.worldRect.width,this.softViewportClampingRect.width+2*i*n.width),height:Math.min(this.worldRect.height,this.softViewportClampingRect.height+2*i*n.height)},e),this.softViewportClampingRect.resize({width:this.node.width/this.MAX_ZOOM_LEVEL,height:this.node.height/this.MAX_ZOOM_LEVEL},e),this.softViewportClampingRect.clampToRect(this.worldRect);var r=PARSED_LOCATION.query.padding||world.icon_padding/2;this.softViewportClampingRect.resize({width:this.softViewportClampingRect.width+2*r,height:this.softViewportClampingRect.height+2*r},this.softViewportClampingRect.center());var s=64;this.softViewportClampingRect.resize({width:this.softViewportClampingRect.width,height:this.softViewportClampingRect.height+this.nodeDelta2World({y:s}).y},{x:this.softViewportClampingRect.center().x,y:this.softViewportClampingRect.bottom()})}this.viewportClampingRect=this.softViewportClampingRect.clone(),this.selectedApp()&&this.viewportClampingRect.resize({width:this.viewportClampingRect.width,height:this.viewportClampingRect.height+this.nodeDelta2World({y:w.TOOLTIP_HEIGHT}).y},{x:this.viewportClampingRect.center().x,y:0})},e.prototype.viewportGravity=function(){var t=this.selectedApp();return t?t.center:this.viewport.center},e.prototype._updateDownloadQueue=function(){this.tileManager.updateLoadQueue(this.viewportGravity(),this.viewport.zoomLevel)},e.prototype.selectApp=function(t){var e=this.viewport;if(t==this.selectedApp())return Promise.resolve();if(!t){window.history.replaceState(null,"",a.edit(window.location,null,["app"])),this.breathingAnimator.stop(),this.viewportClampingRect=this.softViewportClampingRect.clone();var i=null;return this.viewportMomentum.isRunning()?e.clampToWorldRect(this.viewportClampingRect):i=y.animate({viewport:e,easing:[300,10],animations:function(){e.clampToWorldRect(this.viewportClampingRect)}.bind(this)}),Promise.all([this.appTooltip.hideTooltip().then(function(){this.appTooltip.setApp(null)}.bind(this)),i])}window.history.replaceState(null,"",a.edit(window.location,{app:t.id})),this.appTooltip.setApp(t),this.tutorial.showExcept({mc:!!this.selectedApp()});var i=null;return this.viewportMomentum.isRunning()?this.updateSoftViewportClampingRect():i=y.animate({viewport:e,easing:[300,10],animations:function(){var i=this.clusters&&this.clusters[t.cluster];if(i){var n=Math.min(this.node.width/i.bounds.width,(this.node.height-w.TOOLTIP_HEIGHT)/i.bounds.height);n=Math.max(n,this.MIN_ZOOM_LEVEL),n=Math.min(n,this.MAX_ZOOM_LEVEL),e.zoomToLevel(n,t.center),e.translateCenterTo({x:i.center.x,y:i.center.y+w.TOOLTIP_HEIGHT/e.zoomLevel/2})}else e.zoomToLevel(this.MAX_ZOOM_LEVEL,t.center),e.translateCenterTo({x:t.center.x,y:t.center.y+w.TOOLTIP_HEIGHT/e.zoomLevel/2});this.updateSoftViewportClampingRect(),e.clampToWorldRect(this.viewportClampingRect)}.bind(this)}),Promise.all([this.appTooltip.previewTooltip(!0),i]).then(function(){this.breathingAnimator.start(t)}.bind(this))},e.prototype.selectedApp=function(){return this.appTooltip._app},e.prototype.nodePoint2World=function(t){return{x:t.x*this.pixelRatio/this.viewport.zoomLevel+this.viewport.center.x-this.viewport.size.width/2,y:t.y*this.pixelRatio/this.viewport.zoomLevel+this.viewport.center.y-this.viewport.size.height/2}},e.prototype.nodeDelta2World=function(t){return{x:t.x*this.pixelRatio/this.viewport.zoomLevel,y:t.y*this.pixelRatio/this.viewport.zoomLevel}},e.prototype.worldDelta2Node=function(t){return{x:t.x/this.pixelRatio*this.viewport.zoomLevel,y:t.y/this.pixelRatio*this.viewport.zoomLevel}},e.prototype.worldPoint2Node=function(t){return{x:(t.x-(this.viewport.center.x-this.viewport.size.width/2))/this.pixelRatio*this.viewport.zoomLevel,y:(t.y-(this.viewport.center.y-this.viewport.size.height/2))/this.pixelRatio*this.viewport.zoomLevel}},e.prototype.worldRect2Node=function(t){return t.x=t.x-(this.viewport.center.x-this.viewport.size.width/2),t.y=t.y-(this.viewport.center.y-this.viewport.size.height/2),t.x=t.x/this.pixelRatio*this.viewport.zoomLevel,t.y=t.y/this.pixelRatio*this.viewport.zoomLevel,t.width=t.width/this.pixelRatio*this.viewport.zoomLevel,t.height=t.height/this.pixelRatio*this.viewport.zoomLevel,t},e.prototype.updatePixelRatio=function(){var t=this.node.getContext("2d"),e=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;this.pixelRatio=e/i,this.pixelRatio=Math.min(world.maxPixelRatio,this.pixelRatio),_.forEach(C,function(t,e){this[e]=t*this.pixelRatio}.bind(this))},e.prototype.onResize=function(){this.updatePixelRatio(),this.node.width=this.$node.width()*this.pixelRatio,this.node.height=this.$node.height()*this.pixelRatio,this.buffer&&(this.buffer.width=this.node.width,this.buffer.height=this.node.height),this.viewport.adjustToSize({width:this.node.width/this.viewport.zoomLevel,height:this.node.height/this.viewport.zoomLevel}),this.viewport.clampToWorldRect(this.viewportClampingRect);var t=200;window.setTimeout(function(){this.appTooltip.syncPositionToState()}.bind(this),t),DEBUG,1},e.prototype._blurMap=function(t,e){t=Math.max(0,t),t=Math.min(1,t);var i=_.round(t*M,1);return e=e||void 0===e,e?(this._curblur&&(i=[i,this._curblur]),delete this._curblur):this._curblur=i,Velocity(this.node,"stop",!0),Velocity(this.node,{blur:i},{easing:"ease-out",duration:e?200:1,queue:!1})},e.prototype._blurExcept=function(t,e,i){return this._blurMap(t,e)},e.prototype.blurApp=function(t,e){t=t||void 0===t,t?($("body").addClass("blur"),$(e).addClass("focus")):($("body").removeClass("blur"),$(e).removeClass("focus"))},e.prototype.requestRender=function(){if(!this._boundRender){var t=this.buffer?this.buffer.getContext("2d"):this.node.getContext("2d");this._boundRender=this._render.bind(this,t)}requestAnimationFrame(this._boundRender)},e.prototype._render=function(t,e){if(!this._minMSBetweenFrames||e-this._prevTS<this._minMSBetweenFrames)return void(e-this._prevTS>.01&&this.requestRender());this._prevTS=e;var i=this.viewport;t.save(),t.fillStyle=world.tileBGColor,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),t.scale(i.zoomLevel,i.zoomLevel),t.translate(-(i.center.x-i.size.width/2),-(i.center.y-i.size.height/2)),
t.save(),t.fillStyle="red",t.globalCompositeOperation="destination-in",t.fillRect(this.worldRect.x,this.worldRect.y,this.worldRect.width,this.worldRect.height),t.restore(),this.tileManager.renderViewport(t,this.viewport,{lowRes:this._forceLowRes,ts:e}),this._renderClusterTexture&&this._renderClusterTexture(t,e),this.mapFilter.renderOnMap(t,e),this._renderDimmingLayer(t,e);var n=this.anchorManager.visibleAnchors;!this.filteredAnchors&&this.mapFilter.hasFilter()&&(this.filteredAnchors=_.intersection(this.anchorManager.visibleAnchors,this.mapFilter.filteredApps)),this.anchorManager.visibleAnchors=this.filteredAnchors||this.anchorManager.visibleAnchors,this.anchorManager.render(t,this.viewport,e),this.anchorManager.visibleAnchors=n,this.breathingAnimator.render(t,e),t.restore(),this._renderMotionBlur(t,e),this.edgeMarking.render(t,e),this.buffer&&requestAnimationFrame(this.fbs)},e.prototype._renderDimmingLayer=function(t,e){var i=.9*this.MAX_ZOOM_LEVEL,n=.5,r=(this.viewport.zoomLevel-this.MIN_ZOOM_LEVEL)/(i-this.MIN_ZOOM_LEVEL);r=1-r,r*=n,0>=r||(t.save(),t.fillStyle="rgba(0,0,0,"+r+")",t.fillRect(this.viewportClampingRect.x,this.viewportClampingRect.y,this.viewportClampingRect.width,this.viewportClampingRect.height),t.restore())},e.prototype._flushBufferToScreen=function(t){if(!(t-this._prevTSfbs<this._minMSBetweenFrames)){var e=this.node.getContext("2d");e.globalCompositeOperation="copy",e.drawImage(this.buffer,0,0,e.canvas.width,e.canvas.height),this._prevTSfbs=t}},e.prototype.forceLowRes=function(t){this._forceLowRes=t,l(this.node.getContext("2d"),!t)},e.prototype._renderMotionBlur=function(t,e){if(this._allowMotionBlur){var i=this.viewport.rectInWorld();if(!this._prevVPRect)return void(this._prevVPRect=i);var n=this.worldDelta2Node({x:i.x-this._prevVPRect.x,y:i.y-this._prevVPRect.y}),r=Math.pow(n.x,2)+Math.pow(n.y,2),s=this.worldDelta2Node({x:i.width-this._prevVPRect.width,y:i.height-this._prevVPRect.height}),o=Math.pow(s.x,2)+Math.pow(s.y,2),a=Math.max(r,o);if(a/=e-this._prevTS,!(2>=a)){t.save();var c=.15;t.globalAlpha=c,t.globalCompositeOperation="source-atop",t.drawImage(this.node,0,0),t.restore(),this._prevVPRect=i}}},e.prototype.requestRenderNoMotionBlur=function(){delete this._prevVPRect,this.requestRender()},t.exports=e},{hammerjs:29,"yttro/lib/ajax-image":46,"yttro/lib/event-loop":51,"yttro/lib/image-smoothing-enabled":58,"yttro/lib/manifest-md5":61,"yttro/lib/mobile-check":62,"yttro/lib/rect":65,"yttro/lib/url-hash":73,"yttro/lib/viewport":74,"yttro/model/anchor-manager":76,"yttro/model/app-item-manager":77,"yttro/model/category-manager":79,"yttro/model/tile":81,"yttro/model/tile-manager":80,"yttro/views/app-search":84,"yttro/views/app-tooltip/app-tooltip":86,"yttro/views/edge-marking":90,"yttro/views/feedback":91,"yttro/views/hamburger-menu":92,"yttro/views/map-render/breathing-animator":95,"yttro/views/map-render/map-filter":96,"yttro/views/map-render/viewport-animator":97,"yttro/views/map-render/viewport-momentum":98,"yttro/views/top-bar":109,"yttro/views/tutorial":110}],112:[function(require,t,exports){},{}],113:[function(require,t,exports){},{}],114:[function(require,t,exports){(function(e){!function(i){function n(t){throw new RangeError(L[t])}function r(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function s(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(M,".");var s=t.split("."),o=r(s,e).join(".");return n+o}function o(t){for(var e,i,n=[],r=0,s=t.length;s>r;)e=t.charCodeAt(r++),e>=55296&&56319>=e&&s>r?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function a(t){return r(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,i){var n=0;for(t=i?O(t/A):t>>1,t+=O(t/e);t>P*S>>1;n+=w)t=O(t/P);return O(n+(P+1)*t/(t+T))}function p(t){var e,i,r,s,o,l,p,u,d,f,_=[],m=t.length,g=0,v=I,y=R;for(i=t.lastIndexOf(E),0>i&&(i=0),r=0;i>r;++r)t.charCodeAt(r)>=128&&n("not-basic"),_.push(t.charCodeAt(r));for(s=i>0?i+1:0;m>s;){for(o=g,l=1,p=w;s>=m&&n("invalid-input"),u=c(t.charCodeAt(s++)),(u>=w||u>O((b-g)/l))&&n("overflow"),g+=u*l,d=y>=p?x:p>=y+S?S:p-y,!(d>u);p+=w)f=w-d,l>O(b/f)&&n("overflow"),l*=f;e=_.length+1,y=h(g-o,e,0==o),O(g/e)>b-v&&n("overflow"),v+=O(g/e),g%=e,_.splice(g++,0,v)}return a(_)}function u(t){var e,i,r,s,a,c,p,u,d,f,_,m,g,v,y,T=[];for(t=o(t),m=t.length,e=I,i=0,a=R,c=0;m>c;++c)_=t[c],128>_&&T.push(N(_));for(r=s=T.length,s&&T.push(E);m>r;){for(p=b,c=0;m>c;++c)_=t[c],_>=e&&p>_&&(p=_);for(g=r+1,p-e>O((b-i)/g)&&n("overflow"),i+=(p-e)*g,e=p,c=0;m>c;++c)if(_=t[c],e>_&&++i>b&&n("overflow"),_==e){for(u=i,d=w;f=a>=d?x:d>=a+S?S:d-a,!(f>u);d+=w)y=u-f,v=w-f,T.push(N(l(f+y%v,0))),u=O(y/v);T.push(N(l(u,0))),a=h(i,g,r==s),i=0,++r}++i,++e}return T.join("")}function d(t){return s(t,function(t){return C.test(t)?p(t.slice(4).toLowerCase()):t})}function f(t){return s(t,function(t){return k.test(t)?"xn--"+u(t):t})}var _="object"==typeof exports&&exports&&!exports.nodeType&&exports,m="object"==typeof t&&t&&!t.nodeType&&t,g="object"==typeof e&&e;(g.global===g||g.window===g||g.self===g)&&(i=g);var v,y,b=2147483647,w=36,x=1,S=26,T=38,A=700,R=72,I=128,E="-",C=/^xn--/,k=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=w-x,O=Math.floor,N=String.fromCharCode;if(v={version:"1.3.2",ucs2:{decode:o,encode:a},decode:p,encode:u,toASCII:f,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return v});else if(_&&m)if(t.exports==_)m.exports=v;else for(y in v)v.hasOwnProperty(y)&&(_[y]=v[y]);else i.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],115:[function(require,t,exports){"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,s){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(n);var c=1e3;s&&"number"==typeof s.maxKeys&&(c=s.maxKeys);var l=t.length;c>0&&l>c&&(l=c);for(var h=0;l>h;++h){var p,u,d,f,_=t[h].replace(a,"%20"),m=_.indexOf(r);m>=0?(p=_.substr(0,m),u=_.substr(m+1)):(p=_,u=""),d=decodeURIComponent(p),f=decodeURIComponent(u),e(o,d)?i(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],116:[function(require,t,exports){"use strict";function e(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,s,o,a){return s=s||"&",o=o||"=",null===t&&(t=void 0),"object"==typeof t?e(r(t),function(r){var a=encodeURIComponent(i(r))+o;return n(t[r])?e(t[r],function(t){return a+encodeURIComponent(i(t))}).join(s):a+encodeURIComponent(i(t[r]))}).join(s):a?encodeURIComponent(i(a))+o+encodeURIComponent(i(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],117:[function(require,t,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":115,"./encode":116}],118:[function(require,t,exports){"use strict";function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,i,n){if(t&&a.isObject(t)&&t instanceof e)return t;var r=new e;return r.parse(t,i,n),r}function n(t){return a.isString(t)&&(t=i(t)),t instanceof e?t.format():e.prototype.format.call(t)}function r(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}var o=require("punycode"),a=require("./util");exports.parse=i,exports.resolve=r,exports.resolveObject=s,exports.format=n,exports.Url=e;var c=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],u=["{","}","|","\\","^","`"].concat(p),d=["'"].concat(u),f=["%","/","?",";","#"].concat(d),_=["/","?","#"],m=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=require("querystring");e.prototype.parse=function(t,e,i){if(!a.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",s=t.split(r),l=/\\/g;s[0]=s[0].replace(l,"/"),t=s.join(r);var p=t;if(p=p.trim(),!i&&1===t.split("#").length){var u=h.exec(p);if(u)return this.path=p,this.href=p,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=x.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var S=c.exec(p);if(S){S=S[0];var T=S.toLowerCase();this.protocol=T,p=p.substr(S.length)}if(i||S||p.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===p.substr(0,2);!A||S&&b[S]||(p=p.substr(2),this.slashes=!0)}if(!b[S]&&(A||S&&!w[S])){for(var R=-1,I=0;I<_.length;I++){var E=p.indexOf(_[I]);-1!==E&&(-1===R||R>E)&&(R=E)}var C,k;k=-1===R?p.lastIndexOf("@"):p.lastIndexOf("@",R),-1!==k&&(C=p.slice(0,k),p=p.slice(k+1),this.auth=decodeURIComponent(C)),R=-1;for(var I=0;I<f.length;I++){var E=p.indexOf(f[I]);-1!==E&&(-1===R||R>E)&&(R=E)}-1===R&&(R=p.length),this.host=p.slice(0,R),p=p.slice(R),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var L=this.hostname.split(/\./),I=0,P=L.length;P>I;I++){var O=L[I];if(O&&!O.match(g)){for(var N="",D=0,F=O.length;F>D;D++)N+=O.charCodeAt(D)>127?"x":O[D];if(!N.match(g)){var q=L.slice(0,I),z=L.slice(I+1),j=O.match(v);j&&(q.push(j[1]),z.unshift(j[2])),z.length&&(p="/"+z.join(".")+p),this.hostname=q.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=o.toASCII(this.hostname));var V=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+V,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==p[0]&&(p="/"+p))}if(!y[T])for(var I=0,P=d.length;P>I;I++){var B=d[I];if(-1!==p.indexOf(B)){var W=encodeURIComponent(B);W===B&&(W=escape(B)),p=p.split(B).join(W)}}var H=p.indexOf("#");-1!==H&&(this.hash=p.substr(H),p=p.slice(0,H));var Y=p.indexOf("?");if(-1!==Y?(this.search=p.substr(Y),this.query=p.substr(Y+1),e&&(this.query=x.parse(this.query)),p=p.slice(0,Y)):e&&(this.search="",this.query={}),p&&(this.pathname=p),w[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",G=this.search||"";this.path=V+G}return this.href=this.format(),this},e.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(s=x.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+r+i+o+n},e.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},e.prototype.resolveObject=function(t){if(a.isString(t)){var i=new e;i.parse(t,!1,!0),t=i}for(var n=new e,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),l=0;l<c.length;l++){var h=c[l];"protocol"!==h&&(n[h]=t[h])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!w[t.protocol]){for(var p=Object.keys(t),u=0;u<p.length;u++){var d=p[u];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||b[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var _=n.pathname||"",m=n.search||"";n.path=_+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=v||g||n.host&&t.pathname,x=y,S=n.pathname&&n.pathname.split("/")||[],f=t.pathname&&t.pathname.split("/")||[],T=n.protocol&&!w[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),y=y&&(""===f[0]||""===S[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),n.search=t.search,n.query=t.query;else if(!a.isNullOrUndefined(t.search)){if(T){n.hostname=n.host=S.shift();var A=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;A&&(n.auth=A.shift(),n.host=n.hostname=A.shift())}return n.search=t.search,n.query=t.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var R=S.slice(-1)[0],I=(n.host||t.host||S.length>1)&&("."===R||".."===R)||""===R,E=0,C=S.length;C>=0;C--)R=S[C],"."===R?S.splice(C,1):".."===R?(S.splice(C,1),E++):E&&(S.splice(C,1),E--);if(!y&&!x)for(;E--;E)S.unshift("..");!y||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),I&&"/"!==S.join("/").substr(-1)&&S.push("");var k=""===S[0]||S[0]&&"/"===S[0].charAt(0);if(T){n.hostname=n.host=k?"":S.length?S.shift():"";var A=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;A&&(n.auth=A.shift(),n.host=n.hostname=A.shift())}return y=y||n.host&&S.length,y&&!k&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},e.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":119,punycode:114,querystring:117}],119:[function(require,t,exports){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}]},{},[44]);
