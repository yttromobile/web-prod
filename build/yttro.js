!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){window&&!window.__f12&&(window.addEventListener("keydown",function(a){123==a.keyCode}),window.__f12=1);var d=a("stats-lite"),e={htmlConsole:function(){if(!this.isHTMLConsole){this.isHTMLConsole=!0;var a=console.log,b=document.createElement("div");b.className="c-debug-log",b.innerHTML='<input type=checkbox id="debug-toggle" class="c-toggle"/><label for="debug-toggle" class="fa"></label><div id="c-logs"></div>',document.body.appendChild(b);var c=document.getElementById("c-logs");window.console.log=function(){a.apply(console,arguments);var b=document.createElement("pre");b.innerHTML=Array.prototype.join.call(arguments," "),c.appendChild(b),c.scrollTop=0}}},getStackTrace:function(){try{throw new Error("Stack Trace:")}catch(a){return a.stack}},interceptFunction:function(a,b,c){var d=a[b];a[b]=function(){return c(arguments),d.apply(a,arguments)}},whoCalled:function(a,b){e.interceptFunction(a,b,function(){var a=e.getStackTrace().split("\n").slice(4).join("\n");console.log(b," called by ",a)})},recordTime:function(a,b){return a=a||"",b=b||(new Date).getTime(),this._timeRecords=this._timeRecords||[],this._timeRecords.push({ts:b,name:a}),b},_name2duration:function(a){this._timeRecords=this._timeRecords||[];var b=this._timeRecords._durations=this._timeRecords._durations||{};return b[a]=b[a]||[],b[a]},startDuration:function(a){var b=this._name2duration(a);b._start&&this.endDuration(a),b._start=(new Date).getTime()},endDuration:function(a){var b=this._name2duration(a);if(b){var c=b._start;c&&(b.push((new Date).getTime()-c),b._start=null)}},duration:function(a){var b=this._name2duration(a);b._start?this.endDuration(a):this.startDuration(a)},timeDeltas:function(){if(this._timeRecords){var a=(this._timeRecords[0]||{}).ts;return this._timeRecords.map(function(b){return b.ts?"+"+(b.ts-a)+" ("+b.name+")":""}).concat(_.map(this._timeRecords._durations,function(a,b){if(a.length){if(1==a.length)return b+" - t:"+a[0].toFixed(2);a=a.sort();var c=d.sum(a),e=c/a.length,f=d.stdev(a),g=d.percentile(a,.85);return b+" - mean:"+e.toFixed(2)+" stddev:"+f.toFixed(2)+" 85th:"+g.toFixed(2)+" t:"+c.toFixed(2)+" c:"+a.length+" "}})).join("\n	")}},clearTimeRecords:function(){this._timeRecords=this._timeRecords||[],this._timeRecords.length=0,this._timeRecords._durations=null},drawPt:function(a,b,c){b=b||"red";var d=c||document.createElement("div"),e=10;return $(d).css({top:a.y-e/2,left:a.x-e/2,width:e,height:e,position:"absolute",backgroundColor:b,pointerEvents:"none",zIndex:4e4}),this._pts=this._pts||[],this._pts.push(d),d},clearPts:function(){for(var a=[],b=0,c=arguments.length;c>b;b++)a.push(arguments[b]);a=a.length?a:this._pts,_.map(a,function(a){$(a).remove()})}};b.exports=e,window&&window.React&&window.React.addons&&(window.Perf=React.addons.Perf,Perf.dump=function(){Perf.stop();var a=Perf.getLastMeasurements();console.log("-------------"),console.log("Inclusive (incl react components):"),Perf.printInclusive(a),console.log("Exclusive (excl react components):"),Perf.printExclusive(a),console.log("Wasted:"),Perf.printWasted(a),console.log("DOM:"),Perf.printDOM(a)})},{"stats-lite":7}],2:[function(a,b,c){b.exports={round:function(a,b){return b=b||1,b>1?Math.round(a/b)*b:(b=1/b,Math.round(a*b)/b)}}},{}],3:[function(a,b,c){this.console&&this.console.log?(this._Worker=Worker,Object.defineProperty(this,"Worker",{writable:!0}),this.Worker=function(a){var b=new _Worker("WorkerConsole.js#"+a),c=new MessageChannel;return b.postMessage("console",[c.port2]),c.port1.onmessage=function(b){var c=b.data;c.unshift(a+": "),console.log.apply(console,c)},b}):self.onmessage=function(a){if("console"===a.data){self.console={_port:a.ports[0],log:function(){var a=Array.prototype.slice.call(arguments);console._port.postMessage(a)}},onmessage=null;var b=location.hash.substring(1);importScripts(b)}}},{}],4:[function(a,b,c){!function(){"use strict";function a(){for(var b="",c=0;c<arguments.length;c++){var d=arguments[c];if(d){var e=typeof d;if("string"===e||"number"===e)b+=" "+d;else if(Array.isArray(d))b+=" "+a.apply(null,d);else if("object"===e)for(var f in d)d.hasOwnProperty(f)&&d[f]&&(b+=" "+f)}}return b.substr(1)}"undefined"!=typeof b&&b.exports?b.exports=a:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):window.classNames=a}()},{}],5:[function(a,b,c){var d=function(){"use strict";var a,b,c,d,e,f,g={width:"100%",height:"4px",zIndex:9999,top:"0"},h={width:0,height:"100%",clear:"both",transition:"height .3s"};return a=function(a,b){var c;for(c in b)a.style[c]=b[c];a.style["float"]="left"},d=function(){var a=this,b=this.width-this.here;.1>b&&b>-.1?(e.call(this,this.here),this.moving=!1,100==this.width&&(this.el.style.height=0,setTimeout(function(){a.cont.el.removeChild(a.el)},300))):(e.call(this,this.width-b/4),setTimeout(function(){a.go()},16))},e=function(a){this.width=a,this.el.style.width=this.width+"%"},f=function(){var a=new b(this);this.bars.unshift(a)},b=function(b){this.el=document.createElement("div"),this.el.style.backgroundColor=b.opts.bg,this.width=0,this.here=0,this.moving=!1,this.cont=b,a(this.el,h),b.el.appendChild(this.el)},b.prototype.go=function(a){a?(this.here=a,this.moving||(this.moving=!0,d.call(this))):this.moving&&d.call(this)},c=function(b){var c,d=this.opts=b||{};d.bg=d.bg||"#000",this.bars=[],c=this.el=document.createElement("div"),a(this.el,g),d.id&&(c.id=d.id),c.style.position=d.target?"relative":"fixed",d.target?d.target.insertBefore(c,d.target.firstChild):document.getElementsByTagName("body")[0].appendChild(c),f.call(this)},c.prototype.go=function(a){this.bars[0].go(a),100==a&&f.call(this)},c}();b.exports=d},{}],6:[function(a,b,c){function d(a){return!isNaN(parseFloat(a))&&isFinite(a)}b.exports=d},{}],7:[function(a,b,c){function d(a){var b=[];if(null==a)return b;for(var c=0;c<a.length;c++)m(a[c])&&b.push(+a[c]);return b}function e(a){return a.sort(function(a,b){return a-b})}function f(a){a=d(a);for(var b=0,c=0;c<a.length;c++)b+=a[c];return b}function g(a){return a=d(a),0===a.length?NaN:f(a)/a.length}function h(a){if(a=d(a),0===a.length)return NaN;var b=a.length/2|0;return a=e(a),a.length%2?a[b]:(a[b-1]+a[b])/2}function i(a){if(a=d(a),0===a.length)return NaN;var b=NaN,c={};a.forEach(function(a){var b=c[a]||0;b++,c[a]=b});var e=d(Object.keys(c).sort(function(a,b){return c[b]-c[a]}));return b=e[0],c[e[1]]==c[b]?NaN:b}function j(a){a=d(a);for(var b=g(a),c=[],e=0;e<a.length;e++)c.push(Math.pow(a[e]-b,2));return g(c)}function k(a){return Math.sqrt(j(a))}function l(a,b){if(a=d(a),0===a.length||null==b||0>b)return NaN;b>1&&(b=1),a=e(a);var c=a.length*b-.5;if((0|c)===c)return a[c];var f=0|c,g=c-f;return(1-g)*a[f]+g*a[f+1]}b.exports.numbers=d,b.exports.sum=f,b.exports.mean=g,b.exports.median=h,b.exports.mode=i,b.exports.variance=j,b.exports.stdev=k,b.exports.percentile=l;var m=a("isnumber")},{isnumber:6}],8:[function(a,b,c){function d(a){if(a.origin===window.location.origin){console.log("got parent data");var b=l.decodeResults(a.data);b[1].then(function(a){b[1]=a,e(b),window.removeEventListener("message",d)})}}function e(a){console.log("got results",a),_.mixin({fastMerge:function(a,b){for(var c in b)a[c]=b[c];return a}});var b=_.fastMerge(f.world,a[0]);console.log(b),b.bgImg=a[1],window.world=new j(b),window.eventLoop=new i({msPerTick:Math.round(1e3/world.FPS)}),window.ymap=new k(world,eventLoop)}var f=a("yttro/config"),g=a("yttro/lib/ajax"),h=a("yttro/lib/ajax-image"),i=a("yttro/lib/event-loop"),j=a("yttro/model/world"),k=a("yttro/views/ymap"),l=a("yttro/views/loader");self.Velocity=$.fn.velocity;var m=a("url");self.DEBUG=m.parse(self.location+"",!0).query.debug,window.history.length>1?(console.log("Running loader"),l.run(f)):window.opener?(window.addEventListener("message",d,!1),console.log("waiting for parent to send data"),window.opener.postMessage("ready",window.location.origin)):(console.log("Getting data directly b/c no opener"),Promise.all([g.get({url:f.world.jsonURL}),h.get({url:f.world.bgURL})]).then(e))},{url:32,"yttro/config":9,"yttro/lib/ajax":11,"yttro/lib/ajax-image":10,"yttro/lib/event-loop":12,"yttro/model/world":22,"yttro/views/loader":24,"yttro/views/ymap":27}],9:[function(a,b,c){b.exports={world:{FPS:60,bgURL:"map/AGA-v3/AGA_3_3x.jpg",jsonURL:"map/AGA-v3/AGA_3_metadata.json",affiliateToken:"1010l4FA",tileFormat:"map/AGA-v3/map_{scale}x_{y}_{x}.jpg",tileFormats:{1:"map/AGA-v3/map_1x_{y}_{x}.jpg",3:"map/AGA-v3/map_3x_{y}_{x}.jpg"}}}},{}],10:[function(a,b,c){a("3rdParty/WorkerConsole");var d=a("yttro/lib/webp-decode"),e={lossy:"data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},f={browserSupportsWebP:function(){if(this._browserSupportsWebPPromise)return this._browserSupportsWebPPromise;var a=function(a){return a.width>0&&a.height>0?Promise.resolve(a):Promise.reject(a)};return this._browserSupportsWebPPromise=Promise.all([this._getBasic(e.lossy).then(a),this._getBasic(e.lossless).then(a),this._getBasic(e.alpha).then(a),this._getBasic(e.animation).then(a)]),this._browserSupportsWebPPromise},_xhrPool:function(a){this._pending=this._pending||[],this._numOutstanding=this._numOutstanding||0;var b=5;if(!a)return this._numOutstanding>b?new Promise(function(a,b){this._pending.push(a)}.bind(this)):(++this._numOutstanding,Promise.resolve(new XMLHttpRequest));if(--this._numOutstanding,this._numOutstanding<b&&this._pending.length){var c=this._pending.shift();return this._xhrPool().then(c)}},_getRawBytesAndMimeType:function(a){if(a=a||{},!a.url)throw console.error(a),new Error("URL required");return this._xhrPool().then(function(b){b.open("GET",a.url,!0),a.onProgress&&b.addEventListener("progress",a.onProgress),b.responseType=a.responseType||"arraybuffer",b.onloadend=function(){this._xhrPool(b)}.bind(this);var c=new Promise(function(a,c){b.onload=function(){var c=b.response,d=b.getResponseHeader("content-type");a({bytes:c,mimeType:d})},b.onerror=function(a){c(a)}});return b.send(null),c}.bind(this))},_maybeConvertWebP2PNG:function(a){return/\/webp$/.test(a.mimeType)?this.browserSupportsWebP().then(function(){return a})["catch"](function(){var b=d(a.bytes);return a.bytes=b,a.mimeType="image/png",a}):Promise.resolve(a)},_bytesAndMimeType2Image:function(a){var b=new Blob([a.bytes],{type:a.mimeType}),c=self.URL||self.webkitURL||self,d=c.createObjectURL(b);return this._getBasic(d).then(function(a){return c.revokeObjectURL(d),a})},_getBasic:function(a){var b=new Image;return new Promise(function(c,d){b.onload=function(){c(b)},b.onerror=d,b.src=a})},getBytesAndMimeType:function(a){return a=a||{},this._getRawBytesAndMimeType(a).then(this._maybeConvertWebP2PNG.bind(this))},get:function(a){return a=a||{},this.getBytesAndMimeType(a).then(this._bytesAndMimeType2Image.bind(this))}};b.exports=f},{"3rdParty/WorkerConsole":3,"yttro/lib/webp-decode":16}],11:[function(a,b,c){b.exports={get:function(a){return a=_.merge({dataType:"json",type:"GET"},a),new Promise(function(b,c){req=$.ajax(a),req.then(b),req.fail(c)})},post:function(a){return a=_.merge({dataType:"json",type:"POST"},a),new Promise(function(b,c){req=$.ajax(a),req.then(b),req.fail(c)})}}},{}],12:[function(a,b,c){function d(a){a=a||{},this.msPerTick=a.msPerTick||33,this._boundOnTick=this._onTick.bind(this)}d.prototype={tick:function(){this._isTicking||(this._isTicking=setTimeout(this._boundOnTick,this.msPerTick))},_onTick:function(){$(this).trigger("tick"),delete this._isTicking;var a=$._data(this,"events");a&&a.tick.length&&(this._isTicking=setTimeout(this._boundOnTick,this.msPerTick))}},b.exports=d},{}],13:[function(a,b,c){b.exports={baseId:function(a){if(Number(a))return a;a+="";var b=a.match(/^(DGA-|AGA-)(.*)/);if(b)return b[2];var b=a.match(/.*[_\/]id(\d+)/);return b?b[1]:a}}},{}],14:[function(a,b,c){function d(a){a=a||{},this.x=a.x||0,this.y=a.y||0,this.width=a.width||0,this.height=a.height||0}d.prototype={center:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},left:function(){return this.x},right:function(){return this.x+this.width},top:function(){return this.y},bottom:function(){return this.y+this.height},tl:function(){return{x:this.left(),y:this.top()}},tr:function(){return{x:this.right(),y:this.top()}},bl:function(){return{x:this.left(),y:this.bottom()}},br:function(){return{x:this.right(),y:this.bottom()}},scale:function(a,b){a=Number(a)?{x:Number(a),y:Number(a)}:a,b=b||{x:0,y:0},this.x-=b.x,this.y-=b.y,this.x*=a.x,this.y*=a.y,this.x+=b.x,this.y+=b.y,this.width*=a.x,this.height*=a.y},clone:function(){return new d(this)},containsPoint:function(a){return this.left()<=a.x&&a.x<=this.right()&&this.top()<=a.y&&a.y<=this.bottom()},toString:function(){return"<YRect {"+this.x+","+this.y+"} {"+this.width+", "+this.height+"}>"},clampToRect:function(a){if(this.width>a.width||this.height>a.height)throw new Error(this+" is smaller than "+a);this.x=Math.max(this.x,a.x),this.x=Math.min(this.right(),a.right())-this.width,this.y=Math.max(this.y,a.y),this.y=Math.min(this.bottom(),a.bottom())-this.height}},d.intersection=function(a,b){var c=Math.max(a.left(),b.left()),e=Math.min(a.right(),b.right()),f=Math.max(a.top(),b.top()),g=Math.min(a.bottom(),b.bottom());return e>=c&&g>=f?new d({x:c,y:f,width:e-c,height:g-f}):null},b.exports=d},{}],15:[function(a,b,c){function d(a){a=a||{},this.center=_.clone(a.center||{x:0,y:0}),this.size=_.clone(a.size||{width:0,height:0}),this.zoomLevel=1}var e=a("yttro/lib/rect");d.prototype={rectInWorld:function(){var a=new e({x:0,y:0,width:this.size.width,height:this.size.height});return a.x=this.center.x-a.width/2,a.y=this.center.y-a.height/2,a},zoom:function(a,b){a=a||1,b=_.clone(b||this.center),this.center.x-=b.x,this.center.y-=b.y,this.center.x/=a,this.center.y/=a,this.center.x+=b.x,this.center.y+=b.y,this.size.width/=a,this.size.height/=a,this.zoomLevel*=a,$(this).trigger("didChange")},zoomToLevel:function(a,b){this.zoom(a/this.zoomLevel,b)},translate:function(a){this.center.x+=a.x,this.center.y+=a.y,$(this).trigger("didChange")},translateCenterTo:function(a){this.center.x=a.x,this.center.y=a.y,$(this).trigger("didChange")},clampToWorldRect:function(a){if(this.size.width>a.width||this.size.height>a.height){var b=Math.max(this.size.width/a.width,this.size.height/a.height);this.zoom(b)}this.center.x=Math.max(this.center.x,a.left()+this.size.width/2),this.center.x=Math.min(this.center.x,a.right()-this.size.width/2),this.center.y=Math.max(this.center.y,a.top()+this.size.height/2),this.center.y=Math.min(this.center.y,a.bottom()-this.size.height/2),$(this).trigger("didChange")},adjustToSize:function(a){this.size.width=a.width,this.size.height=a.height,$(this).trigger("didChange")}},b.exports=d},{"yttro/lib/rect":14}],16:[function(a,b,c){var d;b.exports=function(a){var b=new Uint8Array(a);d=d||new WebPDecoder;var c=d.WebPDecoderConfig.j,e=d.WebPDecoderConfig.input;if(!d.WebPInitDecoderConfig(d.WebPDecoderConfig))throw new Error("Library version mismatch!");if(status=d.WebPGetFeatures(b,b.length,e),0!=status)throw new Error("Error getting features: "+status);if(c.J=4,status=d.WebPDecode(b,b.length,d.WebPDecoderConfig),0!=status)throw new Error("Error decoding: "+status);var f=c.c.RGBA.ma;if(!f)throw new Error("Error decoding bytes");for(var g=c.height,h=c.width,i=0;g>i;i++)for(var j=0;h>j;j++){var k=4*j+4*h*i,l=f[0+k];f[0+k]=f[1+k],f[1+k]=f[2+k],f[2+k]=f[3+k],f[3+k]=l}return f}},{}],17:[function(a,b,c){function d(a){this.anchorApps=a.anchorApps,this.visibleAnchors=[],this.refreshVisibleAnchors()}var e=a("yttro/lib/rect");d.prototype.refreshVisibleAnchors=function(){var a=_.indexBy(this.visibleAnchors,"id"),b={},c=10,e=world.embed_array_num_rows/8,f=0;return _.chain(this.anchorApps).shuffle().forEach(function(g){return a[g.id]||d.anchorTooCloseToSet(b,g,e)?void 0:(b[g.id]=g,++f,f>=c?!1:void 0)}).value(),this.visibleAnchors=_.values(b),this.visibleAnchors},d.anchorTooCloseToSet=function(a,b,c){return _.some(a,function(a){return d.anchorsTooClose(a,b,c)})},d.anchorsTooClose=function(a,b,c){return Math.max(Math.abs(a.rowIndex-b.rowIndex),Math.abs(a.columnIndex-b.columnIndex))<c},d.prototype.renderViewport=function(a,b){if(this.visibleAnchors.length){var c=b.rectInWorld(),d=ymap.genWorldRect2NodeRect(a,c);this.visibleAnchors.forEach(function(f){var g=new e({x:0,y:0,width:f.size.width+world.icon_padding,height:f.size.height+world.icon_padding});g.x=f.center.x-g.width/2,g.y=f.center.y-g.height/2;var h=ymap.tileManager.tileForApp(f);if(h&&h.isLoaded()){var i=Math.max(1/b.zoomLevel,1),j=g.clone();j.scale({x:i,y:i},j.center());var k=e.intersection(j,c);if(k){var l=d(k),m=ymap.tileManager.rectForTileInWorld(h.x,h.y,h.scale);k.scale({x:1/i,y:1/i},j.center());var n=e.intersection(k,m);n&&(n.x-=m.x,n.y-=m.y,n.scale(1/h.scale),a.drawImage(h._img,n.left(),n.top(),n.width,n.height,l.left(),l.top(),l.width,l.height))}}})}},b.exports=d},{"yttro/lib/rect":14}],18:[function(a,b,c){function d(a){this.apps=_.map(a.apps,function(a){return new e(a)}),this.iconSize=a.iconSize,this.numRows=a.numRows,this.numColumns=a.numColumns}var e=a("yttro/model/app-item");d.prototype.appAtWorldPoint=function(a){var b=Math.floor(a.x/this.iconSize),c=Math.floor(a.y/this.iconSize);return this.apps[this.getLinearIndex(c,b)]},d.prototype.getLinearIndex=function(a,b){if(void 0===b){var c=a;a=c.rowIndex,b=c.columnIndex}return a*this.numColumns+b},b.exports=d},{"yttro/model/app-item":19}],19:[function(a,b,c){function d(a){this.rating=a.a,this.columnIndex=a.c,this.downloadCount=a.d,this.developerName=a.e,this.category=a.g,this.originalId=a.i,this.id=e.baseId(a.i),this.name=a.n,this.ratingCount=a.o,this.price=a.p,this.rowIndex=a.r,this.videos=a.v;var b=world.icon_padding,c=world.icon_size;this.size={width:b+c,height:b+c},this.center={x:(this.columnIndex+.5)*this.size.width,y:(this.rowIndex+.5)*this.size.height}}var e=a("yttro/lib/id-util"),f=a("yttro/lib/rect"),g=a("yttro/lib/ajax");d.prototype={rectInWorld:function(){return new f({x:this.center.x-this.size.width/2,y:this.center.y-this.size.height/2,width:this.size.width,height:this.size.height})},rectInTile:function(a){a=a||this.tile;var b=ymap.tileManager.rectForTileInWorld(a.x,a.y,a.scale),c=this.rectInWorld();return c.x-=b.x,c.y-=b.y,c.scale(1/a.scale),c},tile:function(){var a=ymap.tileManager.tileForApp(this);return a&&a.isLoaded()?a:null},getIconRectInTile:function(a){if(a=a||this.tile(),!a)return null;var b=this.rectInTile(a);return b},getAffiliateURL:function(){var a="https://itunes.apple.com/us/app/games/id"+this.id+"?at="+world.affiliateToken;return a},isLoaded:function(){return this.screenshots&&(this.screenshots.length||0===this.screenshots.length)},loadFullData:function(){return g.get({dataType:"JSONP",url:"https://itunes.apple.com/lookup?id="+this.id}).then(function(a){return a=a.results[0],this.screenshots=a.screenshotUrls||[],this.artistName=a.artistName,this.description=a.description,$(this).trigger("didChange"),this}.bind(this))}},b.exports=d},{"yttro/lib/ajax":11,"yttro/lib/id-util":13,"yttro/lib/rect":14}],20:[function(a,b,c){function d(a){this.bgTile=new f({img:a.bgImg,x:0,y:0,scale:Math.min(a.worldSize.width/a.bgImg.width,a.worldSize.height/a.bgImg.height)}),this.tileSize=a.tileSize,this.worldSize=a.worldSize,this.tiles=[],this.loadTiles()}function e(a,b,c){var d=a.concat();setTimeout(function(){b(d.shift()),d.length>0&&setTimeout(arguments.callee,c)},c)}var f=a("yttro/model/tile"),g=(a("3rdParty/RandomBits/RBMath"),a("yttro/lib/rect"));d.prototype.minTileX=function(){return 0},d.prototype.minTileY=function(){return 0},d.prototype.maxTileX=function(a){return Math.floor(this.worldSize.width/this.tileSize)-1},d.prototype.maxTileY=function(a){return Math.floor(this.worldSize.height/this.tileSize)-1},d.prototype.loadTiles=function(){for(var a=[],b=this.minTileX();b<=this.maxTileX();++b)for(var c=this.minTileY();c<=this.maxTileY();++c){this.tiles[b]=this.tiles[b]||[];var d=this.tiles[b][c]||new f({size:{width:this.tileSize,height:this.tileSize},x:b,y:c,scale:1});this.tiles[b][c]=d,a.push(d)}e(a,function(a){a.load().then(function(){ymap.requestRender()})})},d.prototype.rectForTileInWorld=function(a,b,c){return new g(c==this.bgTile.scale?{x:0,y:0,width:this.worldSize.width,height:this.worldSize.height}:{x:a*this.tileSize,y:b*this.tileSize,width:this.tileSize,height:this.tileSize})},d.prototype.tileForApp=function(a,b){b=b||1;var c=Math.floor(a.center.x/this.tileSize),d=Math.floor(a.center.y/this.tileSize),e=this.tiles[c][d];return e&&e.isLoaded()?e:this.bgTile},d.prototype.renderViewport=function(a,b,c){this.tiles.length&&(c||b.zoomLevel<.9?this._renderViewportLoRes(a,b):this._renderViewportHiRes(a,b))},d.prototype._renderViewportLoRes=function(a,b){var c=b.rectInWorld(),d=ymap.genWorldRect2NodeRect(a,c),e=this.rectForTileInWorld(0,0,this.bgTile.scale),f=g.intersection(e,c),h=d(f),i=f;i.x/=this.bgTile.scale,i.y/=this.bgTile.scale,i.width/=this.bgTile.scale,i.height/=this.bgTile.scale,a.drawImage(this.bgTile._img,i.left(),i.top(),i.width,i.height,h.left(),h.top(),h.width,h.height)},d.prototype._renderViewportHiRes=function(a,b){var c=b.rectInWorld(),d=ymap.genWorldRect2NodeRect(a,c),e=Math.floor(c.left()/this.tileSize);e=Math.max(e,this.minTileX());var f=Math.ceil(c.right()/this.tileSize)-1;f=Math.min(f,this.maxTileX());var h=Math.floor(c.top()/this.tileSize);h=Math.max(h,this.minTileY());var i=Math.ceil(c.bottom()/this.tileSize)-1;i=Math.min(i,this.maxTileY());for(var j=e;f>=j;++j)for(var k=h;i>=k;++k){var l=this.tiles[j]||[];!l.length;var m=l[k];if(tileInWorld=this.rectForTileInWorld(j,k),m&&m.isLoaded()){var n=g.intersection(tileInWorld,c),o=d(n),p=n;p.x-=tileInWorld.x,p.y-=tileInWorld.y,a.drawImage(m._img,p.left(),p.top(),p.width,p.height,o.left(),o.top(),o.width,o.height)}else{var n=g.intersection(tileInWorld,c),o=d(n),p=n;p.x/=this.bgTile.scale,p.y/=this.bgTile.scale,p.width/=this.bgTile.scale,p.height/=this.bgTile.scale,a.drawImage(this.bgTile._img,p.left(),p.top(),p.width,p.height,o.left(),o.top(),o.width,o.height)}}},b.exports=d},{"3rdParty/RandomBits/RBMath":2,"yttro/lib/rect":14,"yttro/model/tile":21}],21:[function(a,b,c){function d(a){this._img=a.img||new Image,this.center={x:0,y:0},this.size=_.clone(a.size||{width:this._img.width,height:this._img.height}),this.scale=a.scale||1,this.x=a.x,this.y=a.y}var e=a("yttro/lib/ajax-image");d.prototype={load:function(){if(this._imgLoadPromise)return this._imgLoadPromise;if(/^data:/.test(this._img.src))return Promise.resolve(this);if(this._img.src&&this._img.complete)return Promise.resolve(this);if(!this._img.src){var a=this.src();if(a==this._img.src)return Promise.resolve(this)}return this._imgLoadPromise=e.get({url:a}).then(function(a){delete this._imgLoadPromise,this._img=a}.bind(this))["catch"](function(a){throw delete this._imgLoadPromise,a}.bind(this)),this._imgLoadPromise},isLoaded:function(){return this._isLoaded?!0:(this._isLoaded=this._img.src&&this._img.complete,this._isLoaded)},src:function(){if(3==this.scale)return world.bgURL;var a=window.world.tileFormat;return a=a.replace("{x}",this.x),a=a.replace("{y}",this.y),a=a.replace("{scale}",this.scale)}},b.exports=d},{"yttro/lib/ajax-image":10}],22:[function(a,b,c){function d(a){_.fastMerge(this,a),this.size={width:this.image_width,height:this.image_height}}b.exports=d},{}],23:[function(a,b,c){"use strict";function d(a){var b=a.parentNode,c="app-tooltip";this.$node=$(b).find("#"+c),this.$node.length||(this.$node=$('<div id="'+c+'"></div>').appendTo($(b))),this.node=this.$node[0],this._tooltipVisible=!1,this._isFullScreen=!1,this._app=null}var e=a("classnames");d.prototype={setApp:function(a){this._app!=a&&(this._app&&$(a).off("didChange.app-tooltip",this._onAppChange.bind(this)),this._app=a,$(a).on("didChange.app-tooltip",this._onAppChange.bind(this)),this._render())},setTooltipVisible:function(a){return this._tooltipVisible==a?Promise.resolve([this.node]):(this._tooltipVisible=a,Velocity(this.node,"stop"),Velocity(this.node,{translateY:a?"0%":"100%"},{duration:250,easing:"ease-out"}))},openFullScreen:function(){return this._isFullScreen=!0,Velocity(this.node,"stop"),this._openPromise=Velocity(this.node,{height:$(this.node.parentNode).height()},{duration:250,easing:"ease-out"}),this._openPromise},closeFullScreen:function(a){if(this._isFullScreen=!1,Velocity(this.node,"stop"),!a&&this._openPromise){var b=this._openPromise;return delete this._openPromise,b.then(function(a){return Velocity(a,"reverse")})}Velocity(this.node,{height:a},{duration:250,easing:"ease-out"})},_onAppChange:function(a){a&&!a.currentTarget!=this._app&&this._render()},_render:function(){if(!this._app)return void this.$node.html("");var a=React.createElement("div",{className:"container"},React.createElement(f,{app:this._app}),React.createElement(h,{app:this._app}));this.$node.html(React.renderToStaticMarkup(a))}};var f=React.createClass({displayName:"TopCard",propTypes:{app:React.PropTypes.object},render:function(){var a=this.props.app,b=a.getAffiliateURL();return React.createElement("div",{className:"top-card"},React.createElement("a",{className:"app-icon-and-price",href:b,target:"_blank"},React.createElement(g,{app:a}),React.createElement("div",{className:"app-price"},a.price)),React.createElement("div",{className:"other-metadata"},React.createElement("a",{href:b,target:"_blank"},a.name),React.createElement("div",null,a.rating," stars ",a.ratingCount),React.createElement("div",null,a.category)))}}),g=React.createClass({displayName:"AppIcon",propTypes:{app:React.PropTypes.object},render:function(){var a=this.props.app.tile();if(!a)return null;var b=this.props.app.getIconRectInTile(a);if(!b)return null;var c=e("app-icon","x"+a.scale);return React.createElement("div",{className:c},React.createElement("div",{style:{backgroundImage:"url("+a.src()+")",backgroundPosition:-b.x/b.width*100+"% "+-b.y/b.height*100+"%"}}))}}),h=React.createClass({displayName:"DescriptionAndScreenshots",propTypes:{app:React.PropTypes.object},render:function(){if(!this.props.app.isLoaded())return this.props.app.loadFullData(),React.createElement("div",{className:"description-and-screenshots"},React.createElement("center",null,"Loading"));var a=this.props.app.description.split("\n").map(function(a,b){return[a,React.createElement("br",null)]});a=React.createElement("div",{className:"description"},a);var b=React.createElement("div",{className:"screenshots"},this.props.app.screenshots.map(function(a,b){return React.createElement("img",{key:b,src:a})}));return React.createElement("div",{className:"description-and-screenshots"},a,b)}});d.DescriptionAndScreenshots=h,b.exports=d},{classnames:4}],24:[function(a,b,c){var d=a("yttro/lib/ajax"),e=a("yttro/lib/ajax-image"),f=a("nanobar");b.exports=Loader={run:function(a){function b(a,b){g[a]=b;for(var d=0,e=0;e<g.length;++e)d+=Number(g[e])||0;d/=g.length;var f=.2,h=.95;d=d*(h-f)+f,console.log(Math.round(100*d)),c.go(Math.round(100*d));var i=Math.round(100*d);$("#loader center").html("Loading "+i+"%")}console.log(a),$("#loader").length||$("body").append("<div id='loader'><center></center></div>");var c=new f({id:"nanobar",target:$("#loader")[0]}),g=[];g.length=2,Promise.all([d.get({xhr:function(){var a=new window.XMLHttpRequest;return a.addEventListener("progress",function(a){if(a.lengthComputable){var c=a.loaded/a.total,d=0;b(d,c)}}),a},url:a.world.jsonURL}),e.getBytesAndMimeType({onProgress:function(a){if(a.lengthComputable){var c=a.loaded/a.total,d=1;b(d,c)}},url:a.world.bgURL})]).then(function(a){console.log("done"),$("#loader").css({backgroundColor:"black"}),$("#loader center").html("Ready! <br> Tap to start exploring"),c.go(100);var b=Loader.encodeResults(a);window.childWindow=null,$("#loader").on("click",function(){childWindow=window.open(window.location+"","_blank","",!0)}),window.addEventListener("message",function(a){a.origin===window.location.origin&&"ready"==a.data&&a.source.postMessage(b,window.location.origin)})})},encodeResults:function(a){return[JSON.stringify(a[0]),a[1].mimeType,a[1].bytes]},decodeResults:function(a){return[JSON.parse(a[0]),e._bytesAndMimeType2Image({mimeType:a[1],bytes:a[2]})]}}},{nanobar:5,"yttro/lib/ajax":11,"yttro/lib/ajax-image":10}],25:[function(a,b,c){var d={animate:function(a){var b=a.viewport,c=d._saveState(b);a.animations();var e=d._saveState(b);d._setStateByLERP(b,c,e,0);var f=Math.pow(e.center.x-c.center.x,2)+Math.pow(e.center.y-c.center.y,2)+Math.pow(e.zoomLevel-c.zoomLevel,2);f>1e5&&ymap.setMotionBlurring(!0);var g=a.progress;return a.progress=function(a,f,h,i,j){d._setStateByLERP(b,c,e,f),g&&g.apply(this,arguments)},a.queue=a.queue||!1,a.duration=window._SLOW_ANIMATIONS?2e3:a.duration,d.dummy=d.dummy||document.createElement("div"),Velocity(d.dummy,{tween:[0,100]},a)},_saveState:function(a){return{center:_.clone(a.center),size:_.clone(a.size),zoomLevel:a.zoomLevel}},_setStateByLERP:function(a,b,c,d){a.center.x=(c.center.x-b.center.x)*d+b.center.x,a.center.y=(c.center.y-b.center.y)*d+b.center.y,a.size.width=(c.size.width-b.size.width)*d+b.size.width,a.size.height=(c.size.height-b.size.height)*d+b.size.height,a.zoomLevel=(c.zoomLevel-b.zoomLevel)*d+b.zoomLevel,a.clampToWorldRect(ymap.worldRect),$(a).trigger("didChange")}};b.exports=d},{}],26:[function(a,b,c){function d(a){this.friction=.9,this.viewport=a.viewport,this.eventLoop=a.eventLoop,this.worldRect=a.worldRect}d.prototype={stop:function(){this.setVelocity({x:0,y:0})},setVelocity:function(a){this.velocity=a,this._handleTick||(this._handleTick=this._onTick.bind(this),$(this.eventLoop).on("tick",this._handleTick)),this.eventLoop.tick()},_onTick:function(a){if(this.velocity){if(!this._prevTS)return void(this._prevTS=a.timeStamp);var b=a.timeStamp-this._prevTS;this.viewport.translate({x:this.velocity.x*b,y:this.velocity.y*b}),this.viewport.clampToWorldRect(this.worldRect),this.velocity.x*=this.friction,this.velocity.y*=this.friction,Math.abs(this.velocity.x)*eventLoop.msPerTick<.01&&(this.velocity.x=0),Math.abs(this.velocity.y)*eventLoop.msPerTick<.01&&(this.velocity.y=0),this._prevTS=a.timeStamp,0==this.velocity.x&&0==this.velocity.y&&($(a.currentTarget).off("tick",this._handleTick),delete this._handleTick)}}},b.exports=d},{}],27:[function(a,b,c){function d(a,b){this.$node=$("#YMap"),this.node=this.$node[0],this.buffer=document.createElement("canvas"),this.$buffer=$(this.buffer),this.$buffer.css({display:"none"}),this.fbsLoop=function(a){this._flushBufferToScreen(),requestAnimationFrame(this.fbsLoop)}.bind(this),this.fbsLoop();var c=new i;this.viewport=c,this.updatePixelRatio();var d=new e(a.size);this.worldRect=d,this.tileManager=new f({bgImg:a.bgImg,tileSize:a.tile_size,worldSize:a.size}),this.appItemManager=new g({apps:a.items_array,iconSize:a.icon_size+a.icon_padding,numColumns:a.embed_array_num_cols,numRows:a.embed_array_num_rows}),this.anchorManager=new h({anchorApps:_.chain(a.toplist_anchors).map(function(a){return this.appItemManager.apps[a]}.bind(this)).filter().value()}),this.appTooltip=new l({parentNode:this.node.parentNode}),$(window).resize(this.onResize.bind(this)),this.onResize(),$(this.viewport).on("didChange",this.requestRender.bind(this));var m=new Hammer.Manager(this.node),r=new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:3});m.add(r);var s={x:0,y:0};m.on("panstart panmove panend pinchstart pinchmove",function(a){var b=this.nodeDelta2World({
x:a.deltaX,y:a.deltaY});return"panstart"==a.type||"pinchstart"==a.type?void(s=b):(c.translate({x:s.x-b.x,y:s.y-b.y}),c.clampToWorldRect(d),void(s=b))}.bind(this));var t=function(a,b){var e=a*c.zoomLevel;e=Math.max(e,p),e=Math.min(e,o);var f=1.5;if(!(e/c.zoomLevel>f||e/c.zoomLevel<1/f)){var g=this.nodePoint2World(b);c.zoomToLevel(e,g),c.clampToWorldRect(d),1>a&&this.selectApp(null)}}.bind(this),u=new Hammer.Pinch({threshold:0});m.add(u),m.get("pinch").recognizeWith("pan");var v=1;m.on("pinchstart pinchmove",function(a){return"pinchstart"==a.type?void(v=a.scale):(t(a.scale/v,a.center),void(v=a.scale))}),self.addEventListener("mousewheel",function(a){var b=a.deltaY>0?1:-1,c=Math.log(Math.abs(a.deltaY));c*=b;var d=50/(50+c);d=Math.max(d,0),d=Math.min(d,2.5);var e={x:a.clientX,y:a.clientY};t(d,e)}.bind(this)),m.add(new Hammer.Tap({event:"doubletap",taps:2,posThreshold:25,interval:n})),m.on("doubletap",function(a){var b=c.zoomLevel>=o;b&&this.selectApp(null);var d=this.nodePoint2World(a.center);k.animate({viewport:c,animations:function(){b?c.zoomToLevel(p,d):c.zoomToLevel(o,d)},easing:[300,10]}).then(function(){this.setMotionBlurring(!1)}.bind(this))}.bind(this)),m.add(new Hammer.Tap({event:"singletap",posThreshold:25,interval:n})),m.get("doubletap").recognizeWith("singletap"),m.get("singletap").requireFailure("doubletap"),m.on("singletap",function(a){if(c.zoomLevel>=q){var b=this.nodePoint2World(a.center),d=this.appItemManager.appAtWorldPoint(b);return void(d&&this.selectApp(d))}var b=this.nodePoint2World(a.center),f=_.find(this.anchorManager.visibleAnchors,function(a){var d=15,f=new e({x:0,y:0,width:(a.size.width+2*d)/c.zoomLevel,height:(a.size.height+2*d)/c.zoomLevel});return f.x=a.center.x-f.width/2,f.y=a.center.y-f.height/2,f.containsPoint(b)});f&&(this.selectApp(f),m.stop(!0))}.bind(this)),window.viewportMomentum=new j({viewport:c,eventLoop:b,worldRect:d});var w=new Hammer.Swipe({event:"swipe",direction:Hammer.DIRECTION_ALL,threshold:1});m.add(w),m.get("swipe").recognizeWith("pan"),m.on("swipe",function(a){var b={x:a.velocityX,y:a.velocityY};b=this.nodeDelta2World(b),viewportMomentum.setVelocity(b)}.bind(this)),this.$node.on("touchstart mousedown mousewheel",viewportMomentum.stop.bind(viewportMomentum));var x=new Hammer.Manager(this.appTooltip.node,{touchAction:"auto"}),y=new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:5});x.add(y);var z=100,A=z,B=.7,C=.15,D=0;window.lastVelocityY=void 0;var E=Hammer.DIRECTION_VERTICAL;x.on("panstart panmove panend",function(a){if(lastVelocityY=a.velocityY,"panstart"==a.type){if(A=$(this.appTooltip.node.parentNode).height(),D=$(this.appTooltip.node).height(),E=a.direction,console.log(" Locking DIR",E),!(E&Hammer.DIRECTION_VERTICAL))return;return a.srcEvent.preventDefault(),void a.preventDefault()}if("panmove"==a.type){if(!(E&Hammer.DIRECTION_VERTICAL))return;a.srcEvent.preventDefault(),a.preventDefault();var b=D-a.deltaY;return b=Math.max(b,0),b=Math.min(b,A),void $(this.appTooltip.node).height(b)}if("panend"==a.type){if(lastVelocityY=void 0,!(E&Hammer.DIRECTION_VERTICAL))return;a.srcEvent.preventDefault(),a.preventDefault();var c=$(this.appTooltip.node).height();if(z>c)return console.log("too small, deselect app"),void this.selectApp(null).then(function(){$(this.appTooltip.node).height(z)}.bind(this));if(a.velocityY>B&&!this.appTooltip._isFullScreen)return console.log("big swing up -- full screen"),void this.appTooltip.openFullScreen();if(a.velocityY<-B&&this.appTooltip._isFullScreen)return console.log("big swing down -- close full screen"),void this.appTooltip.closeFullScreen(z);var d=Math.abs(c-D)/(A-z);return void(d>C?this.appTooltip._isFullScreen&&D>c?(console.log("cont close"),this.appTooltip.closeFullScreen(z)):!this.appTooltip._isFullScreen&&c>D&&(console.log("cont open"),this.appTooltip.openFullScreen()):this.appTooltip._isFullScreen?(console.log("revert to open"),this.appTooltip.openFullScreen()):(console.log("revert to close"),this.appTooltip.closeFullScreen(z)))}}.bind(this)),x.add(new Hammer.Tap({event:"singletap",posThreshold:25,interval:n})),x.on("singletap",function(a){this.appTooltip.openFullScreen()}.bind(this)),document.addEventListener("touchmove",function(a){(void 0===lastVelocityY||Math.abs(lastVelocityY)>.01)&&a.preventDefault()}.bind(this));var F=1;F=.71,F=1/6,c.zoom(F),c.clampToWorldRect(d),this.requestRender()}var e=a("yttro/lib/rect"),f=a("yttro/model/tile-manager"),g=a("yttro/model/app-item-manager"),h=a("yttro/model/anchor-manager"),i=a("yttro/lib/viewport"),j=a("yttro/views/viewport-momentum"),k=a("yttro/views/viewport-animator"),l=a("yttro/views/app-tooltip"),m=a("3rdParty/RandomBits/RBDebug"),n=200,o=1.5,p=1/6,q=.75;d.prototype.selectApp=function(a){if(!a)return this.appTooltip.setTooltipVisible(!1).then(function(){this.appTooltip.setApp(null)}.bind(this));var b=this.viewport,c=this.worldRect;return k.animate({viewport:b,easing:[300,10],animations:function(){b.zoomToLevel(o,a.center),b.translate({x:a.center.x-b.center.x,y:a.center.y-b.center.y}),b.clampToWorldRect(c)}.bind(this)}).then(function(){this.setMotionBlurring(!1)}.bind(this)),this.appTooltip.setApp(a),this.appTooltip.setTooltipVisible(!0)},d.prototype.nodePoint2World=function(a){return{x:a.x*this.pixelRatio/this.viewport.zoomLevel+this.viewport.center.x-this.viewport.size.width/2,y:a.y*this.pixelRatio/this.viewport.zoomLevel+this.viewport.center.y-this.viewport.size.height/2}},d.prototype.nodeDelta2World=function(a){return{x:a.x*this.pixelRatio/this.viewport.zoomLevel,y:a.y*this.pixelRatio/this.viewport.zoomLevel}},d.prototype.worldDelta2Node=function(a){return{x:a.x/this.pixelRatio*this.viewport.zoomLevel,y:a.y/this.pixelRatio*this.viewport.zoomLevel}},d.prototype.updatePixelRatio=function(){var a=this.node.getContext("2d"),b=window.devicePixelRatio||1,c=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;this.pixelRatio=b/c},d.prototype.onResize=function(){this.updatePixelRatio(),this.node.width=this.$node.width()*this.pixelRatio,this.node.height=this.$node.height()*this.pixelRatio,this.buffer.width=this.node.width,this.buffer.height=this.node.height,this.viewport.adjustToSize({width:this.node.width/this.viewport.zoomLevel,height:this.node.height/this.viewport.zoomLevel}),this.viewport.clampToWorldRect(this.worldRect),DEBUG&&(m.clearPts(),this.drawPt(this.viewport.center),$(document.body).on("keyup",function(a){a.ctrlKey&&84==a.keyCode&&(window._SLOW_ANIMATIONS=!window._SLOW_ANIMATIONS,console.log("slow animations set to ",window._SLOW_ANIMATIONS))}))},d.prototype.genWorldRect2NodeRect=function(a,b){var c=b.x,d=b.y,f=a.canvas.width/b.width,g=a.canvas.height/b.height;return function(a){var b=new e({x:(a.x-c)*f,y:(a.y-d)*g,width:a.width*f,height:a.height*g});return b}},d.prototype.drawPt=function(a,b){var c=this.viewport.rectInWorld(),d=m.drawPt({x:(a.x-c.left())*this.viewport.zoomLevel/this.pixelRatio,y:(a.y-c.top())*this.viewport.zoomLevel/this.pixelRatio},b);this.node.parentNode.appendChild(d)},d.prototype.requestRender=function(){this._boundRender||(this._boundRender=this._render.bind(this)),requestAnimationFrame(this._boundRender)},d.prototype._render=function(a){if(!(a-this._prevTS<1/world.FPS)){this._prevTS=a;var b=this.buffer.getContext("2d");if(this._motionBlurring){var c=.2;b.globalCompositeOperation="source-over",b.globalAlpha=1-c}else b.globalCompositeOperation="source",b.globalAlpha=1;this.tileManager.renderViewport(b,this.viewport,this._motionBlurring),this._renderDimmingLayer(b),this.anchorManager.renderViewport(b,this.viewport)}},d.prototype._renderDimmingLayer=function(a){a.save();var b=1,c=.5,d=(this.viewport.zoomLevel-p)/(b-p);d=1-d,d*=c,a.fillStyle="rgba(0,0,0,"+d+")",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.restore()},d.prototype._flushBufferToScreen=function(a){var b=this.node.getContext("2d");b.globalCompositeOperation="copy",b.drawImage(this.buffer,0,0,b.canvas.width,b.canvas.height)},d.prototype.setMotionBlurring=function(a){this._motionBlurring!=a&&(this._motionBlurring=a,this.requestRender())},b.exports=d},{"3rdParty/RandomBits/RBDebug":1,"yttro/lib/rect":14,"yttro/lib/viewport":15,"yttro/model/anchor-manager":17,"yttro/model/app-item-manager":18,"yttro/model/tile-manager":20,"yttro/views/app-tooltip":23,"yttro/views/viewport-animator":25,"yttro/views/viewport-momentum":26}],28:[function(a,b,c){(function(a){!function(d){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,".");var e=a.split("."),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;(s.global===s||s.window===s||s.self===s)&&(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.3.2",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],30:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],31:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":29,"./encode":30}],32:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:28,querystring:31}]},{},[8]);