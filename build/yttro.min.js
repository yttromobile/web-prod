!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){window&&!window.__f12&&(window.addEventListener("keydown",function(a){123==a.keyCode}),window.__f12=1);var d=a("stats-lite"),e={htmlConsole:function(){if(!this.isHTMLConsole){this.isHTMLConsole=!0;var a=console.log,b=document.createElement("div");b.className="c-debug-log",b.innerHTML='<input type=checkbox id="debug-toggle" class="c-toggle"/><label for="debug-toggle" class="fa"></label><div id="c-logs"></div>',document.body.appendChild(b);var c=document.getElementById("c-logs");window.console.log=function(){a.apply(console,arguments);var b=document.createElement("pre");b.innerHTML=Array.prototype.join.call(arguments," "),c.appendChild(b),c.scrollTop=0}}},setTimeoutPromise:function(a){return function(b){return new Promise(function(c,d){window.setTimeout(function(){c(b)},a)})}},getStackTrace:function(){try{throw new Error("Stack Trace:")}catch(a){return a.stack}},interceptFunction:function(a,b,c){var d=a[b];a[b]=function(){return c(arguments),d.apply(a,arguments)}},whoCalled:function(a,b){e.interceptFunction(a,b,function(){var a=e.getStackTrace().split("\n").slice(4).join("\n");console.log(b," called by ",a)})},recordTime:function(a,b){return a=a||"",b=b||(new Date).getTime(),this._timeRecords=this._timeRecords||[],this._timeRecords.push({ts:b,name:a}),b},_name2duration:function(a){this._timeRecords=this._timeRecords||[];var b=this._timeRecords._durations=this._timeRecords._durations||{};return b[a]=b[a]||[],b[a]},startDuration:function(a){var b=this._name2duration(a);b._start&&this.endDuration(a),b._start=(new Date).getTime()},endDuration:function(a){var b=this._name2duration(a);if(b){var c=b._start;c&&(b.push((new Date).getTime()-c),b._start=null)}},duration:function(a){var b=this._name2duration(a);b._start?this.endDuration(a):this.startDuration(a)},timeDeltas:function(){if(this._timeRecords){var a=(this._timeRecords[0]||{}).ts;return this._timeRecords.map(function(b){return b.ts?"+"+(b.ts-a)+" ("+b.name+")":""}).concat(_.map(this._timeRecords._durations,function(a,b){if(a.length){if(1==a.length)return b+" - t:"+a[0].toFixed(2);a=a.sort();var c=d.sum(a),e=c/a.length,f=d.stdev(a),g=d.percentile(a,.85);return b+" - mean:"+e.toFixed(2)+" stddev:"+f.toFixed(2)+" 85th:"+g.toFixed(2)+" t:"+c.toFixed(2)+" c:"+a.length+" "}})).join("\n	")}},clearTimeRecords:function(){this._timeRecords=this._timeRecords||[],this._timeRecords.length=0,this._timeRecords._durations=null},drawPt:function(a,b,c){b=b||"red";var d=c||document.createElement("div"),e=10;return $(d).css({top:a.y-e/2,left:a.x-e/2,width:e,height:e,position:"absolute",backgroundColor:b,pointerEvents:"none",zIndex:4e4}),this._pts=this._pts||[],this._pts.push(d),d},clearPts:function(){for(var a=[],b=0,c=arguments.length;c>b;b++)a.push(arguments[b]);a=a.length?a:this._pts,_.map(a,function(a){$(a).remove()})}};b.exports=e,window&&window.React&&window.React.addons&&(window.Perf=React.addons.Perf,Perf.dump=function(){Perf.stop();var a=Perf.getLastMeasurements();console.log("-------------"),console.log("Inclusive (incl react components):"),Perf.printInclusive(a),console.log("Exclusive (excl react components):"),Perf.printExclusive(a),console.log("Wasted:"),Perf.printWasted(a),console.log("DOM:"),Perf.printDOM(a)})},{"stats-lite":24}],2:[function(a,b,c){b.exports={round:function(a,b){return b=b||1,b>1?Math.round(a/b)*b:(b=1/b,Math.round(a*b)/b)}}},{}],3:[function(a,b,c){this.console&&this.console.log?(this._Worker=Worker,Object.defineProperty(this,"Worker",{writable:!0}),this.Worker=function(a){var b=new _Worker("WorkerConsole.js#"+a),c=new MessageChannel;return b.postMessage("console",[c.port2]),c.port1.onmessage=function(b){var c=b.data;c.unshift(a+": "),console.log.apply(console,c)},b}):self.onmessage=function(a){if("console"===a.data){self.console={_port:a.ports[0],log:function(){var a=Array.prototype.slice.call(arguments);console._port.postMessage(a)}},onmessage=null;var b=location.hash.substring(1);importScripts(b)}}},{}],4:[function(a,b,c){!function(){"use strict";function a(){for(var b="",c=0;c<arguments.length;c++){var d=arguments[c];if(d){var e=typeof d;if("string"===e||"number"===e)b+=" "+d;else if(Array.isArray(d))b+=" "+a.apply(null,d);else if("object"===e)for(var f in d)d.hasOwnProperty(f)&&d[f]&&(b+=" "+f)}}return b.substr(1)}"undefined"!=typeof b&&b.exports?b.exports=a:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):window.classNames=a}()},{}],5:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=a("d"),l=a("es5-ext/object/valid-callable"),m=Function.prototype.apply,n=Function.prototype.call,o=Object.create,p=Object.defineProperty,q=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};d=function(a,b){var c;return l(b),r.call(this,"__ee__")?c=this.__ee__:(c=s.value=o(null),p(this,"__ee__",s),s.value=null),c[a]?"object"==typeof c[a]?c[a].push(b):c[a]=[c[a],b]:c[a]=b,this},e=function(a,b){var c,e;return l(b),e=this,d.call(this,a,c=function(){f.call(e,a,c),m.call(b,this,arguments)}),c.__eeOnceListener__=b,this},f=function(a,b){var c,d,e,f;if(l(b),!r.call(this,"__ee__"))return this;if(c=this.__ee__,!c[a])return this;if(d=c[a],"object"==typeof d)for(f=0;e=d[f];++f)(e===b||e.__eeOnceListener__===b)&&(2===d.length?c[a]=d[f?0:1]:d.splice(f,1));else(d===b||d.__eeOnceListener__===b)&&delete c[a];return this},g=function(a){var b,c,d,e,f;if(r.call(this,"__ee__")&&(e=this.__ee__[a]))if("object"==typeof e){for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];for(e=e.slice(),b=0;d=e[b];++b)m.call(d,this,f)}else switch(arguments.length){case 1:n.call(e,this);break;case 2:n.call(e,this,arguments[1]);break;case 3:n.call(e,this,arguments[1],arguments[2]);break;default:for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];m.call(e,this,f)}},h={on:d,once:e,off:f,emit:g},i={on:k(d),once:k(e),off:k(f),emit:k(g)},j=q({},i),b.exports=c=function(a){return null==a?o(j):q(Object(a),i)},c.methods=h},{d:6,"es5-ext/object/valid-callable":15}],6:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");d=b.exports=function(a,b){var c,d,g,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=g=!0,d=!1):(c=h.call(a,"c"),d=h.call(a,"e"),g=h.call(a,"w")),j={value:b,configurable:c,enumerable:d,writable:g},i?e(f(i),j):j},d.gs=function(a,b,c){var d,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:g(b)?null==c?c=void 0:g(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(d=!0,i=!1):(d=h.call(a,"c"),i=h.call(a,"e")),k={get:b,set:c,configurable:d,enumerable:i},j?e(f(j),k):k}},{"es5-ext/object/assign":7,"es5-ext/object/is-callable":10,"es5-ext/object/normalize-options":14,"es5-ext/string/#/contains":17}],7:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":8,"./shim":9}],8:[function(a,b,c){"use strict";b.exports=function(){var a,b=Object.assign;return"function"!=typeof b?!1:(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],9:[function(a,b,c){"use strict";var d=a("../keys"),e=a("../valid-value"),f=Math.max;b.exports=function(a,b){var c,g,h,i=f(arguments.length,2);for(a=Object(e(a)),h=function(d){try{a[d]=b[d]}catch(e){c||(c=e)}},g=1;i>g;++g)b=arguments[g],d(b).forEach(h);if(void 0!==c)throw c;return a}},{"../keys":11,"../valid-value":16}],10:[function(a,b,c){"use strict";b.exports=function(a){return"function"==typeof a}},{}],11:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":12,"./shim":13}],12:[function(a,b,c){"use strict";b.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},{}],13:[function(a,b,c){"use strict";var d=Object.keys;b.exports=function(a){return d(null==a?a:Object(a))}},{}],14:[function(a,b,c){"use strict";var d=Array.prototype.forEach,e=Object.create,f=function(a,b){var c;for(c in a)b[c]=a[c]};b.exports=function(a){var b=e(null);return d.call(arguments,function(a){null!=a&&f(Object(a),b)}),b}},{}],15:[function(a,b,c){"use strict";b.exports=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");return a}},{}],16:[function(a,b,c){"use strict";b.exports=function(a){if(null==a)throw new TypeError("Cannot use null or undefined");return a}},{}],17:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":18,"./shim":19}],18:[function(a,b,c){"use strict";var d="razdwatrzy";b.exports=function(){return"function"!=typeof d.contains?!1:d.contains("dwa")===!0&&d.contains("foo")===!1}},{}],19:[function(a,b,c){"use strict";var d=String.prototype.indexOf;b.exports=function(a){return d.call(this,a,arguments[1])>-1}},{}],20:[function(a,b,c){var d=c.PromisePool=a("./lib/PromisePool");c.create=function(a){return new d(a)}},{"./lib/PromisePool":22}],21:[function(a,b,c){function d(a){this._size=Math.max(parseInt(a,10)||0,1),this._slots=[],this._total=null;for(var b=0;b<this._size;++b)this._slots.push([])}d.prototype={get length(){if(null===this._total){this._total=0;for(var a=0;a<this._size;++a)this._total+=this._slots[a].length}return this._total}},d.prototype.enqueue=function(a,b){b=Math.min(this._size-1,Math.max(0,parseInt(b,10)||0)),this._total=null,this._slots[b].push(a)},d.prototype.dequeue=function(){this._total=null;for(var a=0;a<this._size;++a)if(this._slots[a].length)return this._slots[a].shift()},b.exports=d},{}],22:[function(a,b,c){(function(c){function d(a){this._opts={name:a.name||"pool",idleTimeoutMillis:a.idleTimeoutMillis||3e4,reapInterval:a.reapIntervalMillis||1e3,drainCheckInterval:a.drainCheckIntervalMillis||100,refreshIdle:"refreshIdle"in a?a.refreshIdle:!0,returnToHead:a.returnToHead||!1,max:parseInt(a.max,10),min:parseInt(a.min,10),create:a.create,destroy:a.destroy,validate:a.validate||function(){return!0}},this._availableObjects=[],this._waitingClients=new m(a.priorityRange||1),this._count=0,this._removeIdleScheduled=!1,this._removeIdleTimer=null,this._draining=!1,a.log instanceof Function?this._log=a.log:a.log?this._log=e.bind(this):this._log=function(){},this._validate=a.validate||function(){return!0},this._opts.max=Math.max(isNaN(this._opts.max)?1:this._opts.max,1),this._opts.min=Math.min(isNaN(this._opts.min)?0:this._opts.min,this._opts.max-1),f.call(this)}function e(a,b){console.log(b.toUpperCase()+" pool "+this._opts.name+" - "+a)}function f(){if(this._draining)return Promise.resolve();for(var a=this._opts.min-this._count,b=[],c=0;a>c;++c)b.push(this.acquire(function(a){return Promise.resolve()}));return Promise.all(b).then(function(){})}function g(){return this._log(l.format("PromisePool._createResource() - creating client - count=%d min=%d max=%d",this._count,this._opts.min,this._opts.max),"verbose"),Promise.resolve(this._opts.create())}function h(){var a=[],b=Date.now();this._removeIdleScheduled=!1;for(var c=this._count-this._opts.min,d=this._opts.refreshIdle,e=0;e<this._availableObjects.length&&(d||c>a.length);++e){var f=this._availableObjects[e].timeout;b>=f&&(this._log("removeIdle() destroying obj - now:"+b+" timeout:"+f,"verbose"),a.push(this.destroy(this._availableObjects[e].obj)),--e)}return this._availableObjects.length>0?(this._log("availableObjects.length="+this._availableObjects.length,"verbose"),i.call(this)):this._log("removeIdle() all objects removed","verbose"),Promise.all(a)}function i(){this._removeIdleScheduled||(this._removeIdleScheduled=!0,this._removeIdleTimer=setTimeout(h.bind(this),this._opts.reapInterval))}function j(){var a=this._waitingClients.length;if(this._log("dispense() clients="+a+" available="+this._availableObjects.length,"info"),a>0){for(;this._availableObjects.length>0;){this._log("dispense() - reusing obj","verbose");var b=this._availableObjects[0];{if(this._opts.validate(b.obj))return this._availableObjects.shift(),void this._waitingClients.dequeue().resolve(b.obj);this.destroy(b.obj)}}if(this._count<this._opts.max){var c=this;++this._count,g.call(this).then(function(a){c._waitingClients.dequeue().resolve(a)},function(a){--c._count,c._waitingClients.dequeue().reject(a)})}}}function k(a,b){return function(c){return b?a===c.obj:a!==c.obj}}var l=a("util"),m=a("./PriorityQueue");d.prototype.acquire=function(a,b){if(this._draining)throw new Error("Pool is draining and cannot accept work");var d=this,e={};return e.promise=new Promise(function(a,b){e.resolve=a,e.reject=b}).then(function(b){return new Promise(function(c,e){try{return a(b).then(function(a){d.release(b),c(a)},function(a){d.release(b),e(a)})}catch(f){d.release(b),e(f)}})}),this._waitingClients.enqueue(e,b),c.nextTick(j.bind(this)),e.promise},d.prototype.release=function(a){if(this._availableObjects.some(k(a,!0)))return void this._log("release called twice for the same resource: "+(new Error).stack,"error");if(a.__promisePool_destroyed)this._log("Released resource is destroyed, not returning to pool.","info");else{var b={obj:a,timeout:Date.now()+this._opts.idleTimeoutMillis};this._opts.returnToHead?this._availableObjects.unshift(b):this._availableObjects.push(b),this._log("timeout: "+b.timeout,"verbose")}c.nextTick(j.bind(this)),i.call(this)},d.prototype.destroy=function(a){this._log("Destroying object, count="+this._count,"verbose"),--this._count,this._availableObjects=this._availableObjects.filter(k(a,!1));var b=this;return Promise.resolve(this._opts.destroy(a)).then(function(){return a.__promisePool_destroyed=!0,f.call(b)})},d.prototype.drain=function(){this._log("draining","info"),this._draining=!0;var a=this;return new Promise(function(b,c){function d(){if(a._waitingClients.length>0)a._log("Delaying drain, "+a._waitingClients.length+" clients in queue.","verbose"),setTimeout(d,a._opts.drainCheckInterval);else if(a._availableObjects.length<a._count){var e=a._count-a._availableObjects.length;a._log("Delaying drain, "+e+" items need to be released.","verbose"),setTimeout(d,a._opts.drainCheckInterval)}else a.destroyAllNow().then(b,c)}d()})},d.prototype.destroyAllNow=function(){this._log("force destroying all objects","info"),this._removeIdleScheduled=!1,clearTimeout(this._removeIdleTimer);for(var a=[];this._availableObjects.length>0;)a.push(this.destroy(this._availableObjects[0].obj));return Promise.all(a).then(function(){})},d.prototype.pooled=function(a,b){var c=this,d=Array.prototype.slice;return function(){var e=d.call(arguments),f=this;return c.acquire(function(b){return e.unshift(b),a.apply(f,e)},b)}},Object.defineProperty(d.prototype,"length",{get:function(){return this._count},enumerable:!0}),Object.defineProperty(d.prototype,"name",{get:function(){return this._opts.name},enumerable:!0}),Object.defineProperty(d.prototype,"availableLength",{get:function(){return this._availableObjects.length},enumerable:!0}),Object.defineProperty(d.prototype,"waitingClientLength",{get:function(){return this._waitingClients.length},enumerable:!0}),Object.defineProperty(d.prototype,"max",{get:function(){return this._opts.max},enumerable:!0}),Object.defineProperty(d.prototype,"min",{get:function(){return this._opts.min},enumerable:!0}),b.exports=d}).call(this,a("_process"))},{"./PriorityQueue":21,_process:63,util:70}],23:[function(a,b,c){function d(a){return!isNaN(parseFloat(a))&&isFinite(a)}b.exports=d},{}],24:[function(a,b,c){function d(a){var b=[];if(null==a)return b;for(var c=0;c<a.length;c++)m(a[c])&&b.push(+a[c]);return b}function e(a){return a.sort(function(a,b){return a-b})}function f(a){a=d(a);for(var b=0,c=0;c<a.length;c++)b+=a[c];return b}function g(a){return a=d(a),0===a.length?NaN:f(a)/a.length}function h(a){if(a=d(a),0===a.length)return NaN;var b=a.length/2|0;return a=e(a),a.length%2?a[b]:(a[b-1]+a[b])/2}function i(a){if(a=d(a),0===a.length)return NaN;var b=NaN,c={};a.forEach(function(a){var b=c[a]||0;b++,c[a]=b});var e=d(Object.keys(c).sort(function(a,b){return c[b]-c[a]}));return b=e[0],c[e[1]]==c[b]?NaN:b}function j(a){a=d(a);for(var b=g(a),c=[],e=0;e<a.length;e++)c.push(Math.pow(a[e]-b,2));return g(c)}function k(a){return Math.sqrt(j(a))}function l(a,b){if(a=d(a),0===a.length||null==b||0>b)return NaN;b>1&&(b=1),a=e(a);var c=a.length*b-.5;if((0|c)===c)return a[c];var f=0|c,g=c-f;return(1-g)*a[f]+g*a[f+1]}b.exports.numbers=d,b.exports.sum=f,b.exports.mean=g,b.exports.median=h,b.exports.mode=i,b.exports.variance=j,b.exports.stdev=k,b.exports.percentile=l;var m=a("isnumber")},{isnumber:23}],25:[function(a,b,c){React.initializeTouchEvents(!0);var d=a("url");self.PARSED_LOCATION=d.parse(self.location+"",!0),self.DEBUG=PARSED_LOCATION.query.debug;var e=a("yttro/config");a("yttro/lib/lodash-mixins");var f=a("yttro/lib/event-loop"),g=a("yttro/model/world"),h=a("yttro/views/ymap"),i=a("yttro/views/loader");self.RBDebug=a("3rdParty/RandomBits/RBDebug"),self.Velocity=$.fn.velocity,$("#splash").css({display:"block"}),$("#splash").on("touchmove",function(a){a.preventDefault()}),i.ensureAssets([e.world.jsonURL,e.world.bgURL,e.world.appIconMask]).then(function(a){var b=_.fastMerge(e.world,a[0]);mixpanel.track("yo",{v:b.v,c:b.embed_array_num_cols,r:b.embed_array_num_rows}),console.log("world",b),b.bgImg=a[1],b.appIconMask=a[2],window.world=new g(b),window.eventLoop=new f({msPerTick:Math.round(1e3/world.FPS)});try{window.ymap=new h(world,eventLoop)}catch(c){console.error(c)}ymap.init().then(function(){var a=$("#splash")[0];Velocity(a,{opacity:0,scale:4},{deplay:300,duration:1200}).then(function(){$(a).remove()})}),DEBUG&&$("#YMap").css({backgroundColor:"pink"})})["catch"](function(a){})},{"3rdParty/RandomBits/RBDebug":1,url:68,"yttro/config":26,"yttro/lib/event-loop":30,"yttro/lib/lodash-mixins":32,"yttro/model/world":43,"yttro/views/loader":47,"yttro/views/ymap":57}],26:[function(a,b,c){b.exports={world:{FPS:60,v:3,bgURL:"map/AGA-v3/AGA_3_3x.jpg",jsonURL:"map/AGA-v3/AGA_3_metadata.json",appIconMask:"assets/appIconMask.png",affiliateToken:"1010l4FA",tileFormat:"map/AGA-v3/map_{scale}x_{y}_{x}.jpg",tileFormats:{1:"map/AGA-v3/map_1x_{y}_{x}.jpg",3:"map/AGA-v3/map_3x_{y}_{x}.jpg"}}}},{}],27:[function(a,b,c){a("buffer").Buffer;a("3rdParty/WorkerConsole");var d=a("yttro/lib/webp-decode"),e=a("yttro/lib/ajax"),f=a("generic-promise-pool"),g={_workerImagePool:function(){return this.__workerImagePool=this.__workerImagePool||f.create({name:"worker-image",max:5,min:2,create:function(){return new Worker("build/worker-image.js")},destroy:function(a){a.terminate()}})},browserSupportsWebP:function(){return Promise.reject("asdf")},_maybeConvertWebP2PNG:function(a){return/\/webp$/.test(a.mimeType)?this.browserSupportsWebP().then(function(){return a})["catch"](function(){var b=d(a.bytes);return{bytes:b,width:b.width,height:b.height}}):Promise.resolve(a)},_bytesAndMimeType2Image:function(a){if(a.mimeType){var b=new Blob([a.bytes],{type:a.mimeType}),c=self.URL||self.webkitURL||self,d=c.createObjectURL(b);return this._getBasic(d).then(function(a){return c.revokeObjectURL(d),a})["catch"](function(b){console.log(b,a)})}return a.width&&a.height?new Promise(function(b,c){var d=a.bytes;d instanceof Uint8ClampedArray||(d=new Uint8ClampedArray(d));var e=new ImageData(d,a.width,a.height),f=document.createElement("canvas");f.width=e.width,f.height=e.height;var g=f.getContext("2d");g.putImageData(e,0,0),b(f)}):Promise.reject(a)},_getBasic:function(a){var b=new Image;return new Promise(function(c,d){b.onload=function(){c(b)},b.onerror=d,b.src=a})},getBytesAndMimeType:function(a){a=a||{};var b=!self.Window;if(!b&&!a.onProgress){var c=arguments.callee,d=_.find(_.keys(this),function(a){return this[a]==c},this);return a.url=new URL(a.url,document.baseURI)+"",this._workerImagePool().acquire(function(b){return new Promise(function(c,e){b.onmessage=function(a){c(a.data),this._workerImagePool().release(b)}.bind(this),b.postMessage({functionName:d,arguments:[a]})}.bind(this))}.bind(this))}return e.getRawBytesAndMimeType(a).then(this._maybeConvertWebP2PNG.bind(this))},get:function(a){return a=a||{},this.getBytesAndMimeType(a).then(this._bytesAndMimeType2Image.bind(this))}};b.exports=g},{"3rdParty/WorkerConsole":3,buffer:58,"generic-promise-pool":20,"yttro/lib/ajax":28,"yttro/lib/webp-decode":37}],28:[function(a,b,c){var d=a("generic-promise-pool");b.exports={get:function(a){return a=_.merge({dataType:"json",type:"GET"},a),new Promise(function(b,c){req=$.ajax(a),req.then(b),req.fail(c)})},post:function(a){return a=_.merge({dataType:"json",type:"POST"},a),new Promise(function(b,c){req=$.ajax(a),req.then(b),req.fail(c)})},_xhrPool:function(){return this.__xhrPool=this.__xhrPool||d.create({name:"xhr",max:5,min:2,create:function(){return new XMLHttpRequest},destroy:function(a){}})},getRawBytesAndMimeType:function(a){if(a=a||{},!a.url)throw console.error(a),new Error("URL required");return this._xhrPool().acquire(function(b){b.open("GET",a.url,!0),a.onProgress&&b.addEventListener("progress",a.onProgress),b.responseType=a.responseType||"arraybuffer",b.onloadend=function(){this._xhrPool().release(b)}.bind(this);var c=new Promise(function(a,c){b.onload=function(){var c=b.response,d=b.getResponseHeader("content-type");a({bytes:c,mimeType:d})},b.onerror=function(a){c(a)}});return b.send(null),c}.bind(this))}}},{"generic-promise-pool":20}],29:[function(a,b,c){b.exports={processArray:function(a,b,c){var d=a.concat(),e=[];return new Promise(function(a,f){setTimeout(function(){var f=b(d.shift());e.push(f),d.length>0?setTimeout(arguments.callee,c):a(e)},c)})},spiral:function(a,b,c){for(var d=y=0,e=0,f=-1,g=0;g<Math.pow(Math.max(a,b),2);++g){if(d>-a/2&&a/2>=d&&-b/2<y&&y<=b/2&&c(d,y),d==y||0>d&&d==-y||d>0&&d==1-y){var h=e;e=-f,f=h}d+=e,y+=f}}}},{}],30:[function(a,b,c){function d(a){a=a||{},this.msPerTick=a.msPerTick||Math.round(1/world.FPS),this._listeners=[],this._boundOnTick=this._onTick.bind(this),requestAnimationFrame(this._boundOnTick)}d.prototype={addListener:function(a){var b=_.indexOf(this._listeners,a);return b>=0?b:this._listeners.push(a)},removeListener:function(a){var b=_.indexOf(this._listeners,a);if(0>b)return null;var c=this._listeners.splice(b,1);return c[0]},_onTick:function(a){if(this._prevTS)if(a-this._prevTS<this.msPerTick);else{this._prevTS=a;for(var b=0;b<this._listeners.length;++b)this._listeners[b](a)}else this._prevTS=a;requestAnimationFrame(this._boundOnTick)}},b.exports=d},{}],31:[function(a,b,c){b.exports={baseId:function(a){if(Number(a))return a;a+="";var b=a.match(/^(DGA-|AGA-)(.*)/);if(b)return b[2];var b=a.match(/.*[_\/]id(\d+)/);return b?b[1]:a}}},{}],32:[function(a,b,c){_.mixin({valueOrCall:function(a,b){for(var c=[],d=2,e=arguments.length;e>d;d++)c.push(arguments[d]);var f=a[b];return f&&"function"==typeof f&&(f=f.apply(a,c)),f},fastMerge:function(a,b){for(var c in b)a[c]=b[c];return a},coerceArray:function(a){return _.isArray(a)?a:[a]}})},{}],33:[function(a,b,c){function d(a){a=a||{},this.x=a.x||0,this.y=a.y||0,this.width=a.width||0,this.height=a.height||0}var e=a("3rdParty/RandomBits/RBMath");d.prototype={center:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},left:function(){return this.x},right:function(){return this.x+this.width},top:function(){return this.y},bottom:function(){return this.y+this.height},tl:function(){return{x:this.left(),y:this.top()}},tr:function(){return{x:this.right(),y:this.top()}},bl:function(){return{x:this.left(),y:this.bottom()}},br:function(){return{x:this.right(),y:this.bottom()}},scale:function(a,b){a=Number(a)?{x:Number(a),y:Number(a)}:a,b=b||{x:0,y:0},this.x-=b.x,this.y-=b.y,this.x*=a.x,this.y*=a.y,this.x+=b.x,this.y+=b.y,this.width*=a.x,this.height*=a.y},clone:function(){return new d(this)},containsPoint:function(a){return this.left()<=a.x&&a.x<=this.right()&&this.top()<=a.y&&a.y<=this.bottom()},toString:function(){return"<YRect {"+this.x+","+this.y+"} {"+this.width+", "+this.height+"}>"},round:function(a){this.x=e.round(this.x,a),this.y=e.round(this.y,a),this.width=e.round(this.width,a),this.height=e.round(this.height,a)},clampToRect:function(a){if(this.width>a.width||this.height>a.height)throw new Error(this+" is smaller than "+a);this.x=Math.max(this.x,a.x),this.x=Math.min(this.right(),a.right())-this.width,this.y=Math.max(this.y,a.y),this.y=Math.min(this.bottom(),a.bottom())-this.height}},d.intersection=function(a,b){var c=Math.max(a.left(),b.left()),e=Math.min(a.right(),b.right()),f=Math.max(a.top(),b.top()),g=Math.min(a.bottom(),b.bottom());return e>=c&&g>=f?new d({x:c,y:f,width:e-c,height:g-f}):null},b.exports=d},{"3rdParty/RandomBits/RBMath":2}],34:[function(a,b,c){var d=function(a){a=a||{},this._values={};var b=a.keyGetter||function(a){return a};this.keyGetter=function(){return b.apply(this,arguments)||""}.bind(this)};d.prototype={add:function(a){a.forEach(function(a){var b=this.keyGetter(a)||"";this._values[b]=this._values[b]||[],this._values[b].push(a),this._cache={}},this)},get:function(a){var b=d.prefix2regexp(a),c=_.chain(this._values).keys().filter(function(a){return b.test(a)}).map(function(a){return this._values[a]},this).flatten().uniq().value();return c.regexp=b,c}},d.prefix2regexp=function(a){var b=a.trim().split(" ");return b=b.map(function(a,c){return c==b.length-1?"\\b"+a:"\\b"+a+"\\b"}),b=b.join(".*"),new RegExp(b,"i")},b.exports=d},{}],35:[function(a,b,c){function d(a,b,c,d){for(var e=[],f=b.match(a)||[],g=0,h=0,i=-1;g<f.length&&(h=b.search(a),!(0>h));){var j=b.substring(0,h),k=f[g++];b=b.substring(h+k.length),j&&e.push(d?d(j,i):j),k&&(e.push(c?c(k,h):k),i=h+k.length)}return b&&e.push(d?d(b,i):b),e}b.exports=d},{}],36:[function(a,b,c){function d(a){a=a||{},this.center=_.clone(a.center||{x:0,y:0}),this.size=_.clone(a.size||{width:0,height:0}),this.zoomLevel=1,this.ee=f(this)}var e=a("yttro/lib/rect"),f=a("event-emitter");d.prototype={rectInWorld:function(){var a=new e({x:0,y:0,width:this.size.width,height:this.size.height});return a.x=this.center.x-a.width/2,a.y=this.center.y-a.height/2,a},zoom:function(a,b){a=a||1,b=_.clone(b||this.center),this.center.x-=b.x,this.center.y-=b.y,this.center.x/=a,this.center.y/=a,this.center.x+=b.x,this.center.y+=b.y,this.size.width/=a,this.size.height/=a,this.zoomLevel*=a,this.ee.emit("didChange",this)},zoomToLevel:function(a,b){this.zoom(a/this.zoomLevel,b)},translate:function(a){this.center.x+=a.x,this.center.y+=a.y,this.ee.emit("didChange",this)},translateCenterTo:function(a){this.center.x=a.x,this.center.y=a.y,this.ee.emit("didChange",this)},clampToWorldRect:function(a){if(this.size.width>a.width||this.size.height>a.height){var b=Math.max(this.size.width/a.width,this.size.height/a.height);this.zoom(b)}this.center.x=Math.max(this.center.x,a.left()+this.size.width/2),this.center.x=Math.min(this.center.x,a.right()-this.size.width/2),this.center.y=Math.max(this.center.y,a.top()+this.size.height/2),this.center.y=Math.min(this.center.y,a.bottom()-this.size.height/2),this.ee.emit("didChange",this)},adjustToSize:function(a){this.size.width=a.width,this.size.height=a.height,this.ee.emit("didChange",this)},saveState:function(){return{center:_.clone(this.center),size:_.clone(this.size),zoomLevel:this.zoomLevel}},restoreState:function(a){this.center=_.clone(a.center),this.size=_.clone(a.size),this.zoomLevel=a.zoomLevel,this.ee.emit("didChange",this)}},b.exports=d},{"event-emitter":5,"yttro/lib/rect":33}],37:[function(a,b,c){var d;b.exports=function(a){var b=new Uint8Array(a);d=d||new WebPDecoder;var c=d.WebPDecoderConfig.j,e=d.WebPDecoderConfig.input;if(!d.WebPInitDecoderConfig(d.WebPDecoderConfig))throw new Error("Library version mismatch!");if(status=d.WebPGetFeatures(b,b.length,e),0!=status)throw new Error("Error getting features: "+status);if(c.J=4,status=d.WebPDecode(b,b.length,d.WebPDecoderConfig),0!=status)throw new Error("Error decoding: "+status);var f=c.c.RGBA.ma;if(!f)throw new Error("Error decoding bytes");for(var g=c.height,h=c.width,i=0;g>i;i++)for(var j=0;h>j;j++){var k=4*j+4*h*i,l=f[0+k];f[0+k]=f[1+k],f[1+k]=f[2+k],f[2+k]=f[3+k],f[3+k]=l}var a=new Uint8ClampedArray(f).buffer;return a.width=h,a.height=g,a}},{}],38:[function(a,b,c){function d(a){this.anchorApps=a.anchorApps,this.visibleAnchors=[],this.refreshVisibleAnchors()}a("yttro/lib/rect");d.prototype.refreshVisibleAnchors=function(){var a=_.indexBy(this.visibleAnchors,"id"),b={},c=15,e=world.embed_array_num_rows/8,f=0;return _.chain(this.anchorApps).shuffle().forEach(function(g){return a[g.id]||d.anchorTooCloseToSet(b,g,e)?void 0:(b[g.id]=g,++f,f>=c?!1:void 0)}).value(),this.visibleAnchors=_.values(b),this.visibleAnchors},d.anchorTooCloseToSet=function(a,b,c){return _.some(a,function(a){return d.anchorsTooClose(a,b,c)})},d.anchorsTooClose=function(a,b,c){return Math.max(Math.abs(a.rowIndex-b.rowIndex),Math.abs(a.columnIndex-b.columnIndex))<c},d.prototype.renderViewport=function(a,b){if(this.visibleAnchors.length)for(var c=0;c<this.visibleAnchors.length;++c){var d=this.visibleAnchors[c],e=ymap.tileManager.tileForApp(d);if(e){a.save();var f=d.scaledRectInWorld();a.translate(f.center().x,f.center().y),a.scale(f.scaledBy,f.scaledBy),e.renderApp(a,d),a.restore()}}},b.exports=d},{"yttro/lib/rect":33}],39:[function(a,b,c){function d(a){this.iconSize=a.iconSize,this.numRows=a.numRows,this.numColumns=a.numColumns,this._apps=[],_.forEach(a.apps,function(a){var b=new e(a);this._apps[this.getLinearIndex(b)]=b}.bind(this))}var e=a("yttro/model/app-item");d.prototype.getLinearIndex=function(a,b){if(void 0===b){var c=a;a=c.rowIndex,b=c.columnIndex}return b*this.numRows+a},d.prototype.appAtWorldPoint=function(a){var b=Math.floor(a.x/this.iconSize),c=Math.floor(a.y/this.iconSize);return this._apps[this.getLinearIndex(c,b)]},d.prototype.appAtRowColumn=function(a,b){return this._apps[this.getLinearIndex(a,b)]},d.prototype.appAtLinearIndex=function(a){return this._apps[a]},d.prototype.appWithId=function(a){var b=_.findIndex(ymap.appItemManager._apps,"id",a+"");return 0>b?null:this._apps[b]},d.prototype.appsInRect=function(a){var b=[],c={x:0,y:0};for(c.x=a.left();c.x<a.right();c.x+=this.iconSize)for(c.y=a.top();c.y<a.bottom();c.y+=this.iconSize)b.push(this.appAtWorldPoint(c));return b},b.exports=d},{"yttro/model/app-item":40}],40:[function(a,b,c){function d(a){this.rating=a.a,this.columnIndex=a.c,this.downloadCount=a.d,this.developerName=a.e,this.category=a.g,this.originalId=a.i,this.id=f.baseId(a.i),this.name=a.n,this.ratingCount=a.o,this.price=a.p,this.rowIndex=a.r,this.videos=a.v,this.isInvalidApp=!1;var b=world.icon_padding,c=world.icon_size;this.size={width:b+c,height:b+c},this.center={x:(this.columnIndex+.5)*this.size.width,y:(this.rowIndex+.5)*this.size.height},this.ee=e(this)}var e=a("event-emitter"),f=a("yttro/lib/id-util"),g=a("yttro/lib/rect"),h=a("yttro/lib/ajax");d.prototype={rectInWorld:function(){return new g({x:this.center.x-this.size.width/2,y:this.center.y-this.size.height/2,width:this.size.width,height:this.size.height})},scaledRectInWorld:function(a){a=a||1;var b=1/ymap.viewport.zoomLevel;b*=self.MAX_ZOOM_LEVEL,b*=a;var c=this.rectInWorld();return c.scale(b,c.center()),c.clampToRect(ymap.worldRect),c.scaledBy=b,c},getAffiliateURL:function(){var a="https://itunes.apple.com/us/app/games/id"+this.id+"?at="+world.affiliateToken;return a},isLoaded:function(){return this.screenshots&&(this.screenshots.length||0===this.screenshots.length)},loadFullData:function(){return h.get({dataType:"JSONP",url:"https://itunes.apple.com/lookup?id="+this.id}).then(function(a){return(a=a.results[0])?(this.screenshots=a.screenshotUrls||[],this.artistName=a.artistName,this.description=a.description,this.ee.emit("didChange",this),
this):(this.isInvalidApp=!0,this.ee.emit("didChange",this),this)}.bind(this))}},b.exports=d},{"event-emitter":5,"yttro/lib/ajax":28,"yttro/lib/id-util":31,"yttro/lib/rect":33}],41:[function(a,b,c){function d(a){this.bgTile=new e({img:a.bgImg,tileX:0,tileY:0,size:{width:a.worldSize.width,height:a.worldSize.height},scale:Math.max(a.bgImg.width/a.worldSize.width,a.bgImg.height/a.worldSize.height)}),this.tileSize=a.tileSize,this.worldSize=a.worldSize,this.tiles=[];for(var b=this.minTileX();b<=this.maxTileX();++b)for(var c=this.minTileY();c<=this.maxTileY();++c){this.tiles[b]=this.tiles[b]||[];var d=this.tiles[b][c]||new e({center:{x:(b+.5)*this.tileSize,y:(c+.5)*this.tileSize},size:{width:this.tileSize,height:this.tileSize},tileX:b,tileY:c,scale:g});this.tiles[b][c]=d}}var e=a("yttro/model/tile"),f=(a("3rdParty/RandomBits/RBMath"),a("yttro/lib/rect"),a("yttro/lib/array-util")),g=1;d.prototype.minTileX=function(){return 0},d.prototype.minTileY=function(){return 0},d.prototype.maxTileX=function(){return Math.floor(this.worldSize.width/this.tileSize)-1},d.prototype.maxTileY=function(){return Math.floor(this.worldSize.height/this.tileSize)-1},d.prototype.loadTiles=function(){var a=[],b=this.maxTileX()-this.minTileX()+1,c=this.maxTileY()-this.minTileY()+1,d=Math.floor(b/2)+this.minTileX(),e=Math.floor(c/2)+this.minTileY();f.spiral(b,c,function(b,c){b=d+b,c=e+c,a.push(this.tiles[b][c])}.bind(this));var g=(new Date).getTime();return f.processArray(a,function(a){a.load().then(function(){ymap.appItemManager.appsInRect(a.rectInWorld()).forEach(function(a){a.ee.emit("didChange",a)}),ymap.requestRender()})}).then(function(){return console.log("Wall time to load all tiles: ",(new Date).getTime()-g),arguments[0]})},d.prototype.tileForApp=function(a,b){b=b||g;var c=Math.floor(a.center.x/this.tileSize),d=Math.floor(a.center.y/this.tileSize),e=this.tiles[c];if(!e)return null;var f=e[d];return f&&f.isLoaded()?f:this.bgTile},d.prototype.renderViewport=function(a,b,c){var d=c.lowRes;d||!this.tiles.length||b.zoomLevel<.5*MAX_ZOOM_LEVEL?this._renderViewportLowRes(a,b):this._renderViewportHighRes(a,b)},d.prototype._renderViewportLowRes=function(a,b){a.save(),a.translate(this.bgTile.center.x,this.bgTile.center.y),this.bgTile.render(a),a.restore()},d.prototype._renderViewportHighRes=function(a,b){var c=b.rectInWorld(),d=(1/ymap.pixelRatio,Math.floor(c.left()/this.tileSize));d=Math.max(d,this.minTileX());var e=Math.ceil(c.right()/this.tileSize)-1;e=Math.min(e,this.maxTileX());var f=Math.floor(c.top()/this.tileSize);f=Math.max(f,this.minTileY());var g=Math.ceil(c.bottom()/this.tileSize)-1;g=Math.min(g,this.maxTileY());for(var h=d;e>=h;++h)for(var i=f;g>=i;++i){var j=this.tiles[h]||[];!j.length;var k=j[i];k&&k.isLoaded()?(a.save(),a.translate(k.center.x,k.center.y),k.render(a),a.restore()):this.bgTile.renderSubtile(a,{tileX:h,tileY:i,width:this.tileSize,height:this.tileSize})}},b.exports=d},{"3rdParty/RandomBits/RBMath":2,"yttro/lib/array-util":29,"yttro/lib/rect":33,"yttro/model/tile":42}],42:[function(a,b,c){function d(a){this._img=a.img||new Image,this.size=_.clone(a.size||{width:this._img.width,height:this._img.height}),this.center=_.clone(a.center||{x:this.size.width/2,y:this.size.height/2}),this.scale=a.scale||1,this.tileX=a.tileX,this.tileY=a.tileY}var e=a("yttro/lib/ajax-image"),f=a("yttro/lib/rect");d.prototype={load:function(){if(this._imgLoadPromise)return this._imgLoadPromise;if(/^data:/.test(this._img.src))return Promise.resolve(this);if(this._img.src&&this._img.complete)return Promise.resolve(this);if(!this._img.src){var a=this.src();if(a==this._img.src)return Promise.resolve(this)}return this._imgLoadPromise=e.get({url:a}).then(function(a){delete this._imgLoadPromise,this._img=a}.bind(this))["catch"](function(a){throw delete this._imgLoadPromise,a}.bind(this)),this._imgLoadPromise},isLoaded:function(){return this._isLoaded?!0:(this._img instanceof HTMLCanvasElement?this._isLoaded=!0:this._isLoaded=this._img&&this._img.src&&this._img.complete,this._isLoaded)},src:function(){if(this.scale<1)return world.bgURL;var a=window.world.tileFormat;return a=a.replace("{x}",this.tileX),a=a.replace("{y}",this.tileY),a=a.replace("{scale}",1/this.scale)},rectInWorld:function(){return new f({x:this.center.x-this.size.width/2,y:this.center.y-this.size.height/2,width:this.size.width,height:this.size.height})},getAppRectInTile:function(a){var b=a.rectInWorld();return b.x-=this.center.x-this.size.width/2,b.y-=this.center.y-this.size.height/2,b.scale(this.scale),b},render:function(a){this.isLoaded()&&a.drawImage(this._img,-this.size.width/2,-this.size.height/2,this.size.width,this.size.height)},renderApp:function(a,b){if(this.isLoaded()){var c=this.getAppRectInTile(b),d=world.icon_padding*this.scale;c.x+=d/2,c.y+=d/2,c.width-=d,c.height-=d;var e=world.appIconMask;e&&e.complete?(a.save(),a.globalCompositeOperation="destination-out",a.drawImage(e,-b.size.width/2,-b.size.height/2,b.size.width,b.size.height),a.globalCompositeOperation="destination-over",this._renderAppNoMask(a,b,c),a.restore()):this._renderAppNoMask(a,b,c)}},_renderAppNoMask:function(a,b,c){a.drawImage(this._img,c.x,c.y,c.width,c.height,-b.size.width/2,-b.size.height/2,b.size.width,b.size.height)},renderSubtile:function(a,b){if(this.isLoaded()){var c=new f({x:b.tileX*b.width,y:b.tileY*b.height,width:b.width,height:b.height}),d=f.intersection(c,this.rectInWorld());d&&(d.x-=this.center.x-this.size.width/2,d.y-=this.center.y-this.size.height/2,d.scale(this.scale),a.drawImage(this._img,d.x,d.y,d.width,d.height,c.x,c.y,c.width,c.height))}}},b.exports=d},{"yttro/lib/ajax-image":27,"yttro/lib/rect":33}],43:[function(a,b,c){function d(a){_.fastMerge(this,a),this.size={width:this.image_width,height:this.image_height}}b.exports=d},{}],44:[function(a,b,c){function d(a){var b=a.parentNode,c="app-search";this.$node=$(b).find("#"+c),this.$node.length||(this.$node=$('<div id="'+c+'"></div>').appendTo($(b))),this.node=this.$node[0],this._apps=a.apps,this.ee=e(this),this.$node.on("click",function(a){return this.hasFocus()?void($(a.target).closest(".typeahead").length||this.blur()):void this.focus()}.bind(this)),this._render()}var e=a("event-emitter"),f=a("yttro/lib/regexp-match"),g=a("yttro/lib/split-with-matches"),h=a("yttro/views/react-typeahead").Typeahead,i=a("yttro/views/app-tooltip");d.prototype={hasFocus:function(){return this.$node.hasClass("focus")},blur:function(){this.$node.find(".typeahead-input").blur(),this.$node.removeClass("focus"),this.ee.emit("didBlur",this)},focus:function(){this.$node.addClass("focus"),this.$node.find(".typeahead-input").focus(),this.ee.emit("didFocus",this),this._render()},_onSelect:function(a){this.blur(),this.ee.emit("didSelect",this,a)},_render:function(){this._appSearchReact=React.createElement(j,{apps:this._apps,onSelect:this._onSelect.bind(this),limitResults:50}),React.render(this._appSearchReact,this.node)}};var j=React.createClass({displayName:"AppSearchReact",propTypes:{apps:React.PropTypes.array,limitResults:React.PropTypes.number},getInitialState:function(){return this._nameIndex=new f({keyGetter:function(a){return a.name}}),this._nameIndex.add(this.props.apps),{inputValue:this.props.inputValue,resultsScrollTop:0}},componentDidUpdate:function(){this._adjustResultsNode()},componentDidMount:function(){this._adjustResultsNode()},componentWillUnmount:function(){this._removeListeners()},_adjustResultsNode:function(){var a=React.findDOMNode(this.refs.typeahead.refs.sel);if(a){var b=document.body.clientHeight;$(a).css({maxHeight:b-a.offsetTop}),$(a).css({height:""}),$(a).css({height:a.scrollHeight-2}),a.scrollTop=Math.max(this.state.resultsScrollTop,1),this._resultsNode&&this._resultsNode==a||(this._removeListeners(),$(a).on("scroll",this._handleScroll),this._resultsNode=a)}},_removeListeners:function(){this._resultsNode&&$(this._resultsNode).off("scroll",this._handleScroll)},_handleScroll:_.debounce(function(){var a=this._resultsNode;this._resultsNode&&(a.scrollTop+a.offsetHeight==a.scrollHeight&&(a.scrollTop=a.scrollTop-1),0==a.scrollTop&&(a.scrollTop=1))},70),_onTouchMoveOnResults:function(a){var b=React.findDOMNode(this.refs.typeahead.refs.entry);b&&b.blur()},_onSelect:function(a){var b=this.props.onSelect;if(b)return b(a?a.app:null)},_onInputChange:function(a){var b={inputValue:a};b.resultsScrollTop=0,this.setState(b)},_textSearch:function(a){if(!a)return[];var b=this._nameIndex.get(a),c=_.map(b,function(a){var c=this._nameIndex.keyGetter(a),d=-1,e=null,f=null,h=null;return g(b.regexp,c,function(a,b){console.assert(0>d,"Should have only 1 match"),d=b,f=a},function(a,b){f?(console.assert(null===h,"Should not have 2 non-matches after match"),h=a):(console.assert(null===e,"Should not have 2 non-matches before match"),e=a)}),{indexOfMatch:d,app:a,preMatch:e,match:f,postMatch:h}}.bind(this));return c=_.chain(c).sortByOrder(["indexOfMatch","app.ratingCount","app.name"],["asc","desc","asc"]).take(this.props.limitResults).value()},_renderOption:function(a,b){if(!a||!a.app)return"";var c=React.createElement("div",React.__spread({},b),React.createElement(i.TopCard,{app:a.app}));return c},_renderEmptyHTML:function(){return React.createElement("div",{className:"typeahead-empty"})},render:function(){var a=this._textSearch(this.state.inputValue);return React.createElement(h,{ref:"typeahead",className:"typeahead",customClasses:{controls:"",input:"typeahead-input",results:"typeahead-results",listItem:"typeahead-result"},placeholder:"Search...",defaultValue:this.state.inputValue,options:a,renderOption:this._renderOption,getOptionsForValue:function(a,b){return b},getStringForOption:function(a){return a.name},onFocus:this._onFocus,onBlur:this.props.onBlur,onTouchMoveOnResults:this._onTouchMoveOnResults,selection:null,onOptionSelected:this._onSelect,onInputChange:this._onInputChange,mustHaveSelection:!1,selectionAlwaysVisible:!1,emptyHTML:this._renderEmptyHTML})}});b.exports=d},{"event-emitter":5,"yttro/lib/regexp-match":34,"yttro/lib/split-with-matches":35,"yttro/views/app-tooltip":45,"yttro/views/react-typeahead":48}],45:[function(a,b,c){"use strict";function d(a){var b=a.parentNode,c="app-tooltip";this.$node=$(b).find("#"+c),this.$node.length||(this.$node=$('<div id="'+c+'"></div>').appendTo($(b))),this.node=this.$node[0],this._tooltipVisible=!1,this._isFullScreen=!1,this._app=null,this._boundOnAppChange=this._onAppChange.bind(this)}function e(a){if(1e4>a)return a;for(var b=["","K","M","B","T"],c=0;(a/=1e3)&&++c&&a>1e3;);return a=h.round(a,.1),a+b[c]}function f(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function g(a){var b=a/1e3,c=Math.floor(b/3600);b-=3600*c;var d=Math.floor(b/60);b-=60*d;var e=Math.floor(b/1);return c?c+":"+f(d,2)+":"+f(e,2):d+":"+f(e,2)}var h=a("3rdParty/RandomBits/RBMath"),i=a("classnames");d.prototype={setApp:function(a){this._app!=a&&(this._app&&this._app.ee.off("didChange",this._boundOnAppChange),this._app=a,a&&a.ee.on("didChange",this._boundOnAppChange),this._render())},setTooltipVisible:function(a){return this._tooltipVisible==a?Promise.resolve([this.node]):(this._tooltipVisible=a,Velocity(this.node,"stop"),Velocity(this.node,{translateY:a?"0%":"100%"},{duration:250,easing:"ease-out"}))},openFullScreen:function(){return this._isFullScreen=!0,Velocity(this.node,"stop"),this._openPromise=Velocity(this.node,{height:$(this.node.parentNode).height()},{duration:250,easing:"ease-out"}),this._openPromise},closeFullScreen:function(a){if(this._isFullScreen=!1,Velocity(this.node,"stop"),!a&&this._openPromise){var b=this._openPromise;return delete this._openPromise,b.then(function(a){return Velocity(a,"reverse")})}Velocity(this.node,{height:a},{duration:250,easing:"ease-out"})},_onAppChange:function(a){a&&a==this._app&&this._render()},_render:function(){if(!this._app)return void this.$node.html("");var a=React.createElement("div",{className:"container"},React.createElement(j,{app:this._app}),React.createElement(l,{app:this._app}));React.render(a,this.node)}};var j=React.createClass({displayName:"TopCard",propTypes:{app:React.PropTypes.object},render:function(){var a=this.props.app,b=world.category_dict,c=b[a.category],d=a.getAffiliateURL(),f=i("app-rating","app-rating"+2*a.rating),g=i("top-card",this.props.className);return React.createElement("div",{className:g},React.createElement("a",{className:"app-icon-and-price",href:d,target:"_blank"},React.createElement(k,{app:a}),React.createElement("div",{className:"app-price"},a.price)),React.createElement("div",{className:"app-major-info"},React.createElement("div",{className:"app-name",dangerouslySetInnerHTML:{__html:a.name}}),React.createElement("div",{className:"app-genre"},c),React.createElement("br",null),React.createElement("div",{className:f}),React.createElement("div",{className:"app-rating-num"},e(a.ratingCount))))}}),k=React.createClass({displayName:"AppIcon",propTypes:{app:React.PropTypes.object},render:function(){var a=ymap.tileManager.tileForApp(this.props.app);if(!a)return null;var b=a.getAppRectInTile(this.props.app);if(!b)return null;var c=i("app-icon","x"+Math.round(1/a.scale));return React.createElement("div",{className:c},React.createElement("div",{style:{backgroundImage:"url("+a.src()+")",backgroundPosition:-b.x/b.width*100+"% "+-b.y/b.height*100+"%"}}))}}),l=React.createClass({displayName:"DescriptionAndScreenshots",propTypes:{app:React.PropTypes.object},render:function(){var a=React.createElement("div",{className:"separator"});if(this.props.app.isInvalidApp)return React.createElement("div",{className:"description-and-screenshots"},React.createElement("center",null,a,"This app may not be available."));if(!this.props.app.isLoaded())return this.props.app.loadFullData(),React.createElement("div",{className:"description-and-screenshots"},a,React.createElement("br",null),"Loading...");var b=this.props.app.description.split("\n").map(function(a,b){return[a,React.createElement("br",null)]});b=React.createElement("div",{className:"description"},b);var c=this.props.app.getAffiliateURL(),d=React.createElement("div",{className:"learn-more"},React.createElement("a",{className:"learn-more-content",href:c,target:"_blank"},"Learn more on App Store"));React.createElement("div",{className:"screenshots"},this.props.app.screenshots.map(function(a,b){return React.createElement("img",{key:a,src:a})}));return React.createElement("div",{className:"description-and-screenshots"},a,React.createElement(m,{videos:this.props.app.videos}),b,d,React.createElement(o,{screenshots:this.props.app.screenshots}))}}),m=React.createClass({displayName:"Videos",propTypes:{videos:React.PropTypes.array},render:function(){if(!this.props.videos)return null;var a=_.take(this.props.videos,5);return React.createElement("div",{className:"videos"},React.createElement("div",{className:"video-list"},a.map(function(a,b){return React.createElement(n,{video:a,key:b})}.bind(this))))}}),n=React.createClass({displayName:"PlayableVideo",propTypes:{video:React.PropTypes.object},componentDidMount:function(){var a=React.findDOMNode(this.refs.video);$(a).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(a){console.log(a.type,a),this._isGoingFullScreen?a.target.play&&a.target.play():a.target.pause&&a.target.pause(),delete this._isGoingFullScreen}.bind(this)),$(a).on("pause ended abort",function(b){$(a).css({opacity:"0"}),b.target.pause&&b.target.pause()}),this._canPlay=new Promise(function(b,c){$(a).one("canplay",function(){b(this)}.bind(this))}.bind(this))},componentWillUnmount:function(){var a=React.findDOMNode(this.refs.video);a&&(a.pause&&a.pause(),$(a).off("webkitfullscreenchange mozfullscreenchange fullscreenchange play ended pause"))},_handleClick:function(a){var b=React.findDOMNode(this.refs.video);b&&(b.pause&&b.pause(),b.play&&b.play(),$(React.findDOMNode(this)).addClass("loading"),this._canPlay.then(function(){$(React.findDOMNode(this)).removeClass("loading"),$(b).css({opacity:"1"})}.bind(this)))},render:function(){var a=this.props.video;return React.createElement("div",{className:"video",onClick:this._handleClick,style:{backgroundImage:"url('"+a.thumbnail+"')"}},React.createElement("div",{className:"video-title"},a.name),React.createElement("div",{className:"duration-and-views"},React.createElement("div",{className:"views"},e(a.views)),React.createElement("div",{className:"duration"},g(a.duration))),React.createElement("video",{controls:"false",poster:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",src:a.video_url,ref:"video",preload:"none"}))}}),o=React.createClass({displayName:"Screenshots",propTypes:{screenshots:React.PropTypes.array},render:function(){return this.props.screenshots?React.createElement("div",{className:"screenshots"},this.props.screenshots.map(function(a,b){var c,d=a.match(/screen([0-9]+)x([0-9]+).jp/);if(d)if(320==d[1])c=d[1];else{var e=d[1];c=180/e*640}return React.createElement("img",{key:b,src:a,width:c})})):null}});DEBUG&&(d.DescriptionAndScreenshots=l),d.TopCard=j,b.exports=d},{"3rdParty/RandomBits/RBMath":2,classnames:4}],46:[function(a,b,c){function d(){this.MAX_SCALE=1.4,this.MIN_SCALE=1.1,this.duration=2500}a("yttro/lib/rect");d.prototype={start:function(a){this.stop(),this._app=a,delete this._startTS},render:function(a,b){var c=this._app;if(c){if(!this._startTS)return this._startTS=b,void ymap.requestRender();var d=ymap.tileManager.tileForApp(c);a.save();var e,f=this.duration,g=(b-this._startTS)%(2*f);f>g?e=g/f:(e=(g-f)/f,e=1-e);var h=c.scaledRectInWorld(e*(this.MAX_SCALE-this.MIN_SCALE)+this.MIN_SCALE);a.translate(h.center().x,h.center().y),a.scale(h.scaledBy,h.scaledBy),d.renderApp(a,c),a.restore(),ymap.requestRender()}},stop:function(){delete this._app,delete this._startTS}},b.exports=d},{"yttro/lib/rect":33}],47:[function(a,b,c){function d(a){console.log("Running parent"),console.log(a),$("#loader").length||$("body").append("<div id='loader'><center></center></div>"),$("body").addClass("loader");var b=new k({id:"nanobar",target:$("#loader")[0]}),c=a.map(function(a,b){return i.getRawBytesAndMimeType({onProgress:function(a){if(a.lengthComputable){var c=a.loaded/a.total;d(b,c)}},url:a})}),d=h(c,b);return Promise.all(c).then(function(a){return console.log("parent done"),$("#loader center").html("Ready! <br> Tap to start exploring"),b.go(100),window.childWindow=null,$("body").on("click",function(){childWindow=window.open(window.location+"","_blank","",!0)}),window.addEventListener("message",function(b){b.origin===window.location.origin&&"ready"==b.data&&b.source.postMessage(a,window.location.origin)}),a})}function e(a){return new Promise(function(a,b){function c(b){b.origin===window.location.origin&&(console.log("got parent data"),window.removeEventListener("message",c),Promise.all(b.data.map(g)).then(a))}window.addEventListener("message",c,!1),console.log("waiting for parent to send data"),window.opener.postMessage("ready",window.location.origin)})}function f(a){return new Promise(function(b,c){var d=new Blob([a.bytes],{type:a.mimeType}),e=new FileReader;e.onload=function(a){b(a.target.result)},e.readAsText(d)})}function g(a){return/^image\b/.test(a.mimeType)?j._bytesAndMimeType2Image(a):f(a).then(function(b){return/\/json$/.test(a.mimeType)?JSON.parse(b):b})}function h(a,b){var c=[];return c.length=a.length,function(a,d){c[a]=d;for(var e=0,f=0;f<c.length;++f)e+=Number(c[f])||0;e/=c.length;var g=.2,h=.95;e=e*(h-g)+g,console.log(Math.round(100*e)),b.go(Math.round(100*e));var i=Math.round(100*e);$("#loader center").html("Loading "+i+"%")}}var i=a("yttro/lib/ajax"),j=a("yttro/lib/ajax-image"),k=function(a){var b=a.id||"nanobar",c=a.target||document.body;this.$node=$("<div id="+b+"><div/></div>").appendTo($(c))};k.prototype={go:function(a){a=Math.round(100*a)/100,a=100-a,this.$node.find(" > div").css({width:a+"%"})}},b.exports={ensureAssets:function(a){if(window.history.length>1)return d(a),Promise.reject(a);if(window.opener)return e(a);console.log("Getting data directly b/c no opener");var b=a.map(function(a,b){return i.getRawBytesAndMimeType({url:a}).then(g)});return Promise.all(b)}}},{"yttro/lib/ajax":28,"yttro/lib/ajax-image":27}],48:[function(a,b,c){var d=a("./typeahead"),e=a("./tokenizer");b.exports={Typeahead:d,Tokenizer:e}},{"./tokenizer":50,"./typeahead":52}],49:[function(a,b,c){var d=d||{};d.DOM_VK_UP=d.DOM_VK_UP||38,d.DOM_VK_DOWN=d.DOM_VK_DOWN||40,d.DOM_VK_BACK_SPACE=d.DOM_VK_BACK_SPACE||8,d.DOM_VK_RETURN=d.DOM_VK_RETURN||13,d.DOM_VK_ENTER=d.DOM_VK_ENTER||14,d.DOM_VK_ESCAPE=d.DOM_VK_ESCAPE||27,d.DOM_VK_TAB=d.DOM_VK_TAB||9,b.exports=d},{}],50:[function(a,b,c){(function(c){var d=window.React||("undefined"!=typeof window?window.React:"undefined"!=typeof c?c.React:null),e=a("./token"),f=(a("../keyevent"),a("../typeahead")),g=a("classnames"),h=d.createClass({displayName:"TypeaheadTokenizer",propTypes:{name:d.PropTypes.string,options:d.PropTypes.array,customClasses:d.PropTypes.object,allowCustomValues:d.PropTypes.number,defaultSelected:d.PropTypes.array,defaultValue:d.PropTypes.string,placeholder:d.PropTypes.string,onTokenRemove:d.PropTypes.func,onTokenAdd:d.PropTypes.func,maxVisible:d.PropTypes.number},getInitialState:function(){return{selected:this.props.defaultSelected.slice(0)}},getDefaultProps:function(){return{options:[],defaultSelected:[],customClasses:{},allowCustomValues:0,defaultValue:"",placeholder:"",onTokenAdd:function(){},onTokenRemove:function(){}}},_renderTokens:function(){var a={};a[this.props.customClasses.token]=!!this.props.customClasses.token;var b=g(a),c=this.state.selected.map(function(a){return d.createElement(e,{key:a,className:b,onRemove:this._removeTokenForValue,name:this.props.name},a)},this);return c},_getOptionsForTypeahead:function(){return this.props.options},_removeTokenForValue:function(a){var b=this.state.selected.indexOf(a);-1!=b&&(this.state.selected.splice(b,1),this.setState({selected:this.state.selected}),this.props.onTokenRemove(this.state.selected))},_addTokenForValue:function(a){-1==this.state.selected.indexOf(a)&&(this.state.selected.push(a),this.setState({selected:this.state.selected}),this.refs.typeahead.setEntryText(""),this.props.onTokenAdd(this.state.selected))},render:function(){var a={};a[this.props.customClasses.typeahead]=!!this.props.customClasses.typeahead;var b=g(a);return d.createElement("div",{className:"typeahead-tokenizer"},this._renderTokens(),d.createElement(f,{ref:"typeahead",className:b,placeholder:this.props.placeholder,allowCustomValues:this.props.allowCustomValues,customClasses:this.props.customClasses,options:this._getOptionsForTypeahead(),defaultValue:this.props.defaultValue,maxVisible:this.props.maxVisible,onOptionSelected:this._addTokenForValue,onKeyDown:this._onKeyDown}))}});b.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../keyevent":49,"../typeahead":52,"./token":51,classnames:4}],51:[function(a,b,c){(function(c){var d=window.React||("undefined"!=typeof window?window.React:"undefined"!=typeof c?c.React:null),e=a("classnames"),f=d.createClass({displayName:"Token",propTypes:{className:d.PropTypes.string,name:d.PropTypes.string,children:d.PropTypes.string,onRemove:d.PropTypes.func},render:function(){var a=e("typeahead-token",this.props.className);return d.createElement("div",{className:a},this._renderHiddenInput(),this.props.children,this._renderCloseButton())},_renderHiddenInput:function(){return this.props.name?d.createElement("input",{type:"hidden",name:this.props.name+"[]",value:this.props.children}):null},_renderCloseButton:function(){return this.props.onRemove?d.createElement("a",{className:"typeahead-token-close",href:"#",onClick:function(a){this.props.onRemove(this.props.children),a.preventDefault()}.bind(this)},""):""}});b.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{classnames:4}],52:[function(a,b,c){var d=a("./selector"),e=a("../keyevent"),f=a("classnames"),g=React.createClass({displayName:"Typeahead",propTypes:{name:React.PropTypes.string,customClasses:React.PropTypes.object,maxVisible:React.PropTypes.number,options:React.PropTypes.array,renderOption:React.PropTypes.func,getStringForOption:React.PropTypes.func,allowCustomValues:React.PropTypes.number,defaultValue:React.PropTypes.string,placeholder:React.PropTypes.string,onOptionSelected:React.PropTypes.func,onKeyDown:React.PropTypes.func,selectionAlwaysVisible:React.PropTypes.bool,getOptionsForValue:React.PropTypes.func,mustHaveSelection:React.PropTypes.bool},getDefaultProps:function(){return{options:[],customClasses:{},allowCustomValues:0,defaultValue:"",placeholder:"",selectionAlwaysVisible:!1,mustHaveSelection:!1,onKeyDown:function(a){},onOptionSelected:function(a){}}},getInitialState:function(){return{visible:this.getOptionsForValue(this.props.defaultValue,this.props.options),entryValue:this.props.defaultValue,selection:null}},componentWillReceiveProps:function(a){this.setState({visible:this.getOptionsForValue(a.defaultValue,a.options),entryValue:a.defaultValue})},getOptionsForValue:function(a,b){var c;return c=this.props.selectionAlwaysVisible&&!a?b:this.props.getOptionsForValue(a,b),this.props.maxVisible&&(c=c.slice(0,this.props.maxVisible)),c},setEntryText:function(a){this.refs.entry.getDOMNode().value=a,this._onTextEntryUpdated()},_hasCustomValue:function(){return this.props.allowCustomValues>0&&this.state.entryValue.length>=this.props.allowCustomValues&&this.state.visible.indexOf(this.state.entryValue)<0?!0:!1},_getCustomValue:function(){return this._hasCustomValue()?this.state.entryValue:null},_onFocus:function(a){this.setState({hasFocus:!0}),this.props.onFocus&&this.props.onFocus(a)},_onBlur:function(a){if(!this.refs.sel)return void(this.props.onBlur&&this.props.onBlur(a));var b=this.refs.sel.getActiveOptions();b.length||(this.props.onBlur&&this.props.onBlur(),this.setState({hasFocus:!1}))},_renderIncrementalSearchResults:function(){return(this.props.selectionAlwaysVisible||this.state.hasFocus)&&(this.state.entryValue||this.state.visible)?this.state.selection?"":this.state.visible.length||this.props.allowCustomValues>0?this._hasCustomValue()?React.createElement(d,{ref:"sel",options:this.state.visible,customValue:this.state.entryValue,onOptionSelected:this._onOptionSelected,onTouchMove:this.props.onTouchMoveOnResults,renderOption:this.props.renderOption,mustHaveSelection:this.props.mustHaveSelection,selection:this.props.selection,selectionIndex:this.props.selectionIndex,customClasses:this.props.customClasses}):React.createElement(d,{ref:"sel",options:this.state.visible,onOptionSelected:this._onOptionSelected,onChange:this.props.onSelectionChange,onTouchMove:this.props.onTouchMoveOnResults,renderOption:this.props.renderOption,mustHaveSelection:this.props.mustHaveSelection,selection:this.props.selection,selectionIndex:this.props.selectionIndex,customClasses:this.props.customClasses}):_.valueOrCall(this.props,"emptyHTML")||"":""},_onOptionSelected:function(a,b){if(!this.props.selectionAlwaysVisible){var c=this.props.getStringForOption(a),d=this.refs.entry.getDOMNode();d.focus(),d.value=c,this.setState({visible:this.getOptionsForValue(c,this.props.options),selection:a,entryValue:c})}return this.props.onOptionSelected(a,b)},_onTextEntryUpdated:function(){var a=this.refs.entry.getDOMNode().value,b=this.state.entryValue;this.setState({visible:this.getOptionsForValue(a,this.props.options),selection:null,entryValue:a}),this.props.onInputChange&&this.props.onInputChange(a,b)},_onEnter:function(a){return this.refs.sel&&this.refs.sel.state.selection?this._onOptionSelected(this.refs.sel.state.selection,a):this.props.onKeyDown(a)},_onEscape:function(){this.props.mustHaveSelection?this.refs.entry.getDOMNode().blur():this.refs.sel.setSelectionIndex(null)},_onTab:function(a){var b=this.refs.sel.state.selection;return null===b&&this._hasCustomValue()&&(b=this._getCustomValue()),null!==b?this._onOptionSelected(b,a):null===b?this.refs.entry.getDOMNode().blur():void 0},eventMap:function(a){var b={};return b[e.DOM_VK_UP]=this.refs.sel.navUp,b[e.DOM_VK_DOWN]=this.refs.sel.navDown,b[e.DOM_VK_RETURN]=b[e.DOM_VK_ENTER]=this._onEnter,b[e.DOM_VK_ESCAPE]=this._onEscape,b[e.DOM_VK_TAB]=this._onTab,b},_onKeyDown:function(a){if(!this.refs.sel)return this.props.onKeyDown(a);var b=this.eventMap()[a.keyCode];return b?(b(a),void a.preventDefault()):this.props.onKeyDown(a)},render:function(){var a={};a[this.props.customClasses.input]=!!this.props.customClasses.input;var b=f(a),c={};c[this.props.customClasses.controls]=!!this.props.customClasses.controls;var d=f(c),e={typeahead:!0};e[this.props.className]=!!this.props.className;var g=f(e);return React.createElement("div",{className:g},React.createElement("div",{className:d},this._renderHiddenInput(),React.createElement("input",{ref:"entry",type:"text",placeholder:this.props.placeholder,className:b,value:this.state.entryValue,defaultValue:this.props.defaultValue,onChange:this._onTextEntryUpdated,onKeyDown:this._onKeyDown,onFocus:this._onFocus,onBlur:this._onBlur,spellCheck:!1}),this.props.children),this._renderIncrementalSearchResults())},_renderHiddenInput:function(){if(!this.props.name)return null;var a=this.props.getStringForOption(this.state.selection);return React.createElement("input",{type:"hidden",name:this.props.name,value:a})}});b.exports=g},{"../keyevent":49,"./selector":54,classnames:4}],53:[function(a,b,c){var d=a("classnames");React.initializeTouchEvents(!0);var e=React.createClass({displayName:"TypeaheadOption",propTypes:{customClasses:React.PropTypes.object,customValue:React.PropTypes.string,onClick:React.PropTypes.func,hover:React.PropTypes.bool},getDefaultProps:function(){return{customClasses:{},onClick:function(a){a.preventDefault()}}},getInitialState:function(){return{}},_onMouseLeave:function(a){return this.setState({isActive:!1}),this.props.onMouseLeave?this.props.onMouseLeave(a):void 0},_onMouseDown:function(a){this.setState({isActive:!0})},_onMouseUp:function(a){this.setState({isActive:!1})},render:function(){var a={};a[this.props.customClasses.hover||"hover"]=!!this.props.hover,a[this.props.customClasses.listItem]=!!this.props.customClasses.listItem,a[this.props.customClasses.active||"active"]=!!this.state.isActive,this.props.customValue&&(a[this.props.customClasses.customAdd]=!!this.props.customClasses.customAdd);var b=d(a),c={ref:"li",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onTouchStart:this._onMouseDown,onTouchEnd:this._onMouseUp,className:b,onClick:this._onClick};return this.props.renderer(c)},_getClasses:function(){var a={"typeahead-option":!0};return a[this.props.customClasses.listAnchor]=!!this.props.customClasses.listAnchor,d(a)},_onClick:function(a){return a.preventDefault(),this.props.onClick(a)}});b.exports=e},{classnames:4}],54:[function(a,b,c){var d=a("./option"),e=a("classnames"),f=React.createClass({displayName:"TypeaheadSelector",propTypes:{options:React.PropTypes.array,customClasses:React.PropTypes.object,customValue:React.PropTypes.string,selectionIndex:React.PropTypes.number,selection:React.PropTypes.object,mustHaveSelection:React.PropTypes.bool,onOptionSelected:React.PropTypes.func},getDefaultProps:function(){return{selectionIndex:null,selection:null,customClasses:{},customValue:null,onOptionSelected:function(a){}}},getInitialState:function(){this.props.selection&&(a=this.props.options.indexOf(this.props.selection),console.assert(a>=0));var a=this.props.selectionIndex;return this.props.mustHaveSelection&&(a=a||0,(0>a||a>this.props.options.length)&&(a=0)),{selectionIndex:a,selection:this.getSelectionForIndex(a)}},componentWillReceiveProps:function(a){var b;a.selection?b=a.options.indexOf(a.selection):a.selectionIndex&&(b=a.selectionIndex),a.mustHaveSelection&&(!b&&0!==b&&a.options.length&&(b=0),(0>b||b>a.options.length)&&(b=0)),this.setState({selectionIndex:b})},render:function(){var a={"typeahead-selector":!0};a[this.props.customClasses.results]=this.props.customClasses.results;var b=e(a),c=[];
return null!==this.props.customValue&&c.push(React.createElement(d,{ref:this.props.customValue,key:this.props.customValue,hover:this.state.selectionIndex===c.length,customClasses:this.props.customClasses,customValue:this.props.customValue,onClick:this._onClick.bind(this,this.props.customValue)},this.props.customValue)),this.props.options.map(function(a,b){c.push(React.createElement(d,{ref:"option-"+b,key:b,hover:this.state.selectionIndex===c.length,customClasses:this.props.customClasses,onClick:this._onClick.bind(this,a),renderer:this.props.renderOption.bind(null,a)}))},this),React.createElement("ul",{className:b,onTouchMove:this.props.onTouchMove},c)},setSelectionIndex:function(a){this.props.mustHaveSelection&&(a=a||0),this.setState({selectionIndex:a,selection:this.getSelectionForIndex(a)}),this.props.onChange&&this.props.onChange(this.getSelectionForIndex(a))},getSelectionForIndex:function(a){return null===a?null:0===a&&null!==this.props.customValue?this.props.customValue:(null!==this.props.customValue&&(a-=1),this.props.options[a])},_onClick:function(a,b){return this.props.onOptionSelected(a,b)},_nav:function(a){if(this.props.options||null!==this.props.customValue){var b=null===this.state.selectionIndex?1==a?0:a:this.state.selectionIndex+a,c=this.props.options.length;null!==this.props.customValue&&(c+=1),0>b?b+=c:b>=c&&(b-=c),this.setSelectionIndex(b)}},navDown:function(){this._nav(1)},navUp:function(){this._nav(-1)},getActiveOptions:function(){var a=_.chain(this.refs||{}).map(function(a,b){return a&&/^option-[0-9]+/.test(b)?a:null}).compact().value();return _.filter(a,function(a){return a.state.isActive})}});b.exports=f},{"./option":53,classnames:4}],55:[function(a,b,c){var d={animate:function(a){var b=a.viewport,c=b.saveState();a.animations();var e=b.saveState();d._setStateByLERP(b,c,e,0);var f=Math.pow(e.center.x-c.center.x,2)+Math.pow(e.center.y-c.center.y,2),g=Math.pow(e.zoomLevel-c.zoomLevel,2);f>1e5&&g>.35&&ymap.setMotionBlurring(!0);var h=a.progress;return a.progress=function(a,f,g,i,j){d._setStateByLERP(b,c,e,f),h&&h.apply(this,arguments)},a.queue=a.queue||!1,a.duration=(window._SLOW_ANIMATIONS?10:1)*(a.duration||250),d._dummy=d._dummy||document.createElement("div"),Velocity(d._dummy,{tween:[0,100]},a).then(function(){ymap.setMotionBlurring(!1)}.bind(this))},_setStateByLERP:function(a,b,c,d){var e={width:(c.size.width-b.size.width)*d+b.size.width,height:(c.size.height-b.size.height)*d+b.size.height},f=Math.max(b.zoomLevel*b.size.width/e.width,b.zoomLevel*b.size.height/e.height);a.restoreState({center:{x:(c.center.x-b.center.x)*d+b.center.x,y:(c.center.y-b.center.y)*d+b.center.y},size:e,zoomLevel:f})}};b.exports=d},{}],56:[function(a,b,c){function d(a){this.friction=.9,this.viewport=a.viewport,this.eventLoop=a.eventLoop,this._boundOnTick=this._onTick.bind(this)}d.prototype={stop:function(){this.setVelocity({x:0,y:0})},setVelocity:function(a){this.velocity=a,this.eventLoop.addListener(this._boundOnTick)},_onTick:function(a){if(this.velocity){if(!this._prevTS)return void(this._prevTS=a);var b=a-this._prevTS;this.viewport.translate({x:this.velocity.x*b,y:this.velocity.y*b}),this.viewport.clampToWorldRect(ymap.viewportClampingRect),this.velocity.x*=this.friction,this.velocity.y*=this.friction,Math.abs(this.velocity.x)*eventLoop.msPerTick<.01&&(this.velocity.x=0),Math.abs(this.velocity.y)*eventLoop.msPerTick<.01&&(this.velocity.y=0),this._prevTS=a,0==this.velocity.x&&0==this.velocity.y&&this.eventLoop.removeListener(this._boundOnTick)}}},b.exports=d},{}],57:[function(a,b,c){function d(a,b){this.$node=$("#YMap"),this.node=this.$node[0],this.buffer=document.createElement("canvas"),this.$buffer=$(this.buffer),this.$buffer.css({display:"none"}),this.fbsLoop=function(a){this._flushBufferToScreen(a),requestAnimationFrame(this.fbsLoop)}.bind(this),this.fbsLoop();var c=new i;this.viewport=c,this.updatePixelRatio();var d=new e(a.size);this.worldRect=d,this.viewportClampingRect=d.clone(),this.tileManager=new f({bgImg:a.bgImg,tileSize:a.tile_size,worldSize:a.size}),this.appItemManager=new g({apps:a.items_array,iconSize:a.icon_size+a.icon_padding,numColumns:a.embed_array_num_cols,numRows:a.embed_array_num_rows}),this.anchorManager=new h({anchorApps:_.chain(a.toplist_anchors).map(this.appItemManager.appAtLinearIndex.bind(this.appItemManager)).filter().value()}),this.breathingAnimator=new m,this.appSearch=new n({parentNode:this.node.parentNode,apps:this.appItemManager._apps}),this.appSearch.ee.on("didFocus",function(){this.selectApp(null),Velocity(this.node,{easing:[300,10],duration:200},{progress:function(a,b){var c=Math.round(b*t*10)/10;$(a).css({WebkitFilter:"blur("+c+"px)"})}})}.bind(this)),this.appSearch.ee.on("didBlur",function(){Velocity(this.node,{easing:[300,10],duration:200},{progress:function(a,b){b=1-b;var c=Math.round(b*t*10)/10;$(a).css({WebkitFilter:"blur("+c+"px)"})}})}.bind(this)),this.appSearch.ee.on("didSelect",function(a,b){this.selectApp(b)}.bind(this)),this.appTooltip=new l({parentNode:this.node.parentNode}),$(window).resize(this.onResize.bind(this)),this.onResize(),c.ee.on("didChange",this.requestRender.bind(this));var p=new Hammer.Manager(this.node),u=new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:3});p.add(u);var v={x:0,y:0};p.on("panstart panmove panend pinchstart pinchmove",function(a){var b=this.nodeDelta2World({x:a.deltaX,y:a.deltaY});return"panstart"==a.type||"pinchstart"==a.type?void(v=b):(c.translate({x:v.x-b.x,y:v.y-b.y}),c.clampToWorldRect(this.viewportClampingRect),void(v=b))}.bind(this));var w=function(a,b){var d=a*c.zoomLevel;d=Math.max(d,q),d=Math.min(d,MAX_ZOOM_LEVEL);var e=1.5;if(!(d/c.zoomLevel>e||d/c.zoomLevel<1/e)){var f=this.nodePoint2World(b);c.zoomToLevel(d,f),c.clampToWorldRect(this.viewportClampingRect),1>a&&this.selectApp(null)}}.bind(this),x=new Hammer.Pinch({threshold:0});p.add(x),p.get("pinch").recognizeWith("pan");var y=1;p.on("pinchstart pinchmove",function(a){return"pinchstart"==a.type?void(y=a.scale):(w(a.scale/y,a.center),void(y=a.scale))}),self.addEventListener("mousewheel",function(a){if(!this.appSearch.hasFocus()){var b=a.deltaY>0?1:-1,c=Math.log(Math.abs(a.deltaY));c*=b;var d=50/(50+c);d=Math.max(d,0),d=Math.min(d,2.5);var e={x:a.clientX,y:a.clientY};w(d,e)}}.bind(this)),p.add(new Hammer.Tap({event:"doubletap",taps:2,posThreshold:25,interval:o})),p.on("doubletap",function(a){var b=c.zoomLevel>=MAX_ZOOM_LEVEL;b&&this.selectApp(null);var d=this.nodePoint2World(a.center);k.animate({viewport:c,animations:function(){b?c.zoomToLevel(q,d):c.zoomToLevel(MAX_ZOOM_LEVEL,d),c.clampToWorldRect(this.viewportClampingRect)}.bind(this),easing:[300,10]})}.bind(this)),p.add(new Hammer.Tap({event:"singletap",posThreshold:25,interval:o})),p.get("doubletap").recognizeWith("singletap"),p.get("singletap").requireFailure("doubletap"),p.on("singletap",function(a){if(this.appTooltip._isFullScreen)return this.appTooltip.closeFullScreen(s),void I(s);if(c.zoomLevel>=r){var b=this.nodePoint2World(a.center),d=this.appItemManager.appAtWorldPoint(b);return void(d&&this.selectApp(d))}var b=this.nodePoint2World(a.center),e=_.find(this.anchorManager.visibleAnchors,function(a){var c=a.scaledRectInWorld(),d=15*c.scaledBy;return c.scale((c.width+2*d)/c.width,c.center()),c.containsPoint(b)});e&&(this.selectApp(e),p.stop(!0))}.bind(this));var z=new j({viewport:c,eventLoop:b}),A=new Hammer.Swipe({event:"swipe",direction:Hammer.DIRECTION_ALL,threshold:1});p.add(A),p.get("swipe").recognizeWith("pan"),p.on("swipe",function(a){var b={x:a.velocityX,y:a.velocityY};b=this.nodeDelta2World(b),z.setVelocity(b)}.bind(this)),this.$node.on("touchstart mousedown mousewheel",z.stop.bind(z));var B=new Hammer.Manager(this.appTooltip.node,{touchAction:"auto"}),C=new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:5});B.add(C);var D=s,E=.7,F=.15,G=0;window.lastVelocityY=void 0;var H=Hammer.DIRECTION_VERTICAL,I=function(a){var b=(a-s)/(D-s);b=Math.max(0,b),b=Math.min(1,b);var c=Math.round(b*t*10)/10;$(this.node).css({WebkitFilter:"blur("+c+"px)"})}.bind(this);B.on("panstart panmove panend",function(a){if(lastVelocityY=a.velocityY,"panstart"==a.type){if(D=$(this.appTooltip.node.parentNode).height(),G=$(this.appTooltip.node).height(),H=a.direction,!(H&Hammer.DIRECTION_VERTICAL))return;return a.srcEvent.preventDefault(),void a.preventDefault()}if("panmove"==a.type){if(!(H&Hammer.DIRECTION_VERTICAL))return;a.srcEvent.preventDefault(),a.preventDefault();var b=G-a.deltaY;return b=Math.max(b,0),b=Math.min(b,D),I(b),void $(this.appTooltip.node).height(b)}if("panend"==a.type){if(lastVelocityY=void 0,!(H&Hammer.DIRECTION_VERTICAL))return;a.srcEvent.preventDefault(),a.preventDefault();var c=$(this.appTooltip.node).height();if(s>c)return console.log("too small, deselect app"),void this.selectApp(null).then(function(){$(this.appTooltip.node).height(s)}.bind(this));if(a.velocityY>E&&!this.appTooltip._isFullScreen)return console.log("big swing up -- full screen"),this.appTooltip.openFullScreen(),void I(D);if(a.velocityY<-E&&this.appTooltip._isFullScreen)return console.log("big swing down -- close full screen"),this.appTooltip.closeFullScreen(s),void I(s);var d=Math.abs(c-G)/(D-s);return void(d>F?this.appTooltip._isFullScreen&&G>c?(console.log("cont close"),this.appTooltip.closeFullScreen(s),I(s)):!this.appTooltip._isFullScreen&&c>G&&(console.log("cont open"),this.appTooltip.openFullScreen(),I(D)):this.appTooltip._isFullScreen?(console.log("revert to open"),this.appTooltip.openFullScreen(),I(D)):(console.log("revert to close"),this.appTooltip.closeFullScreen(s),I(s)))}}.bind(this)),B.add(new Hammer.Tap({event:"singletap",posThreshold:25,interval:o})),B.on("singletap",function(a){this.appTooltip.openFullScreen(),I(D)}.bind(this)),document.addEventListener("touchmove",function(a){if(!(void 0!==lastVelocityY&&Math.abs(lastVelocityY)<.01)){var b=$(a.target).closest(".typeahead-results")[0];b||a.preventDefault()}}),document.addEventListener("scroll",function(a){document.body.scrollTop=0});var J=1;J=.71,J=1/6,J=q,this.viewport.zoom(J),this.viewport.translateCenterTo({x:this.worldRect.width/2,y:this.worldRect.height/2}),this.viewport.clampToWorldRect(this.viewportClampingRect),this.requestRender(),DEBUG&&$(document.body).on("keyup",function(a){a.ctrlKey&&84==a.keyCode&&(window._SLOW_ANIMATIONS=!window._SLOW_ANIMATIONS,console.log("slow animations set to ",window._SLOW_ANIMATIONS))})}var e=a("yttro/lib/rect"),f=a("yttro/model/tile-manager"),g=a("yttro/model/app-item-manager"),h=a("yttro/model/anchor-manager"),i=a("yttro/lib/viewport"),j=a("yttro/views/viewport-momentum"),k=a("yttro/views/viewport-animator"),l=a("yttro/views/app-tooltip"),m=a("yttro/views/breathing-animator"),n=a("yttro/views/app-search"),o=200,p=.75;self.MAX_ZOOM_LEVEL=p;var q=.2,r=.7,s=114,t=10;d.prototype.init=function(){return Promise.all([this.tileManager.loadTiles()])},d.prototype.selectApp=function(a){var b=this.viewport;return a?a==this.appTooltip._app?Promise.resolve():(this.breathingAnimator.start(a),this.appTooltip.setApp(a),Promise.all([this.appTooltip.setTooltipVisible(!0),k.animate({viewport:b,easing:[300,10],animations:function(){b.zoomToLevel(MAX_ZOOM_LEVEL,a.center),b.translateCenterTo({x:a.center.x,y:a.center.y}),this.viewportClampingRect.height=this.worldRect.height+this.nodeDelta2World({y:s}).y,b.clampToWorldRect(this.viewportClampingRect)}.bind(this)})])):(this.breathingAnimator.stop(),Promise.all([this.appTooltip.setTooltipVisible(!1).then(function(){this.appTooltip.setApp(null)}.bind(this)),k.animate({viewport:b,easing:[300,10],animations:function(){this.viewportClampingRect.height=this.worldRect.height,b.clampToWorldRect(this.viewportClampingRect)}.bind(this)})]))},d.prototype.nodePoint2World=function(a){return{x:a.x*this.pixelRatio/this.viewport.zoomLevel+this.viewport.center.x-this.viewport.size.width/2,y:a.y*this.pixelRatio/this.viewport.zoomLevel+this.viewport.center.y-this.viewport.size.height/2}},d.prototype.nodeDelta2World=function(a){return{x:a.x*this.pixelRatio/this.viewport.zoomLevel,y:a.y*this.pixelRatio/this.viewport.zoomLevel}},d.prototype.worldDelta2Node=function(a){return{x:a.x/this.pixelRatio*this.viewport.zoomLevel,y:a.y/this.pixelRatio*this.viewport.zoomLevel}},d.prototype.updatePixelRatio=function(){var a=this.node.getContext("2d"),b=window.devicePixelRatio||1,c=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;this.pixelRatio=b/c,MAX_ZOOM_LEVEL=p*this.pixelRatio},d.prototype.onResize=function(){this.updatePixelRatio(),this.node.width=this.$node.width()*this.pixelRatio,this.node.height=this.$node.height()*this.pixelRatio,this.buffer.width=this.node.width,this.buffer.height=this.node.height,this.viewport.adjustToSize({width:this.node.width/this.viewport.zoomLevel,height:this.node.height/this.viewport.zoomLevel}),this.viewport.clampToWorldRect(this.viewportClampingRect),DEBUG&&(RBDebug.clearPts(),this.drawPt(this.viewport.center))},d.prototype.drawPt=function(a,b){var c=this.viewport.rectInWorld(),d=RBDebug.drawPt({x:(a.x-c.left())*this.viewport.zoomLevel/this.pixelRatio,y:(a.y-c.top())*this.viewport.zoomLevel/this.pixelRatio},b);this.node.parentNode.appendChild(d)},d.prototype.drawPtOnContext=function(a,b,c){c=c||"#00FF00",a.save(),a.fillStyle=c,console.log(b);var d=5/viewport.zoomLevel;a.fillRect(b.x-d/2,b.y-d/2,d,d),a.restore()},d.prototype.requestRender=function(){this._boundRender||(this._boundRender=this._render.bind(this)),requestAnimationFrame(this._boundRender)},d.prototype._render=function(a){if(!(a-this._prevTS<1/world.FPS)){this._prevTS=a;var b=this.viewport,c=this.buffer.getContext("2d");if(c.save(),c.scale(b.zoomLevel,b.zoomLevel),c.translate(-(b.center.x-b.size.width/2),-(b.center.y-b.size.height/2)),this.viewportClampingRect.height>this.worldRect.height&&c.clearRect(0,this.worldRect.height,this.viewportClampingRect.width,this.viewportClampingRect.height-this.worldRect.height),this._motionBlurring){var d=.2;c.globalCompositeOperation="source-over",c.globalAlpha=1-d}else c.globalCompositeOperation="source",c.globalAlpha=1;this.tileManager.renderViewport(c,this.viewport,{lowRes:this._motionBlurring}),this._renderDimmingLayer(c),this.anchorManager.renderViewport(c,this.viewport),this.breathingAnimator.render(c,a),c.restore()}},d.prototype._renderDimmingLayer=function(a){var b=.9*MAX_ZOOM_LEVEL,c=.5,d=(this.viewport.zoomLevel-q)/(b-q);d=1-d,d*=c,0>=d||(a.save(),a.fillStyle="rgba(0,0,0,"+d+")",a.fillRect(0,0,this.viewportClampingRect.width,this.viewportClampingRect.height),a.restore())},d.prototype._flushBufferToScreen=function(a){var b=this.node.getContext("2d");b.globalCompositeOperation="copy",b.drawImage(this.buffer,0,0,b.canvas.width,b.canvas.height)},d.prototype.setMotionBlurring=function(a){this._motionBlurring!=a&&(this._motionBlurring=a,this.requestRender())},b.exports=d},{"yttro/lib/rect":33,"yttro/lib/viewport":36,"yttro/model/anchor-manager":38,"yttro/model/app-item-manager":39,"yttro/model/tile-manager":41,"yttro/views/app-search":44,"yttro/views/app-tooltip":45,"yttro/views/breathing-animator":46,"yttro/views/viewport-animator":55,"yttro/views/viewport-momentum":56}],58:[function(a,b,c){function d(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(a){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof a?f(this,a):"string"==typeof a?g(this,a,arguments.length>1?arguments[1]:"utf8"):h(this,a)):arguments.length>1?new e(a,arguments[1]):new e(a)}function f(a,b){if(a=o(a,0>b?0:0|p(b)),!e.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;c++)a[c]=0;return a}function g(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|r(b,c);return a=o(a,d),a.write(b,c),a}function h(a,b){if(e.isBuffer(b))return i(a,b);if(X(b))return j(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return k(a,b);if(b instanceof ArrayBuffer)return l(a,b)}return b.length?m(a,b):n(a,b)}function i(a,b){var c=0|p(b.length);return a=o(a,c),b.copy(a,0,0,c),a}function j(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function k(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function l(a,b){return e.TYPED_ARRAY_SUPPORT?(b.byteLength,a=e._augment(new Uint8Array(b))):a=k(a,new Uint8Array(b)),a}function m(a,b){var c=0|p(b.length);a=o(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function n(a,b){var c,d=0;"Buffer"===b.type&&X(b.data)&&(c=b.data,d=0|p(c.length)),a=o(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function o(a,b){e.TYPED_ARRAY_SUPPORT?a=e._augment(new Uint8Array(b)):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=e.poolSize>>>1;return c&&(a.parent=Y),a}function p(a){if(a>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|a}function q(a,b){if(!(this instanceof q))return new q(a,b);var c=new e(a,b);return delete c.parent,c}function r(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return P(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return S(a).length;default:if(d)return P(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return D(this,b,c);case"utf8":case"utf-8":return A(this,b,c);case"ascii":return B(this,b,c);case"binary":return C(this,b,c);case"base64":return z(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function u(a,b,c,d){return T(P(b,a.length-c),a,c,d)}function v(a,b,c,d){return T(Q(b),a,c,d)}function w(a,b,c,d){return v(a,b,c,d)}function x(a,b,c,d){return T(S(b),a,c,d)}function y(a,b,c,d){return T(R(b,a.length-c),a,c,d)}function z(a,b,c){return 0===b&&c===a.length?V.fromByteArray(a):V.fromByteArray(a.slice(b,c))}function A(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=U(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+U(e)}function B(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function C(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function D(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=O(a[f]);return e}function E(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function F(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function G(a,b,c,d,f,g){if(!e.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function H(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function I(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function J(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function K(a,b,c,d,e){return e||J(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(a,b,c,d,23,4),c+4}function L(a,b,c,d,e){return e||J(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(a,b,c,d,52,8),c+8}function M(a){if(a=N(a).replace($,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function N(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function O(a){return 16>a?"0"+a.toString(16):a.toString(16)}function P(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536,e=null}else e&&((b-=3)>-1&&f.push(239,191,189),e=null);if(128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(2097152>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Q(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function R(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function S(a){return V.toByteArray(M(a))}function T(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function U(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var V=a("base64-js"),W=a("ieee754"),X=a("is-array");c.Buffer=e,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,e.poolSize=8192;var Y={};e.TYPED_ARRAY_SUPPORT=function(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}(),e.isBuffer=function(a){return!(null==a||!a._isBuffer)},e.compare=function(a,b){if(!e.isBuffer(a)||!e.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,f=0,g=Math.min(c,d);g>f&&a[f]===b[f];)++f;return f!==g&&(c=a[f],d=b[f]),d>c?-1:c>d?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,b){if(!X(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new e(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new e(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,f),f+=g.length}return d},e.byteLength=r,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?A(this,0,a):s.apply(this,arguments)},e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===e.compare(this,a)},e.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},e.prototype.compare=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:e.compare(this,a)},e.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(e.isBuffer(a))return c(this,a,b);if("number"==typeof a)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},e.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},e.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return t(this,a,b,c);case"utf8":case"utf-8":return u(this,a,b,c);case"ascii":return v(this,a,b,c);case"binary":return w(this,a,b,c);case"base64":return x(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(e.TYPED_ARRAY_SUPPORT)d=e._augment(this.subarray(a,b));else{var f=b-a;d=new e(f,void 0);for(var g=0;f>g;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},e.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},e.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},e.prototype.readUInt8=function(a,b){return b||F(a,1,this.length),this[a]},e.prototype.readUInt16LE=function(a,b){return b||F(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUInt16BE=function(a,b){return b||F(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUInt32LE=function(a,b){return b||F(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},e.prototype.readUInt32BE=function(a,b){return b||F(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},e.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||F(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},e.prototype.readInt8=function(a,b){return b||F(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},e.prototype.readInt16LE=function(a,b){b||F(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt16BE=function(a,b){b||F(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt32LE=function(a,b){return b||F(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,b){return b||F(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readFloatLE=function(a,b){return b||F(a,4,this.length),W.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,b){return b||F(a,4,this.length),W.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,b){return b||F(a,8,this.length),W.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,b){return b||F(a,8,this.length),W.read(this,a,!1,52,8)},e.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||G(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},e.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||G(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},e.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,1,255,0),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},e.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):H(this,a,b,!0),b+2},e.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):H(this,a,b,!1),b+2},e.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):I(this,a,b,!0),b+4},e.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):I(this,a,b,!1),b+4},e.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);G(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);G(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,1,127,-128),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},e.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):H(this,a,b,!0),b+2},e.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):H(this,a,b,!1),b+2},e.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):I(this,a,b,!0),b+4},e.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||G(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):I(this,a,b,!1),b+4},e.prototype.writeFloatLE=function(a,b,c){return K(this,a,b,!0,c)},e.prototype.writeFloatBE=function(a,b,c){return K(this,a,b,!1,c)},e.prototype.writeDoubleLE=function(a,b,c){return L(this,a,b,!0,c)},e.prototype.writeDoubleBE=function(a,b,c){return L(this,a,b,!1,c)},e.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var f,g=d-c;if(this===a&&b>c&&d>b)for(f=g-1;f>=0;f--)a[f+b]=this[f+c];else if(1e3>g||!e.TYPED_ARRAY_SUPPORT)for(f=0;g>f;f++)a[f+b]=this[f+c];else a._set(this.subarray(c,c+g),b);return g},e.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=P(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(a){return a.constructor=e,a._isBuffer=!0,a._set=a.set,a.get=Z.get,a.set=Z.set,a.write=Z.write,a.toString=Z.toString,a.toLocaleString=Z.toString,a.toJSON=Z.toJSON,a.equals=Z.equals,a.compare=Z.compare,a.indexOf=Z.indexOf,a.copy=Z.copy,a.slice=Z.slice,a.readUIntLE=Z.readUIntLE,a.readUIntBE=Z.readUIntBE,a.readUInt8=Z.readUInt8,a.readUInt16LE=Z.readUInt16LE,a.readUInt16BE=Z.readUInt16BE,a.readUInt32LE=Z.readUInt32LE,a.readUInt32BE=Z.readUInt32BE,
a.readIntLE=Z.readIntLE,a.readIntBE=Z.readIntBE,a.readInt8=Z.readInt8,a.readInt16LE=Z.readInt16LE,a.readInt16BE=Z.readInt16BE,a.readInt32LE=Z.readInt32LE,a.readInt32BE=Z.readInt32BE,a.readFloatLE=Z.readFloatLE,a.readFloatBE=Z.readFloatBE,a.readDoubleLE=Z.readDoubleLE,a.readDoubleBE=Z.readDoubleBE,a.writeUInt8=Z.writeUInt8,a.writeUIntLE=Z.writeUIntLE,a.writeUIntBE=Z.writeUIntBE,a.writeUInt16LE=Z.writeUInt16LE,a.writeUInt16BE=Z.writeUInt16BE,a.writeUInt32LE=Z.writeUInt32LE,a.writeUInt32BE=Z.writeUInt32BE,a.writeIntLE=Z.writeIntLE,a.writeIntBE=Z.writeIntBE,a.writeInt8=Z.writeInt8,a.writeInt16LE=Z.writeInt16LE,a.writeInt16BE=Z.writeInt16BE,a.writeInt32LE=Z.writeInt32LE,a.writeInt32BE=Z.writeInt32BE,a.writeFloatLE=Z.writeFloatLE,a.writeFloatBE=Z.writeFloatBE,a.writeDoubleLE=Z.writeDoubleLE,a.writeDoubleBE=Z.writeDoubleBE,a.fill=Z.fill,a.inspect=Z.inspect,a.toArrayBuffer=Z.toArrayBuffer,a};var $=/[^+\/0-9A-Za-z-_]/g},{"base64-js":59,ieee754:60,"is-array":61}],59:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],60:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],61:[function(a,b,c){var d=Array.isArray,e=Object.prototype.toString;b.exports=d||function(a){return!!a&&"[object Array]"==e.call(a)}},{}],62:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],63:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],64:[function(a,b,c){(function(a){!function(d){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,".");var e=a.split("."),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;(s.global===s||s.window===s||s.self===s)&&(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.3.2",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],66:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],67:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":65,"./encode":66}],68:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:64,querystring:67}],69:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],70:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":69,_process:63,inherits:62}]},{},[25]);